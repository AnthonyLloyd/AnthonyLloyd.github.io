---
layout: post
title: "DAG - An Immutable Spreadsheet Data Structure"
tags: [dag,immutable,spreadsheet,cell]
description: "DAG - An Immutable Spreadsheet Data Structure"
keywords: f#, dag, immutable, spreadsheet, cell
---
<p>In finance, data grids can be defined as a set of input fields and function fields that take other field values as parameters.
Spreadsheets are often used to do this, but they have several <a href="https://www.cio.com/article/2438188/enterprise-software/eight-of-the-worst-spreadsheet-blunders.html">limitations</a>.</p>
<p>Recently, I've been working on ways of describing calculations, so they can just as easily be viewed in a desktop application, web report or spreadsheet.</p>
<p>One of the components required to do this is a functional calculation graph much like how a spreadsheet works.
This blog aims to construct a functional <a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph">directed acyclic graph (DAG)</a> calculation data structure.</p>
<h2><a name="DAG-code" class="anchor" href="#DAG-code">DAG code</a></h2>
<p>We don't have to work very hard to ensure the graph is not circular or keep the cells in topological order.
The API can be designed such that it is only possible to add function cells when the parameter cells already exist in the DAG.
All tasks can be performed with a single pass of the cells in the order they were added.</p>
<p>The DAG data structure is made immutable by cloning any internal arrays when they need to be changed.
Grids can keep the old version of the calculations or compare and switch to the new version when needed.</p>
<p>The DAG is fully type safe by use of an applicative functor builder in constructing function cells.</p>
<p>Cells are evaluated as <code>lazy</code> <code>Task</code> so calculations run as parallel as possible.
Calculations are run only once, and results are reused even after further updates to the DAG.</p>
<p>The code can be downloaded <a href="https://github.com/AnthonyLloyd/Dag">here</a>.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs4', 5)" onmouseover="showTip(event, 'fs4', 5)" class="rt">Dag</span> <span class="o">=</span> <span class="k">private</span> <span class="pn">{</span>
    <span onmouseout="hideTip(event, 'fs5', 6)" onmouseover="showTip(event, 'fs5', 6)" class="id">InputValues</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs6', 7)" onmouseover="showTip(event, 'fs6', 7)" class="rt">obj</span> <span onmouseout="hideTip(event, 'fs7', 8)" onmouseover="showTip(event, 'fs7', 8)" class="rt">array</span>
    <span onmouseout="hideTip(event, 'fs8', 9)" onmouseover="showTip(event, 'fs8', 9)" class="id">FunctionInputs</span> <span class="pn">:</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs9', 10)" onmouseover="showTip(event, 'fs9', 10)" class="rt">Set</span><span class="pn">&lt;</span><span onmouseout="hideTip(event, 'fs10', 11)" onmouseover="showTip(event, 'fs10', 11)" class="vt">int</span><span class="pn">&gt;</span> <span class="pn">*</span> <span onmouseout="hideTip(event, 'fs9', 12)" onmouseover="showTip(event, 'fs9', 12)" class="rt">Set</span><span class="pn">&lt;</span><span onmouseout="hideTip(event, 'fs10', 13)" onmouseover="showTip(event, 'fs10', 13)" class="vt">int</span><span class="pn">&gt;</span><span class="pn">)</span> <span onmouseout="hideTip(event, 'fs7', 14)" onmouseover="showTip(event, 'fs7', 14)" class="rt">array</span>
    <span onmouseout="hideTip(event, 'fs11', 15)" onmouseover="showTip(event, 'fs11', 15)" class="id">FunctionFunctions</span> <span class="pn">:</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs4', 16)" onmouseover="showTip(event, 'fs4', 16)" class="rt">Dag</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs6', 17)" onmouseover="showTip(event, 'fs6', 17)" class="rt">obj</span><span class="pn">)</span> <span onmouseout="hideTip(event, 'fs7', 18)" onmouseover="showTip(event, 'fs7', 18)" class="rt">array</span> <span class="c">//obj is Task&lt;&#39;a&gt;</span>
    <span onmouseout="hideTip(event, 'fs12', 19)" onmouseover="showTip(event, 'fs12', 19)" class="id">FunctionValues</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs13', 20)" onmouseover="showTip(event, 'fs13', 20)" class="rt">Lazy</span><span class="pn">&lt;</span><span onmouseout="hideTip(event, 'fs6', 21)" onmouseover="showTip(event, 'fs6', 21)" class="rt">obj</span><span class="pn">&gt;</span> <span onmouseout="hideTip(event, 'fs7', 22)" onmouseover="showTip(event, 'fs7', 22)" class="rt">array</span> <span class="c">//obj is Task&lt;&#39;a&gt;</span>
<span class="pn">}</span>

<span class="k">module</span> <span onmouseout="hideTip(event, 'fs4', 23)" onmouseover="showTip(event, 'fs4', 23)" class="m">Dag</span> <span class="o">=</span>
    <span class="k">let</span> <span class="k">private</span> <span onmouseout="hideTip(event, 'fs14', 24)" onmouseover="showTip(event, 'fs14', 24)" class="fn">append</span> <span onmouseout="hideTip(event, 'fs15', 25)" onmouseover="showTip(event, 'fs15', 25)" class="id">a</span> <span onmouseout="hideTip(event, 'fs16', 26)" onmouseover="showTip(event, 'fs16', 26)" class="id">v</span> <span class="o">=</span>
        <span class="k">let</span> <span class="k">mutable</span> <span onmouseout="hideTip(event, 'fs17', 27)" onmouseover="showTip(event, 'fs17', 27)" class="mv">a</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs15', 28)" onmouseover="showTip(event, 'fs15', 28)" class="id">a</span>
        <span onmouseout="hideTip(event, 'fs18', 29)" onmouseover="showTip(event, 'fs18', 29)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs19', 30)" onmouseover="showTip(event, 'fs19', 30)" class="id">Resize</span><span class="pn">(</span><span class="o">&amp;</span><span onmouseout="hideTip(event, 'fs17', 31)" onmouseover="showTip(event, 'fs17', 31)" class="mv">a</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs18', 32)" onmouseover="showTip(event, 'fs18', 32)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 33)" onmouseover="showTip(event, 'fs20', 33)" class="id">length</span> <span onmouseout="hideTip(event, 'fs17', 34)" onmouseover="showTip(event, 'fs17', 34)" class="mv">a</span> <span class="o">+</span> <span class="n">1</span><span class="pn">)</span>
        <span onmouseout="hideTip(event, 'fs17', 35)" onmouseover="showTip(event, 'fs17', 35)" class="mv">a</span><span class="m">.</span><span class="pn">[</span><span onmouseout="hideTip(event, 'fs18', 36)" onmouseover="showTip(event, 'fs18', 36)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 37)" onmouseover="showTip(event, 'fs20', 37)" class="id">length</span> <span onmouseout="hideTip(event, 'fs17', 38)" onmouseover="showTip(event, 'fs17', 38)" class="mv">a</span> <span class="o">-</span> <span class="n">1</span><span class="pn">]</span> <span class="k">&lt;-</span> <span onmouseout="hideTip(event, 'fs16', 39)" onmouseover="showTip(event, 'fs16', 39)" class="id">v</span>
        <span onmouseout="hideTip(event, 'fs17', 40)" onmouseover="showTip(event, 'fs17', 40)" class="mv">a</span>

    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs21', 41)" onmouseover="showTip(event, 'fs21', 41)" class="rt">Input</span> <span class="o">=</span> <span class="k">private</span> <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs22', 42)" onmouseover="showTip(event, 'fs22', 42)" class="uc">CellInput</span>
    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs23', 43)" onmouseover="showTip(event, 'fs23', 43)" class="rt">Function</span> <span class="o">=</span> <span class="k">private</span> <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs24', 44)" onmouseover="showTip(event, 'fs24', 44)" class="uc">CellFunction</span>

    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs25', 45)" onmouseover="showTip(event, 'fs25', 45)" class="rt">Cell</span><span class="pn">&lt;</span><span class="ta">&#39;</span><span class="id">a</span><span class="pn">,</span><span class="ta">&#39;</span><span class="id">b</span><span class="pn">&gt;</span> <span class="o">=</span> <span class="k">private</span> <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs25', 46)" onmouseover="showTip(event, 'fs25', 46)" class="uc">Cell</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs10', 47)" onmouseover="showTip(event, 'fs10', 47)" class="vt">int</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs26', 48)" onmouseover="showTip(event, 'fs26', 48)" class="id">empty</span> <span class="o">=</span> <span class="pn">{</span>
        <span class="id">InputValues</span> <span class="o">=</span> <span class="pn">[|</span><span class="pn">|]</span>
        <span class="id">FunctionInputs</span> <span class="o">=</span> <span class="pn">[|</span><span class="pn">|]</span>
        <span class="id">FunctionFunctions</span> <span class="o">=</span> <span class="pn">[|</span><span class="pn">|]</span>
        <span class="id">FunctionValues</span> <span class="o">=</span> <span class="pn">[|</span><span class="pn">|]</span>
    <span class="pn">}</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs27', 49)" onmouseover="showTip(event, 'fs27', 49)" class="fn">addInput</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs16', 50)" onmouseover="showTip(event, 'fs16', 50)" class="id">v</span><span class="pn">:</span><span class="ta">&#39;</span><span class="id">a</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs28', 51)" onmouseover="showTip(event, 'fs28', 51)" class="id">d</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs4', 52)" onmouseover="showTip(event, 'fs4', 52)" class="rt">Dag</span><span class="pn">)</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs4', 53)" onmouseover="showTip(event, 'fs4', 53)" class="rt">Dag</span> <span class="pn">*</span> <span onmouseout="hideTip(event, 'fs25', 54)" onmouseover="showTip(event, 'fs25', 54)" class="rt">Cell</span><span class="pn">&lt;</span><span class="ta">&#39;</span><span class="id">a</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs21', 55)" onmouseover="showTip(event, 'fs21', 55)" class="rt">Input</span><span class="pn">&gt;</span> <span class="o">=</span>
        <span class="pn">{</span> <span onmouseout="hideTip(event, 'fs28', 56)" onmouseover="showTip(event, 'fs28', 56)" class="id">d</span> <span class="k">with</span>
            <span class="id">InputValues</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs29', 57)" onmouseover="showTip(event, 'fs29', 57)" class="fn">box</span> <span onmouseout="hideTip(event, 'fs16', 58)" onmouseover="showTip(event, 'fs16', 58)" class="id">v</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs14', 59)" onmouseover="showTip(event, 'fs14', 59)" class="fn">append</span> <span onmouseout="hideTip(event, 'fs28', 60)" onmouseover="showTip(event, 'fs28', 60)" class="id">d</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs5', 61)" onmouseover="showTip(event, 'fs5', 61)" class="id">InputValues</span>
        <span class="pn">}</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs25', 62)" onmouseover="showTip(event, 'fs25', 62)" class="uc">Cell</span> <span onmouseout="hideTip(event, 'fs28', 63)" onmouseover="showTip(event, 'fs28', 63)" class="id">d</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs5', 64)" onmouseover="showTip(event, 'fs5', 64)" class="id">InputValues</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs30', 65)" onmouseover="showTip(event, 'fs30', 65)" class="id">Length</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs31', 66)" onmouseover="showTip(event, 'fs31', 66)" class="fn">getValue</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs25', 67)" onmouseover="showTip(event, 'fs25', 67)" class="uc">Cell</span> <span onmouseout="hideTip(event, 'fs32', 68)" onmouseover="showTip(event, 'fs32', 68)" class="id">i</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs25', 69)" onmouseover="showTip(event, 'fs25', 69)" class="rt">Cell</span><span class="pn">&lt;</span><span class="ta">&#39;</span><span class="id">a</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs21', 70)" onmouseover="showTip(event, 'fs21', 70)" class="rt">Input</span><span class="pn">&gt;</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs28', 71)" onmouseover="showTip(event, 'fs28', 71)" class="id">d</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs4', 72)" onmouseover="showTip(event, 'fs4', 72)" class="rt">Dag</span><span class="pn">)</span> <span class="pn">:</span> <span class="ta">&#39;</span><span class="id">a</span> <span class="o">=</span>
        <span class="k">downcast</span> <span onmouseout="hideTip(event, 'fs28', 73)" onmouseover="showTip(event, 'fs28', 73)" class="id">d</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs5', 74)" onmouseover="showTip(event, 'fs5', 74)" class="id">InputValues</span><span class="m">.</span><span class="pn">[</span><span onmouseout="hideTip(event, 'fs32', 75)" onmouseover="showTip(event, 'fs32', 75)" class="id">i</span><span class="pn">]</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs33', 76)" onmouseover="showTip(event, 'fs33', 76)" class="fn">setInput</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs25', 77)" onmouseover="showTip(event, 'fs25', 77)" class="uc">Cell</span> <span onmouseout="hideTip(event, 'fs32', 78)" onmouseover="showTip(event, 'fs32', 78)" class="id">i</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs25', 79)" onmouseover="showTip(event, 'fs25', 79)" class="rt">Cell</span><span class="pn">&lt;</span><span class="ta">&#39;</span><span class="id">a</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs21', 80)" onmouseover="showTip(event, 'fs21', 80)" class="rt">Input</span><span class="pn">&gt;</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs34', 81)" onmouseover="showTip(event, 'fs34', 81)" class="id">a</span><span class="pn">:</span><span class="ta">&#39;</span><span class="id">a</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs28', 82)" onmouseover="showTip(event, 'fs28', 82)" class="id">d</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs4', 83)" onmouseover="showTip(event, 'fs4', 83)" class="rt">Dag</span><span class="pn">)</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs4', 84)" onmouseover="showTip(event, 'fs4', 84)" class="rt">Dag</span> <span class="o">=</span>
        <span class="k">if</span> <span class="k">downcast</span> <span onmouseout="hideTip(event, 'fs28', 85)" onmouseover="showTip(event, 'fs28', 85)" class="id">d</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs5', 86)" onmouseover="showTip(event, 'fs5', 86)" class="id">InputValues</span><span class="m">.</span><span class="pn">[</span><span onmouseout="hideTip(event, 'fs32', 87)" onmouseover="showTip(event, 'fs32', 87)" class="id">i</span><span class="pn">]</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs34', 88)" onmouseover="showTip(event, 'fs34', 88)" class="id">a</span> <span class="k">then</span> <span onmouseout="hideTip(event, 'fs28', 89)" onmouseover="showTip(event, 'fs28', 89)" class="id">d</span>
        <span class="k">else</span>
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs35', 90)" onmouseover="showTip(event, 'fs35', 90)" class="id">dirtyCalcs</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs36', 91)" onmouseover="showTip(event, 'fs36', 91)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs37', 92)" onmouseover="showTip(event, 'fs37', 92)" class="id">fold</span> <span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs38', 93)" onmouseover="showTip(event, 'fs38', 93)" class="id">j</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs39', 94)" onmouseover="showTip(event, 'fs39', 94)" class="id">s</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs40', 95)" onmouseover="showTip(event, 'fs40', 95)" class="id">inputs</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs41', 96)" onmouseover="showTip(event, 'fs41', 96)" class="id">calcInputs</span><span class="pn">)</span> <span class="k">-&gt;</span>
                    <span class="k">if</span> <span onmouseout="hideTip(event, 'fs9', 97)" onmouseover="showTip(event, 'fs9', 97)" class="m">Set</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs42', 98)" onmouseover="showTip(event, 'fs42', 98)" class="id">contains</span> <span onmouseout="hideTip(event, 'fs32', 99)" onmouseover="showTip(event, 'fs32', 99)" class="id">i</span> <span onmouseout="hideTip(event, 'fs40', 100)" onmouseover="showTip(event, 'fs40', 100)" class="id">inputs</span> <span class="o">||</span>
                       <span onmouseout="hideTip(event, 'fs9', 101)" onmouseover="showTip(event, 'fs9', 101)" class="m">Set</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs43', 102)" onmouseover="showTip(event, 'fs43', 102)" class="id">intersect</span> <span onmouseout="hideTip(event, 'fs39', 103)" onmouseover="showTip(event, 'fs39', 103)" class="id">s</span> <span onmouseout="hideTip(event, 'fs41', 104)" onmouseover="showTip(event, 'fs41', 104)" class="id">calcInputs</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs9', 105)" onmouseover="showTip(event, 'fs9', 105)" class="m">Set</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs44', 106)" onmouseover="showTip(event, 'fs44', 106)" class="id">isEmpty</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs45', 107)" onmouseover="showTip(event, 'fs45', 107)" class="fn">not</span> <span class="k">then</span>
                        <span onmouseout="hideTip(event, 'fs38', 108)" onmouseover="showTip(event, 'fs38', 108)" class="id">j</span><span class="o">+</span><span class="n">1</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs9', 109)" onmouseover="showTip(event, 'fs9', 109)" class="m">Set</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs46', 110)" onmouseover="showTip(event, 'fs46', 110)" class="id">add</span> <span onmouseout="hideTip(event, 'fs38', 111)" onmouseover="showTip(event, 'fs38', 111)" class="id">j</span> <span onmouseout="hideTip(event, 'fs39', 112)" onmouseover="showTip(event, 'fs39', 112)" class="id">s</span>
                    <span class="k">else</span>
                        <span onmouseout="hideTip(event, 'fs38', 113)" onmouseover="showTip(event, 'fs38', 113)" class="id">j</span><span class="o">+</span><span class="n">1</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs39', 114)" onmouseover="showTip(event, 'fs39', 114)" class="id">s</span>
                <span class="pn">)</span> <span class="pn">(</span><span class="n">0</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs9', 115)" onmouseover="showTip(event, 'fs9', 115)" class="m">Set</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs47', 116)" onmouseover="showTip(event, 'fs47', 116)" class="id">empty</span><span class="pn">)</span> <span onmouseout="hideTip(event, 'fs28', 117)" onmouseover="showTip(event, 'fs28', 117)" class="id">d</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs8', 118)" onmouseover="showTip(event, 'fs8', 118)" class="id">FunctionInputs</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs48', 119)" onmouseover="showTip(event, 'fs48', 119)" class="fn">snd</span>

            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs49', 120)" onmouseover="showTip(event, 'fs49', 120)" class="id">inputValues</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs18', 121)" onmouseover="showTip(event, 'fs18', 121)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs50', 122)" onmouseover="showTip(event, 'fs50', 122)" class="id">copy</span> <span onmouseout="hideTip(event, 'fs28', 123)" onmouseover="showTip(event, 'fs28', 123)" class="id">d</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs5', 124)" onmouseover="showTip(event, 'fs5', 124)" class="id">InputValues</span>
            <span onmouseout="hideTip(event, 'fs49', 125)" onmouseover="showTip(event, 'fs49', 125)" class="id">inputValues</span><span class="m">.</span><span class="pn">[</span><span onmouseout="hideTip(event, 'fs32', 126)" onmouseover="showTip(event, 'fs32', 126)" class="id">i</span><span class="pn">]</span> <span class="k">&lt;-</span> <span onmouseout="hideTip(event, 'fs29', 127)" onmouseover="showTip(event, 'fs29', 127)" class="fn">box</span> <span onmouseout="hideTip(event, 'fs34', 128)" onmouseover="showTip(event, 'fs34', 128)" class="id">a</span>

            <span class="k">if</span> <span onmouseout="hideTip(event, 'fs9', 129)" onmouseover="showTip(event, 'fs9', 129)" class="m">Set</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs44', 130)" onmouseover="showTip(event, 'fs44', 130)" class="id">isEmpty</span> <span onmouseout="hideTip(event, 'fs35', 131)" onmouseover="showTip(event, 'fs35', 131)" class="id">dirtyCalcs</span> <span class="k">then</span> <span class="pn">{</span> <span onmouseout="hideTip(event, 'fs28', 132)" onmouseover="showTip(event, 'fs28', 132)" class="id">d</span> <span class="k">with</span> <span class="id">InputValues</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs49', 133)" onmouseover="showTip(event, 'fs49', 133)" class="id">inputValues</span> <span class="pn">}</span>
            <span class="k">else</span>
                <span class="k">let</span> <span onmouseout="hideTip(event, 'fs51', 134)" onmouseover="showTip(event, 'fs51', 134)" class="id">functionValues</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs18', 135)" onmouseover="showTip(event, 'fs18', 135)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs50', 136)" onmouseover="showTip(event, 'fs50', 136)" class="id">copy</span> <span onmouseout="hideTip(event, 'fs28', 137)" onmouseover="showTip(event, 'fs28', 137)" class="id">d</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs12', 138)" onmouseover="showTip(event, 'fs12', 138)" class="id">FunctionValues</span>
                <span class="k">let</span> <span onmouseout="hideTip(event, 'fs52', 139)" onmouseover="showTip(event, 'fs52', 139)" class="id">dag</span> <span class="o">=</span> <span class="pn">{</span>
                    <span onmouseout="hideTip(event, 'fs28', 140)" onmouseover="showTip(event, 'fs28', 140)" class="id">d</span> <span class="k">with</span>
                        <span class="id">InputValues</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs49', 141)" onmouseover="showTip(event, 'fs49', 141)" class="id">inputValues</span>
                        <span class="id">FunctionValues</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs51', 142)" onmouseover="showTip(event, 'fs51', 142)" class="id">functionValues</span>
                <span class="pn">}</span>
                <span onmouseout="hideTip(event, 'fs9', 143)" onmouseover="showTip(event, 'fs9', 143)" class="m">Set</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs53', 144)" onmouseover="showTip(event, 'fs53', 144)" class="id">iter</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs32', 145)" onmouseover="showTip(event, 'fs32', 145)" class="id">i</span> <span class="k">-&gt;</span>
                    <span onmouseout="hideTip(event, 'fs51', 146)" onmouseover="showTip(event, 'fs51', 146)" class="id">functionValues</span><span class="m">.</span><span class="pn">[</span><span onmouseout="hideTip(event, 'fs32', 147)" onmouseover="showTip(event, 'fs32', 147)" class="id">i</span><span class="pn">]</span> <span class="k">&lt;-</span> <span class="k">lazy</span> <span onmouseout="hideTip(event, 'fs28', 148)" onmouseover="showTip(event, 'fs28', 148)" class="id">d</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs11', 149)" onmouseover="showTip(event, 'fs11', 149)" class="id">FunctionFunctions</span><span class="m">.</span><span class="pn">[</span><span onmouseout="hideTip(event, 'fs32', 150)" onmouseover="showTip(event, 'fs32', 150)" class="id">i</span><span class="pn">]</span> <span onmouseout="hideTip(event, 'fs52', 151)" onmouseover="showTip(event, 'fs52', 151)" class="id">dag</span>
                <span class="pn">)</span> <span onmouseout="hideTip(event, 'fs35', 152)" onmouseover="showTip(event, 'fs35', 152)" class="id">dirtyCalcs</span>
                <span onmouseout="hideTip(event, 'fs52', 153)" onmouseover="showTip(event, 'fs52', 153)" class="id">dag</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs54', 154)" onmouseover="showTip(event, 'fs54', 154)" class="fn">getValueTask</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs25', 155)" onmouseover="showTip(event, 'fs25', 155)" class="uc">Cell</span> <span onmouseout="hideTip(event, 'fs32', 156)" onmouseover="showTip(event, 'fs32', 156)" class="id">i</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs25', 157)" onmouseover="showTip(event, 'fs25', 157)" class="rt">Cell</span><span class="pn">&lt;</span><span class="ta">&#39;</span><span class="id">a</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs23', 158)" onmouseover="showTip(event, 'fs23', 158)" class="rt">Function</span><span class="pn">&gt;</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs28', 159)" onmouseover="showTip(event, 'fs28', 159)" class="id">d</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs4', 160)" onmouseover="showTip(event, 'fs4', 160)" class="rt">Dag</span><span class="pn">)</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs55', 161)" onmouseover="showTip(event, 'fs55', 161)" class="d">Task</span><span class="pn">&lt;</span><span class="ta">&#39;</span><span class="id">a</span><span class="pn">&gt;</span> <span class="o">=</span>
        <span class="k">downcast</span> <span onmouseout="hideTip(event, 'fs28', 162)" onmouseover="showTip(event, 'fs28', 162)" class="id">d</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs12', 163)" onmouseover="showTip(event, 'fs12', 163)" class="id">FunctionValues</span><span class="m">.</span><span class="pn">[</span><span onmouseout="hideTip(event, 'fs32', 164)" onmouseover="showTip(event, 'fs32', 164)" class="id">i</span><span class="pn">]</span><span class="pn">.</span><span class="id">Value</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs56', 165)" onmouseover="showTip(event, 'fs56', 165)" class="fn">changed</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs25', 166)" onmouseover="showTip(event, 'fs25', 166)" class="uc">Cell</span> <span onmouseout="hideTip(event, 'fs32', 167)" onmouseover="showTip(event, 'fs32', 167)" class="id">i</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs25', 168)" onmouseover="showTip(event, 'fs25', 168)" class="rt">Cell</span><span class="pn">&lt;</span><span class="ta">&#39;</span><span class="id">a</span><span class="pn">,</span><span class="ta">&#39;</span><span class="id">t</span><span class="pn">&gt;</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs57', 169)" onmouseover="showTip(event, 'fs57', 169)" class="id">before</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs4', 170)" onmouseover="showTip(event, 'fs4', 170)" class="rt">Dag</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs58', 171)" onmouseover="showTip(event, 'fs58', 171)" class="id">after</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs4', 172)" onmouseover="showTip(event, 'fs4', 172)" class="rt">Dag</span><span class="pn">)</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs59', 173)" onmouseover="showTip(event, 'fs59', 173)" class="vt">bool</span> <span class="o">=</span>
        <span class="k">if</span> <span onmouseout="hideTip(event, 'fs60', 174)" onmouseover="showTip(event, 'fs60', 174)" class="k">typeof</span><span class="pn">&lt;</span><span class="ta">&#39;</span><span class="id">t</span><span class="pn">&gt;</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs60', 175)" onmouseover="showTip(event, 'fs60', 175)" class="k">typeof</span><span class="pn">&lt;</span><span onmouseout="hideTip(event, 'fs23', 176)" onmouseover="showTip(event, 'fs23', 176)" class="rt">Function</span><span class="pn">&gt;</span> <span class="k">then</span>
            <span onmouseout="hideTip(event, 'fs57', 177)" onmouseover="showTip(event, 'fs57', 177)" class="id">before</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs12', 178)" onmouseover="showTip(event, 'fs12', 178)" class="id">FunctionValues</span><span class="m">.</span><span class="pn">[</span><span onmouseout="hideTip(event, 'fs32', 179)" onmouseover="showTip(event, 'fs32', 179)" class="id">i</span><span class="pn">]</span> <span class="o">&lt;&gt;</span> <span onmouseout="hideTip(event, 'fs58', 180)" onmouseover="showTip(event, 'fs58', 180)" class="id">after</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs12', 181)" onmouseover="showTip(event, 'fs12', 181)" class="id">FunctionValues</span><span class="m">.</span><span class="pn">[</span><span onmouseout="hideTip(event, 'fs32', 182)" onmouseover="showTip(event, 'fs32', 182)" class="id">i</span><span class="pn">]</span>
        <span class="k">else</span>
            <span class="k">downcast</span> <span onmouseout="hideTip(event, 'fs57', 183)" onmouseover="showTip(event, 'fs57', 183)" class="id">before</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs5', 184)" onmouseover="showTip(event, 'fs5', 184)" class="id">InputValues</span><span class="m">.</span><span class="pn">[</span><span onmouseout="hideTip(event, 'fs32', 185)" onmouseover="showTip(event, 'fs32', 185)" class="id">i</span><span class="pn">]</span> <span class="o">&lt;&gt;</span> <span class="k">downcast</span> <span onmouseout="hideTip(event, 'fs58', 186)" onmouseover="showTip(event, 'fs58', 186)" class="id">after</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs5', 187)" onmouseover="showTip(event, 'fs5', 187)" class="id">InputValues</span><span class="m">.</span><span class="pn">[</span><span onmouseout="hideTip(event, 'fs32', 188)" onmouseover="showTip(event, 'fs32', 188)" class="id">i</span><span class="pn">]</span>

    <span class="k">type</span> <span class="ta">&#39;</span><span class="id">a</span> <span onmouseout="hideTip(event, 'fs61', 189)" onmouseover="showTip(event, 'fs61', 189)" class="rt">Builder</span> <span class="o">=</span> <span class="k">private</span> <span class="pn">{</span>
        <span onmouseout="hideTip(event, 'fs62', 190)" onmouseover="showTip(event, 'fs62', 190)" class="id">Dag</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs4', 191)" onmouseover="showTip(event, 'fs4', 191)" class="rt">Dag</span>
        <span onmouseout="hideTip(event, 'fs63', 192)" onmouseover="showTip(event, 'fs63', 192)" class="id">Inputs</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs9', 193)" onmouseover="showTip(event, 'fs9', 193)" class="rt">Set</span><span class="pn">&lt;</span><span onmouseout="hideTip(event, 'fs10', 194)" onmouseover="showTip(event, 'fs10', 194)" class="vt">int</span><span class="pn">&gt;</span> <span class="pn">*</span> <span onmouseout="hideTip(event, 'fs9', 195)" onmouseover="showTip(event, 'fs9', 195)" class="rt">Set</span><span class="pn">&lt;</span><span onmouseout="hideTip(event, 'fs10', 196)" onmouseover="showTip(event, 'fs10', 196)" class="vt">int</span><span class="pn">&gt;</span>
        <span onmouseout="hideTip(event, 'fs64', 197)" onmouseover="showTip(event, 'fs64', 197)" class="fn">Function</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs4', 198)" onmouseover="showTip(event, 'fs4', 198)" class="rt">Dag</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs55', 199)" onmouseover="showTip(event, 'fs55', 199)" class="d">Task</span><span class="pn">&lt;</span><span class="ta">&#39;</span><span class="id">a</span><span class="pn">&gt;</span>
    <span class="pn">}</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs65', 200)" onmouseover="showTip(event, 'fs65', 200)" class="fn">buildFunction</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs28', 201)" onmouseover="showTip(event, 'fs28', 201)" class="id">d</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs4', 202)" onmouseover="showTip(event, 'fs4', 202)" class="rt">Dag</span><span class="pn">)</span> <span onmouseout="hideTip(event, 'fs66', 203)" onmouseover="showTip(event, 'fs66', 203)" class="id">f</span> <span class="o">=</span> <span class="pn">{</span>
        <span onmouseout="hideTip(event, 'fs4', 204)" onmouseover="showTip(event, 'fs4', 204)" class="id">Dag</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs28', 205)" onmouseover="showTip(event, 'fs28', 205)" class="id">d</span>
        <span class="id">Inputs</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs9', 206)" onmouseover="showTip(event, 'fs9', 206)" class="m">Set</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs47', 207)" onmouseover="showTip(event, 'fs47', 207)" class="id">empty</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs9', 208)" onmouseover="showTip(event, 'fs9', 208)" class="m">Set</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs47', 209)" onmouseover="showTip(event, 'fs47', 209)" class="id">empty</span>
        <span onmouseout="hideTip(event, 'fs23', 210)" onmouseover="showTip(event, 'fs23', 210)" class="fn">Function</span> <span class="o">=</span> <span class="k">fun</span> <span class="id">_</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs55', 211)" onmouseover="showTip(event, 'fs55', 211)" class="d">Task</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs67', 212)" onmouseover="showTip(event, 'fs67', 212)" class="id">FromResult</span> <span onmouseout="hideTip(event, 'fs66', 213)" onmouseover="showTip(event, 'fs66', 213)" class="id">f</span>
    <span class="pn">}</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs68', 214)" onmouseover="showTip(event, 'fs68', 214)" class="fn">applyCell</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs25', 215)" onmouseover="showTip(event, 'fs25', 215)" class="uc">Cell</span> <span onmouseout="hideTip(event, 'fs32', 216)" onmouseover="showTip(event, 'fs32', 216)" class="id">i</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs25', 217)" onmouseover="showTip(event, 'fs25', 217)" class="rt">Cell</span><span class="pn">&lt;</span><span class="ta">&#39;</span><span class="id">a</span><span class="pn">,</span><span class="ta">&#39;</span><span class="id">t</span><span class="pn">&gt;</span><span class="pn">)</span> <span class="pn">{</span><span onmouseout="hideTip(event, 'fs4', 218)" onmouseover="showTip(event, 'fs4', 218)" class="id">Dag</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs52', 219)" onmouseover="showTip(event, 'fs52', 219)" class="id">dag</span><span class="pn">;</span><span class="id">Inputs</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs69', 220)" onmouseover="showTip(event, 'fs69', 220)" class="id">inI</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs70', 221)" onmouseover="showTip(event, 'fs70', 221)" class="id">inC</span><span class="pn">;</span><span onmouseout="hideTip(event, 'fs23', 222)" onmouseover="showTip(event, 'fs23', 222)" class="fn">Function</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs71', 223)" onmouseover="showTip(event, 'fs71', 223)" class="fn">bFn</span><span class="pn">}</span> <span class="o">=</span>

        <span class="k">let</span> <span class="k">inline</span> <span onmouseout="hideTip(event, 'fs72', 224)" onmouseover="showTip(event, 'fs72', 224)" class="fn">taskMap</span> <span onmouseout="hideTip(event, 'fs73', 225)" onmouseover="showTip(event, 'fs73', 225)" class="fn">f</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs74', 226)" onmouseover="showTip(event, 'fs74', 226)" class="id">t</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs55', 227)" onmouseover="showTip(event, 'fs55', 227)" class="d">Task</span><span class="pn">&lt;</span><span class="id">_</span><span class="pn">&gt;</span><span class="pn">)</span> <span class="o">=</span>
            <span onmouseout="hideTip(event, 'fs74', 228)" onmouseover="showTip(event, 'fs74', 228)" class="fn">t</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs75', 229)" onmouseover="showTip(event, 'fs75', 229)" class="id">ContinueWith</span><span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs76', 230)" onmouseover="showTip(event, 'fs76', 230)" class="id">r</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs55', 231)" onmouseover="showTip(event, 'fs55', 231)" class="d">Task</span><span class="pn">&lt;</span><span class="id">_</span><span class="pn">&gt;</span><span class="pn">)</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs73', 232)" onmouseover="showTip(event, 'fs73', 232)" class="fn">f</span> <span onmouseout="hideTip(event, 'fs76', 233)" onmouseover="showTip(event, 'fs76', 233)" class="id">r</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs77', 234)" onmouseover="showTip(event, 'fs77', 234)" class="id">Result</span><span class="pn">)</span>

        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs78', 235)" onmouseover="showTip(event, 'fs78', 235)" class="id">isFunctionCell</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs60', 236)" onmouseover="showTip(event, 'fs60', 236)" class="k">typeof</span><span class="pn">&lt;</span><span class="ta">&#39;</span><span class="id">t</span><span class="pn">&gt;</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs60', 237)" onmouseover="showTip(event, 'fs60', 237)" class="k">typeof</span><span class="pn">&lt;</span><span onmouseout="hideTip(event, 'fs23', 238)" onmouseover="showTip(event, 'fs23', 238)" class="rt">Function</span><span class="pn">&gt;</span>
        <span class="pn">{</span>
            <span onmouseout="hideTip(event, 'fs4', 239)" onmouseover="showTip(event, 'fs4', 239)" class="id">Dag</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs52', 240)" onmouseover="showTip(event, 'fs52', 240)" class="id">dag</span>
            <span class="id">Inputs</span> <span class="o">=</span>
                <span class="k">if</span> <span onmouseout="hideTip(event, 'fs78', 241)" onmouseover="showTip(event, 'fs78', 241)" class="id">isFunctionCell</span> <span class="k">then</span> <span onmouseout="hideTip(event, 'fs69', 242)" onmouseover="showTip(event, 'fs69', 242)" class="id">inI</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs9', 243)" onmouseover="showTip(event, 'fs9', 243)" class="m">Set</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs46', 244)" onmouseover="showTip(event, 'fs46', 244)" class="id">add</span> <span onmouseout="hideTip(event, 'fs32', 245)" onmouseover="showTip(event, 'fs32', 245)" class="id">i</span> <span onmouseout="hideTip(event, 'fs70', 246)" onmouseover="showTip(event, 'fs70', 246)" class="id">inC</span>
                                  <span class="k">else</span> <span onmouseout="hideTip(event, 'fs9', 247)" onmouseover="showTip(event, 'fs9', 247)" class="m">Set</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs46', 248)" onmouseover="showTip(event, 'fs46', 248)" class="id">add</span> <span onmouseout="hideTip(event, 'fs32', 249)" onmouseover="showTip(event, 'fs32', 249)" class="id">i</span> <span onmouseout="hideTip(event, 'fs69', 250)" onmouseover="showTip(event, 'fs69', 250)" class="id">inI</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs70', 251)" onmouseover="showTip(event, 'fs70', 251)" class="id">inC</span>
            <span onmouseout="hideTip(event, 'fs23', 252)" onmouseover="showTip(event, 'fs23', 252)" class="fn">Function</span> <span class="o">=</span>
                <span class="k">if</span> <span onmouseout="hideTip(event, 'fs78', 253)" onmouseover="showTip(event, 'fs78', 253)" class="id">isFunctionCell</span> <span class="k">then</span>
                    <span class="k">fun</span> <span onmouseout="hideTip(event, 'fs28', 254)" onmouseover="showTip(event, 'fs28', 254)" class="id">d</span> <span class="k">-&gt;</span>
                        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs79', 255)" onmouseover="showTip(event, 'fs79', 255)" class="id">fTask</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs71', 256)" onmouseover="showTip(event, 'fs71', 256)" class="fn">bFn</span> <span onmouseout="hideTip(event, 'fs28', 257)" onmouseover="showTip(event, 'fs28', 257)" class="id">d</span>
                        <span class="fn">(</span> <span class="k">downcast</span> <span onmouseout="hideTip(event, 'fs28', 258)" onmouseover="showTip(event, 'fs28', 258)" class="id">d</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs12', 259)" onmouseover="showTip(event, 'fs12', 259)" class="id">FunctionValues</span><span class="m">.</span><span class="pn">[</span><span onmouseout="hideTip(event, 'fs32', 260)" onmouseover="showTip(event, 'fs32', 260)" class="id">i</span><span class="pn">]</span><span class="pn">.</span><span class="id">Value</span>
                          <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs72', 261)" onmouseover="showTip(event, 'fs72', 261)" class="fn">taskMap</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs80', 262)" onmouseover="showTip(event, 'fs80', 262)" class="id">a</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs72', 263)" onmouseover="showTip(event, 'fs72', 263)" class="fn">taskMap</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs81', 264)" onmouseover="showTip(event, 'fs81', 264)" class="fn">f</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs81', 265)" onmouseover="showTip(event, 'fs81', 265)" class="fn">f</span> <span onmouseout="hideTip(event, 'fs80', 266)" onmouseover="showTip(event, 'fs80', 266)" class="id">a</span><span class="pn">)</span> <span onmouseout="hideTip(event, 'fs79', 267)" onmouseover="showTip(event, 'fs79', 267)" class="id">fTask</span><span class="pn">)</span>
                        <span class="pn">)</span><span class="pn">.</span><span class="id">Unwrap</span><span class="pn">(</span><span class="pn">)</span>
                <span class="k">else</span>
                    <span class="k">fun</span> <span onmouseout="hideTip(event, 'fs28', 268)" onmouseover="showTip(event, 'fs28', 268)" class="id">d</span> <span class="k">-&gt;</span>
                        <span onmouseout="hideTip(event, 'fs71', 269)" onmouseover="showTip(event, 'fs71', 269)" class="fn">bFn</span> <span onmouseout="hideTip(event, 'fs28', 270)" onmouseover="showTip(event, 'fs28', 270)" class="id">d</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs72', 271)" onmouseover="showTip(event, 'fs72', 271)" class="fn">taskMap</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs81', 272)" onmouseover="showTip(event, 'fs81', 272)" class="fn">f</span> <span class="k">-&gt;</span>
                            <span class="k">downcast</span> <span onmouseout="hideTip(event, 'fs28', 273)" onmouseover="showTip(event, 'fs28', 273)" class="id">d</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs5', 274)" onmouseover="showTip(event, 'fs5', 274)" class="id">InputValues</span><span class="m">.</span><span class="pn">[</span><span onmouseout="hideTip(event, 'fs32', 275)" onmouseover="showTip(event, 'fs32', 275)" class="id">i</span><span class="pn">]</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs81', 276)" onmouseover="showTip(event, 'fs81', 276)" class="fn">f</span>  <span class="pn">)</span>
        <span class="pn">}</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs82', 277)" onmouseover="showTip(event, 'fs82', 277)" class="fn">addFunction</span> <span class="pn">(</span><span class="pn">{</span><span onmouseout="hideTip(event, 'fs4', 278)" onmouseover="showTip(event, 'fs4', 278)" class="id">Dag</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs52', 279)" onmouseover="showTip(event, 'fs52', 279)" class="id">dag</span><span class="pn">;</span><span class="id">Inputs</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs83', 280)" onmouseover="showTip(event, 'fs83', 280)" class="id">ips</span><span class="pn">;</span><span onmouseout="hideTip(event, 'fs23', 281)" onmouseover="showTip(event, 'fs23', 281)" class="fn">Function</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs84', 282)" onmouseover="showTip(event, 'fs84', 282)" class="fn">fn</span><span class="pn">}</span><span class="pn">:</span><span class="ta">&#39;</span><span class="id">a</span> <span onmouseout="hideTip(event, 'fs61', 283)" onmouseover="showTip(event, 'fs61', 283)" class="rt">Builder</span><span class="pn">)</span> <span class="o">=</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs85', 284)" onmouseover="showTip(event, 'fs85', 284)" class="fn">calc</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs84', 285)" onmouseover="showTip(event, 'fs84', 285)" class="fn">fn</span> <span class="o">&gt;</span><span class="pn">&gt;</span> <span onmouseout="hideTip(event, 'fs29', 286)" onmouseover="showTip(event, 'fs29', 286)" class="fn">box</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs28', 287)" onmouseover="showTip(event, 'fs28', 287)" class="id">d</span> <span class="o">=</span> <span class="pn">{</span>
            <span onmouseout="hideTip(event, 'fs52', 288)" onmouseover="showTip(event, 'fs52', 288)" class="id">dag</span> <span class="k">with</span>
                <span class="id">FunctionInputs</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs14', 289)" onmouseover="showTip(event, 'fs14', 289)" class="fn">append</span> <span onmouseout="hideTip(event, 'fs52', 290)" onmouseover="showTip(event, 'fs52', 290)" class="id">dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs8', 291)" onmouseover="showTip(event, 'fs8', 291)" class="id">FunctionInputs</span> <span onmouseout="hideTip(event, 'fs83', 292)" onmouseover="showTip(event, 'fs83', 292)" class="id">ips</span>
                <span class="id">FunctionFunctions</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs14', 293)" onmouseover="showTip(event, 'fs14', 293)" class="fn">append</span> <span onmouseout="hideTip(event, 'fs52', 294)" onmouseover="showTip(event, 'fs52', 294)" class="id">dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs11', 295)" onmouseover="showTip(event, 'fs11', 295)" class="id">FunctionFunctions</span> <span onmouseout="hideTip(event, 'fs85', 296)" onmouseover="showTip(event, 'fs85', 296)" class="fn">calc</span>
                <span class="id">FunctionValues</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs14', 297)" onmouseover="showTip(event, 'fs14', 297)" class="fn">append</span> <span onmouseout="hideTip(event, 'fs52', 298)" onmouseover="showTip(event, 'fs52', 298)" class="id">dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs12', 299)" onmouseover="showTip(event, 'fs12', 299)" class="id">FunctionValues</span> <span class="k">null</span>
        <span class="pn">}</span>
        <span onmouseout="hideTip(event, 'fs28', 300)" onmouseover="showTip(event, 'fs28', 300)" class="id">d</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs12', 301)" onmouseover="showTip(event, 'fs12', 301)" class="id">FunctionValues</span><span class="m">.</span><span class="pn">[</span><span onmouseout="hideTip(event, 'fs28', 302)" onmouseover="showTip(event, 'fs28', 302)" class="id">d</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs12', 303)" onmouseover="showTip(event, 'fs12', 303)" class="id">FunctionValues</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs30', 304)" onmouseover="showTip(event, 'fs30', 304)" class="id">Length</span><span class="o">-</span><span class="n">1</span><span class="pn">]</span> <span class="k">&lt;-</span> <span class="k">lazy</span> <span onmouseout="hideTip(event, 'fs85', 305)" onmouseover="showTip(event, 'fs85', 305)" class="fn">calc</span> <span onmouseout="hideTip(event, 'fs28', 306)" onmouseover="showTip(event, 'fs28', 306)" class="id">d</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs86', 307)" onmouseover="showTip(event, 'fs86', 307)" class="id">cell</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs25', 308)" onmouseover="showTip(event, 'fs25', 308)" class="rt">Cell</span><span class="pn">&lt;</span><span class="ta">&#39;</span><span class="id">a</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs23', 309)" onmouseover="showTip(event, 'fs23', 309)" class="rt">Function</span><span class="pn">&gt;</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs25', 310)" onmouseover="showTip(event, 'fs25', 310)" class="uc">Cell</span> <span onmouseout="hideTip(event, 'fs52', 311)" onmouseover="showTip(event, 'fs52', 311)" class="id">dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs12', 312)" onmouseover="showTip(event, 'fs12', 312)" class="id">FunctionValues</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs30', 313)" onmouseover="showTip(event, 'fs30', 313)" class="id">Length</span>
        <span onmouseout="hideTip(event, 'fs28', 314)" onmouseover="showTip(event, 'fs28', 314)" class="id">d</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs86', 315)" onmouseover="showTip(event, 'fs86', 315)" class="id">cell</span>
</code></pre>
<h2><a name="Testing" class="anchor" href="#Testing">Testing</a></h2>
<p>The following tests demonstrate use of the DAG.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span class="id">tests</span> <span class="o">=</span>
    <span class="id">testList</span> <span class="s">&quot;dag tests&quot;</span> <span class="pn">[</span>

        <span class="id">testAsync</span> <span class="s">&quot;one cell&quot;</span> <span class="pn">{</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 317)" onmouseover="showTip(event, 'fs88', 317)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 318)" onmouseover="showTip(event, 'fs27', 318)" class="id">addInput</span> <span class="n">7</span> <span onmouseout="hideTip(event, 'fs88', 319)" onmouseover="showTip(event, 'fs88', 319)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs26', 320)" onmouseover="showTip(event, 'fs26', 320)" class="id">empty</span>
            <span class="id">Expect</span><span class="pn">.</span><span class="id">equal</span> <span class="n">7</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs88', 321)" onmouseover="showTip(event, 'fs88', 321)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs31', 322)" onmouseover="showTip(event, 'fs31', 322)" class="id">getValue</span> <span class="id">cell1</span> <span class="id">dag</span><span class="pn">)</span> <span class="s">&quot;one cell&quot;</span>
        <span class="pn">}</span>

        <span class="id">testAsync</span> <span class="s">&quot;two cell&quot;</span> <span class="pn">{</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 323)" onmouseover="showTip(event, 'fs88', 323)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 324)" onmouseover="showTip(event, 'fs27', 324)" class="id">addInput</span> <span class="n">8</span> <span onmouseout="hideTip(event, 'fs88', 325)" onmouseover="showTip(event, 'fs88', 325)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs26', 326)" onmouseover="showTip(event, 'fs26', 326)" class="id">empty</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell2</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 327)" onmouseover="showTip(event, 'fs88', 327)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 328)" onmouseover="showTip(event, 'fs27', 328)" class="id">addInput</span> <span class="n">9</span> <span class="id">dag</span>
            <span class="id">Expect</span><span class="pn">.</span><span class="id">equal</span> <span class="n">8</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs88', 329)" onmouseover="showTip(event, 'fs88', 329)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs31', 330)" onmouseover="showTip(event, 'fs31', 330)" class="id">getValue</span> <span class="id">cell1</span> <span class="id">dag</span><span class="pn">)</span> <span class="s">&quot;first 8&quot;</span>
            <span class="id">Expect</span><span class="pn">.</span><span class="id">equal</span> <span class="n">9</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs88', 331)" onmouseover="showTip(event, 'fs88', 331)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs31', 332)" onmouseover="showTip(event, 'fs31', 332)" class="id">getValue</span> <span class="id">cell2</span> <span class="id">dag</span><span class="pn">)</span> <span class="s">&quot;second 9&quot;</span>
        <span class="pn">}</span>

        <span class="id">testAsync</span> <span class="s">&quot;one function&quot;</span> <span class="pn">{</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 333)" onmouseover="showTip(event, 'fs88', 333)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 334)" onmouseover="showTip(event, 'fs27', 334)" class="id">addInput</span> <span class="n">42</span> <span onmouseout="hideTip(event, 'fs88', 335)" onmouseover="showTip(event, 'fs88', 335)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs26', 336)" onmouseover="showTip(event, 'fs26', 336)" class="id">empty</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell2</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs88', 337)" onmouseover="showTip(event, 'fs88', 337)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs65', 338)" onmouseover="showTip(event, 'fs65', 338)" class="id">buildFunction</span> <span class="id">dag</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">x</span> <span class="k">-&gt;</span> <span class="id">x</span> <span class="pn">*</span> <span class="n">10</span><span class="pn">)</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 339)" onmouseover="showTip(event, 'fs88', 339)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 340)" onmouseover="showTip(event, 'fs68', 340)" class="id">applyCell</span> <span class="id">cell1</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 341)" onmouseover="showTip(event, 'fs88', 341)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs82', 342)" onmouseover="showTip(event, 'fs82', 342)" class="id">addFunction</span>
            <span class="k">let!</span> <span class="id">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 343)" onmouseover="showTip(event, 'fs88', 343)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 344)" onmouseover="showTip(event, 'fs54', 344)" class="id">getValueTask</span> <span class="id">cell2</span> <span class="id">dag</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs89', 345)" onmouseover="showTip(event, 'fs89', 345)" class="id">Async</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs90', 346)" onmouseover="showTip(event, 'fs90', 346)" class="id">AwaitTask</span>
            <span class="id">Expect</span><span class="pn">.</span><span class="id">equal</span> <span class="n">420</span> <span class="id">result</span> <span class="s">&quot;42 * 10 = 420&quot;</span>
        <span class="pn">}</span>

        <span class="id">testAsync</span> <span class="s">&quot;one function with set&quot;</span> <span class="pn">{</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 347)" onmouseover="showTip(event, 'fs88', 347)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 348)" onmouseover="showTip(event, 'fs27', 348)" class="id">addInput</span> <span class="n">13</span> <span onmouseout="hideTip(event, 'fs88', 349)" onmouseover="showTip(event, 'fs88', 349)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs26', 350)" onmouseover="showTip(event, 'fs26', 350)" class="id">empty</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell2</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs88', 351)" onmouseover="showTip(event, 'fs88', 351)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs65', 352)" onmouseover="showTip(event, 'fs65', 352)" class="id">buildFunction</span> <span class="id">dag</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">x</span> <span class="k">-&gt;</span> <span class="id">x</span> <span class="pn">*</span> <span class="n">10</span><span class="pn">)</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 353)" onmouseover="showTip(event, 'fs88', 353)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 354)" onmouseover="showTip(event, 'fs68', 354)" class="id">applyCell</span> <span class="id">cell1</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 355)" onmouseover="showTip(event, 'fs88', 355)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs82', 356)" onmouseover="showTip(event, 'fs82', 356)" class="id">addFunction</span>
            <span class="k">let</span> <span class="id">dag</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 357)" onmouseover="showTip(event, 'fs88', 357)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs33', 358)" onmouseover="showTip(event, 'fs33', 358)" class="id">setInput</span> <span class="id">cell1</span> <span class="n">43</span> <span class="id">dag</span>
            <span class="k">let!</span> <span class="id">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 359)" onmouseover="showTip(event, 'fs88', 359)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 360)" onmouseover="showTip(event, 'fs54', 360)" class="id">getValueTask</span> <span class="id">cell2</span> <span class="id">dag</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs89', 361)" onmouseover="showTip(event, 'fs89', 361)" class="id">Async</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs90', 362)" onmouseover="showTip(event, 'fs90', 362)" class="id">AwaitTask</span>
            <span class="id">Expect</span><span class="pn">.</span><span class="id">equal</span> <span class="n">430</span> <span class="id">result</span> <span class="s">&quot;43 * 10 = 430&quot;</span>
        <span class="pn">}</span>

        <span class="id">testAsync</span> <span class="s">&quot;one function with set twice&quot;</span> <span class="pn">{</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 363)" onmouseover="showTip(event, 'fs88', 363)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 364)" onmouseover="showTip(event, 'fs27', 364)" class="id">addInput</span> <span class="n">15</span> <span onmouseout="hideTip(event, 'fs88', 365)" onmouseover="showTip(event, 'fs88', 365)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs26', 366)" onmouseover="showTip(event, 'fs26', 366)" class="id">empty</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell2</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs88', 367)" onmouseover="showTip(event, 'fs88', 367)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs65', 368)" onmouseover="showTip(event, 'fs65', 368)" class="id">buildFunction</span> <span class="id">dag</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">x</span> <span class="k">-&gt;</span> <span class="id">x</span> <span class="pn">*</span> <span class="n">10</span><span class="pn">)</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 369)" onmouseover="showTip(event, 'fs88', 369)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 370)" onmouseover="showTip(event, 'fs68', 370)" class="id">applyCell</span> <span class="id">cell1</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 371)" onmouseover="showTip(event, 'fs88', 371)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs82', 372)" onmouseover="showTip(event, 'fs82', 372)" class="id">addFunction</span>
            <span class="k">let</span> <span class="id">dag</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 373)" onmouseover="showTip(event, 'fs88', 373)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs33', 374)" onmouseover="showTip(event, 'fs33', 374)" class="id">setInput</span> <span class="id">cell1</span> <span class="n">43</span> <span class="id">dag</span>
            <span class="k">let</span> <span class="id">dag</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 375)" onmouseover="showTip(event, 'fs88', 375)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs33', 376)" onmouseover="showTip(event, 'fs33', 376)" class="id">setInput</span> <span class="id">cell1</span> <span class="n">44</span> <span class="id">dag</span>
            <span class="k">let!</span> <span class="id">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 377)" onmouseover="showTip(event, 'fs88', 377)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 378)" onmouseover="showTip(event, 'fs54', 378)" class="id">getValueTask</span> <span class="id">cell2</span> <span class="id">dag</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs89', 379)" onmouseover="showTip(event, 'fs89', 379)" class="id">Async</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs90', 380)" onmouseover="showTip(event, 'fs90', 380)" class="id">AwaitTask</span>
            <span class="id">Expect</span><span class="pn">.</span><span class="id">equal</span> <span class="n">440</span> <span class="id">result</span> <span class="s">&quot;44 * 10 = 440&quot;</span>
        <span class="pn">}</span>

        <span class="id">testAsync</span> <span class="s">&quot;not changed input&quot;</span> <span class="pn">{</span>
            <span class="k">let</span> <span class="id">dagBefore</span><span class="pn">,</span> <span class="id">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 381)" onmouseover="showTip(event, 'fs88', 381)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 382)" onmouseover="showTip(event, 'fs27', 382)" class="id">addInput</span> <span class="n">42</span> <span onmouseout="hideTip(event, 'fs88', 383)" onmouseover="showTip(event, 'fs88', 383)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs26', 384)" onmouseover="showTip(event, 'fs26', 384)" class="id">empty</span>
            <span class="k">let</span> <span class="id">dagAfter</span><span class="pn">,</span><span class="id">_</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 385)" onmouseover="showTip(event, 'fs88', 385)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 386)" onmouseover="showTip(event, 'fs27', 386)" class="id">addInput</span> <span class="n">45</span> <span class="id">dagBefore</span>
            <span class="id">Expect</span><span class="pn">.</span><span class="id">isFalse</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs88', 387)" onmouseover="showTip(event, 'fs88', 387)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs56', 388)" onmouseover="showTip(event, 'fs56', 388)" class="id">changed</span> <span class="id">cell1</span> <span class="id">dagBefore</span> <span class="id">dagAfter</span><span class="pn">)</span> <span class="s">&quot;no change&quot;</span>
        <span class="pn">}</span>

        <span class="id">testAsync</span> <span class="s">&quot;changed input&quot;</span> <span class="pn">{</span>
            <span class="k">let</span> <span class="id">dagBefore</span><span class="pn">,</span> <span class="id">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 389)" onmouseover="showTip(event, 'fs88', 389)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 390)" onmouseover="showTip(event, 'fs27', 390)" class="id">addInput</span> <span class="n">42</span> <span onmouseout="hideTip(event, 'fs88', 391)" onmouseover="showTip(event, 'fs88', 391)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs26', 392)" onmouseover="showTip(event, 'fs26', 392)" class="id">empty</span>
            <span class="k">let</span> <span class="id">dagAfter</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 393)" onmouseover="showTip(event, 'fs88', 393)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs33', 394)" onmouseover="showTip(event, 'fs33', 394)" class="id">setInput</span> <span class="id">cell1</span> <span class="n">45</span> <span class="id">dagBefore</span>
            <span class="id">Expect</span><span class="pn">.</span><span class="id">isTrue</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs88', 395)" onmouseover="showTip(event, 'fs88', 395)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs56', 396)" onmouseover="showTip(event, 'fs56', 396)" class="id">changed</span> <span class="id">cell1</span> <span class="id">dagBefore</span> <span class="id">dagAfter</span><span class="pn">)</span> <span class="s">&quot;changed&quot;</span>
        <span class="pn">}</span>

        <span class="id">testAsync</span> <span class="s">&quot;not changed function&quot;</span> <span class="pn">{</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 397)" onmouseover="showTip(event, 'fs88', 397)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 398)" onmouseover="showTip(event, 'fs27', 398)" class="id">addInput</span> <span class="n">42</span> <span onmouseout="hideTip(event, 'fs88', 399)" onmouseover="showTip(event, 'fs88', 399)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs26', 400)" onmouseover="showTip(event, 'fs26', 400)" class="id">empty</span>
            <span class="k">let</span> <span class="id">dagBefore</span><span class="pn">,</span> <span class="id">cell2</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs88', 401)" onmouseover="showTip(event, 'fs88', 401)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs65', 402)" onmouseover="showTip(event, 'fs65', 402)" class="id">buildFunction</span> <span class="id">dag</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">x</span> <span class="k">-&gt;</span> <span class="id">x</span> <span class="pn">*</span> <span class="n">10</span><span class="pn">)</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 403)" onmouseover="showTip(event, 'fs88', 403)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 404)" onmouseover="showTip(event, 'fs68', 404)" class="id">applyCell</span> <span class="id">cell1</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 405)" onmouseover="showTip(event, 'fs88', 405)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs82', 406)" onmouseover="showTip(event, 'fs82', 406)" class="id">addFunction</span>
            <span class="k">let</span> <span class="id">dagAfter</span><span class="pn">,</span><span class="id">_</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 407)" onmouseover="showTip(event, 'fs88', 407)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 408)" onmouseover="showTip(event, 'fs27', 408)" class="id">addInput</span> <span class="n">45</span> <span class="id">dagBefore</span>
            <span class="id">Expect</span><span class="pn">.</span><span class="id">isFalse</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs88', 409)" onmouseover="showTip(event, 'fs88', 409)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs56', 410)" onmouseover="showTip(event, 'fs56', 410)" class="id">changed</span> <span class="id">cell2</span> <span class="id">dagBefore</span> <span class="id">dagAfter</span><span class="pn">)</span> <span class="s">&quot;no change&quot;</span>
        <span class="pn">}</span>

        <span class="id">testAsync</span> <span class="s">&quot;changed function&quot;</span> <span class="pn">{</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 411)" onmouseover="showTip(event, 'fs88', 411)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 412)" onmouseover="showTip(event, 'fs27', 412)" class="id">addInput</span> <span class="n">17</span> <span onmouseout="hideTip(event, 'fs88', 413)" onmouseover="showTip(event, 'fs88', 413)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs26', 414)" onmouseover="showTip(event, 'fs26', 414)" class="id">empty</span>
            <span class="k">let</span> <span class="id">dagBefore</span><span class="pn">,</span> <span class="id">cell2</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs88', 415)" onmouseover="showTip(event, 'fs88', 415)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs65', 416)" onmouseover="showTip(event, 'fs65', 416)" class="id">buildFunction</span> <span class="id">dag</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">x</span> <span class="k">-&gt;</span> <span class="id">x</span> <span class="pn">*</span> <span class="n">10</span><span class="pn">)</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 417)" onmouseover="showTip(event, 'fs88', 417)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 418)" onmouseover="showTip(event, 'fs68', 418)" class="id">applyCell</span> <span class="id">cell1</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 419)" onmouseover="showTip(event, 'fs88', 419)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs82', 420)" onmouseover="showTip(event, 'fs82', 420)" class="id">addFunction</span>
            <span class="k">let</span> <span class="id">dagAfter</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 421)" onmouseover="showTip(event, 'fs88', 421)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs33', 422)" onmouseover="showTip(event, 'fs33', 422)" class="id">setInput</span> <span class="id">cell1</span> <span class="n">45</span> <span class="id">dagBefore</span>
            <span class="id">Expect</span><span class="pn">.</span><span class="id">isTrue</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs88', 423)" onmouseover="showTip(event, 'fs88', 423)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs56', 424)" onmouseover="showTip(event, 'fs56', 424)" class="id">changed</span> <span class="id">cell2</span> <span class="id">dagBefore</span> <span class="id">dagAfter</span><span class="pn">)</span> <span class="s">&quot;changed&quot;</span>
            <span class="k">let!</span> <span class="id">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 425)" onmouseover="showTip(event, 'fs88', 425)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 426)" onmouseover="showTip(event, 'fs54', 426)" class="id">getValueTask</span> <span class="id">cell2</span> <span class="id">dagAfter</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs89', 427)" onmouseover="showTip(event, 'fs89', 427)" class="id">Async</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs90', 428)" onmouseover="showTip(event, 'fs90', 428)" class="id">AwaitTask</span>
            <span class="id">Expect</span><span class="pn">.</span><span class="id">equal</span> <span class="n">450</span> <span class="id">result</span> <span class="s">&quot;45 * 10 = 450&quot;</span>
            <span class="k">let!</span> <span class="id">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 429)" onmouseover="showTip(event, 'fs88', 429)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 430)" onmouseover="showTip(event, 'fs54', 430)" class="id">getValueTask</span> <span class="id">cell2</span> <span class="id">dagBefore</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs89', 431)" onmouseover="showTip(event, 'fs89', 431)" class="id">Async</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs90', 432)" onmouseover="showTip(event, 'fs90', 432)" class="id">AwaitTask</span>
            <span class="id">Expect</span><span class="pn">.</span><span class="id">equal</span> <span class="n">170</span> <span class="id">result</span> <span class="s">&quot;17 * 10 = 170&quot;</span>
        <span class="pn">}</span>

        <span class="id">testAsync</span> <span class="s">&quot;chained functions&quot;</span> <span class="pn">{</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 433)" onmouseover="showTip(event, 'fs88', 433)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 434)" onmouseover="showTip(event, 'fs27', 434)" class="id">addInput</span> <span class="n">18</span> <span onmouseout="hideTip(event, 'fs88', 435)" onmouseover="showTip(event, 'fs88', 435)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs26', 436)" onmouseover="showTip(event, 'fs26', 436)" class="id">empty</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell2</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs88', 437)" onmouseover="showTip(event, 'fs88', 437)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs65', 438)" onmouseover="showTip(event, 'fs65', 438)" class="id">buildFunction</span> <span class="id">dag</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">x</span> <span class="k">-&gt;</span> <span class="id">x</span> <span class="pn">*</span> <span class="n">10</span><span class="pn">)</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 439)" onmouseover="showTip(event, 'fs88', 439)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 440)" onmouseover="showTip(event, 'fs68', 440)" class="id">applyCell</span> <span class="id">cell1</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 441)" onmouseover="showTip(event, 'fs88', 441)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs82', 442)" onmouseover="showTip(event, 'fs82', 442)" class="id">addFunction</span>
            <span class="k">let</span> <span class="id">dagBefore</span><span class="pn">,</span> <span class="id">cell3</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs88', 443)" onmouseover="showTip(event, 'fs88', 443)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs65', 444)" onmouseover="showTip(event, 'fs65', 444)" class="id">buildFunction</span> <span class="id">dag</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">x</span> <span class="k">-&gt;</span> <span class="id">x</span> <span class="o">+</span> <span class="n">1</span><span class="pn">)</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 445)" onmouseover="showTip(event, 'fs88', 445)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 446)" onmouseover="showTip(event, 'fs68', 446)" class="id">applyCell</span> <span class="id">cell2</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 447)" onmouseover="showTip(event, 'fs88', 447)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs82', 448)" onmouseover="showTip(event, 'fs82', 448)" class="id">addFunction</span>
            <span class="k">let</span> <span class="id">dagAfter</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 449)" onmouseover="showTip(event, 'fs88', 449)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs33', 450)" onmouseover="showTip(event, 'fs33', 450)" class="id">setInput</span> <span class="id">cell1</span> <span class="n">23</span> <span class="id">dagBefore</span>
            <span class="k">let!</span> <span class="id">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 451)" onmouseover="showTip(event, 'fs88', 451)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 452)" onmouseover="showTip(event, 'fs54', 452)" class="id">getValueTask</span> <span class="id">cell3</span> <span class="id">dagAfter</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs89', 453)" onmouseover="showTip(event, 'fs89', 453)" class="id">Async</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs90', 454)" onmouseover="showTip(event, 'fs90', 454)" class="id">AwaitTask</span>
            <span class="id">Expect</span><span class="pn">.</span><span class="id">equal</span> <span class="n">231</span> <span class="id">result</span> <span class="s">&quot;231&quot;</span>
            <span class="k">let!</span> <span class="id">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 455)" onmouseover="showTip(event, 'fs88', 455)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 456)" onmouseover="showTip(event, 'fs54', 456)" class="id">getValueTask</span> <span class="id">cell3</span> <span class="id">dagBefore</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs89', 457)" onmouseover="showTip(event, 'fs89', 457)" class="id">Async</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs90', 458)" onmouseover="showTip(event, 'fs90', 458)" class="id">AwaitTask</span>
            <span class="id">Expect</span><span class="pn">.</span><span class="id">equal</span> <span class="n">181</span> <span class="id">result</span> <span class="s">&quot;181&quot;</span>
        <span class="pn">}</span>

        <span class="id">testAsync</span> <span class="s">&quot;two function&quot;</span> <span class="pn">{</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 459)" onmouseover="showTip(event, 'fs88', 459)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 460)" onmouseover="showTip(event, 'fs27', 460)" class="id">addInput</span> <span class="s">&quot;z&quot;</span> <span onmouseout="hideTip(event, 'fs88', 461)" onmouseover="showTip(event, 'fs88', 461)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs26', 462)" onmouseover="showTip(event, 'fs26', 462)" class="id">empty</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell2</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 463)" onmouseover="showTip(event, 'fs88', 463)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 464)" onmouseover="showTip(event, 'fs27', 464)" class="id">addInput</span> <span class="n">7</span> <span class="id">dag</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell3</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs88', 465)" onmouseover="showTip(event, 'fs88', 465)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs65', 466)" onmouseover="showTip(event, 'fs65', 466)" class="id">buildFunction</span> <span class="id">dag</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">s</span> <span class="pn">(</span><span class="id">n</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs10', 467)" onmouseover="showTip(event, 'fs10', 467)" class="id">int</span><span class="pn">)</span> <span class="k">-&gt;</span> <span class="id">s</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs91', 468)" onmouseover="showTip(event, 'fs91', 468)" class="id">string</span> <span class="id">n</span><span class="pn">)</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 469)" onmouseover="showTip(event, 'fs88', 469)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 470)" onmouseover="showTip(event, 'fs68', 470)" class="id">applyCell</span> <span class="id">cell1</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 471)" onmouseover="showTip(event, 'fs88', 471)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 472)" onmouseover="showTip(event, 'fs68', 472)" class="id">applyCell</span> <span class="id">cell2</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 473)" onmouseover="showTip(event, 'fs88', 473)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs82', 474)" onmouseover="showTip(event, 'fs82', 474)" class="id">addFunction</span>
            <span class="k">let!</span> <span class="id">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 475)" onmouseover="showTip(event, 'fs88', 475)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 476)" onmouseover="showTip(event, 'fs54', 476)" class="id">getValueTask</span> <span class="id">cell3</span> <span class="id">dag</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs89', 477)" onmouseover="showTip(event, 'fs89', 477)" class="id">Async</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs90', 478)" onmouseover="showTip(event, 'fs90', 478)" class="id">AwaitTask</span>
            <span class="id">Expect</span><span class="pn">.</span><span class="id">equal</span> <span class="s">&quot;z7&quot;</span> <span class="id">result</span> <span class="s">&quot;z7&quot;</span>
        <span class="pn">}</span>

        <span class="id">testAsync</span> <span class="s">&quot;three function with set&quot;</span> <span class="pn">{</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 479)" onmouseover="showTip(event, 'fs88', 479)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 480)" onmouseover="showTip(event, 'fs27', 480)" class="id">addInput</span> <span class="s">&quot;f&quot;</span> <span onmouseout="hideTip(event, 'fs88', 481)" onmouseover="showTip(event, 'fs88', 481)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs26', 482)" onmouseover="showTip(event, 'fs26', 482)" class="id">empty</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell2</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 483)" onmouseover="showTip(event, 'fs88', 483)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 484)" onmouseover="showTip(event, 'fs27', 484)" class="id">addInput</span> <span class="n">8</span> <span class="id">dag</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell3</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 485)" onmouseover="showTip(event, 'fs88', 485)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 486)" onmouseover="showTip(event, 'fs27', 486)" class="id">addInput</span> <span class="n">1.5</span> <span class="id">dag</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell4</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs88', 487)" onmouseover="showTip(event, 'fs88', 487)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs65', 488)" onmouseover="showTip(event, 'fs65', 488)" class="id">buildFunction</span> <span class="id">dag</span>
                    <span class="pn">(</span><span class="k">fun</span> <span class="id">s</span> <span class="pn">(</span><span class="id">n</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs10', 489)" onmouseover="showTip(event, 'fs10', 489)" class="id">int</span><span class="pn">)</span> <span class="pn">(</span><span class="id">f</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs92', 490)" onmouseover="showTip(event, 'fs92', 490)" class="id">float</span><span class="pn">)</span> <span class="k">-&gt;</span> <span class="id">s</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs91', 491)" onmouseover="showTip(event, 'fs91', 491)" class="id">string</span> <span class="id">n</span> <span class="o">+</span> <span class="s">&quot;-&quot;</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs91', 492)" onmouseover="showTip(event, 'fs91', 492)" class="id">string</span> <span class="id">f</span><span class="pn">)</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 493)" onmouseover="showTip(event, 'fs88', 493)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 494)" onmouseover="showTip(event, 'fs68', 494)" class="id">applyCell</span> <span class="id">cell1</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 495)" onmouseover="showTip(event, 'fs88', 495)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 496)" onmouseover="showTip(event, 'fs68', 496)" class="id">applyCell</span> <span class="id">cell2</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 497)" onmouseover="showTip(event, 'fs88', 497)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 498)" onmouseover="showTip(event, 'fs68', 498)" class="id">applyCell</span> <span class="id">cell3</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 499)" onmouseover="showTip(event, 'fs88', 499)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs82', 500)" onmouseover="showTip(event, 'fs82', 500)" class="id">addFunction</span>
            <span class="k">let!</span> <span class="id">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 501)" onmouseover="showTip(event, 'fs88', 501)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 502)" onmouseover="showTip(event, 'fs54', 502)" class="id">getValueTask</span> <span class="id">cell4</span> <span class="id">dag</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs89', 503)" onmouseover="showTip(event, 'fs89', 503)" class="id">Async</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs90', 504)" onmouseover="showTip(event, 'fs90', 504)" class="id">AwaitTask</span>
            <span class="id">Expect</span><span class="pn">.</span><span class="id">equal</span> <span class="s">&quot;f8-1.5&quot;</span> <span class="id">result</span> <span class="s">&quot;f8-1.5&quot;</span>
            <span class="k">let</span> <span class="id">dag</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 505)" onmouseover="showTip(event, 'fs88', 505)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs33', 506)" onmouseover="showTip(event, 'fs33', 506)" class="id">setInput</span> <span class="id">cell1</span> <span class="s">&quot;w&quot;</span> <span class="id">dag</span>
            <span class="k">let!</span> <span class="id">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 507)" onmouseover="showTip(event, 'fs88', 507)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 508)" onmouseover="showTip(event, 'fs54', 508)" class="id">getValueTask</span> <span class="id">cell4</span> <span class="id">dag</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs89', 509)" onmouseover="showTip(event, 'fs89', 509)" class="id">Async</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs90', 510)" onmouseover="showTip(event, 'fs90', 510)" class="id">AwaitTask</span>
            <span class="id">Expect</span><span class="pn">.</span><span class="id">equal</span> <span class="s">&quot;w8-1.5&quot;</span> <span class="id">result</span> <span class="s">&quot;w8-1.5&quot;</span>
        <span class="pn">}</span>
        
        <span class="id">testAsync</span> <span class="s">&quot;chained functions multi&quot;</span> <span class="pn">{</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 511)" onmouseover="showTip(event, 'fs88', 511)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 512)" onmouseover="showTip(event, 'fs27', 512)" class="id">addInput</span> <span class="s">&quot;a&quot;</span> <span onmouseout="hideTip(event, 'fs88', 513)" onmouseover="showTip(event, 'fs88', 513)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs26', 514)" onmouseover="showTip(event, 'fs26', 514)" class="id">empty</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell2</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 515)" onmouseover="showTip(event, 'fs88', 515)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 516)" onmouseover="showTip(event, 'fs27', 516)" class="id">addInput</span> <span class="n">1</span> <span class="id">dag</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell3</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs88', 517)" onmouseover="showTip(event, 'fs88', 517)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs65', 518)" onmouseover="showTip(event, 'fs65', 518)" class="id">buildFunction</span> <span class="id">dag</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">s</span> <span class="pn">(</span><span class="id">n</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs10', 519)" onmouseover="showTip(event, 'fs10', 519)" class="id">int</span><span class="pn">)</span> <span class="k">-&gt;</span> <span class="s">&quot;x:&quot;</span> <span class="o">+</span> <span class="id">s</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs91', 520)" onmouseover="showTip(event, 'fs91', 520)" class="id">string</span> <span class="id">n</span><span class="pn">)</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 521)" onmouseover="showTip(event, 'fs88', 521)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 522)" onmouseover="showTip(event, 'fs68', 522)" class="id">applyCell</span> <span class="id">cell1</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 523)" onmouseover="showTip(event, 'fs88', 523)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 524)" onmouseover="showTip(event, 'fs68', 524)" class="id">applyCell</span> <span class="id">cell2</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 525)" onmouseover="showTip(event, 'fs88', 525)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs82', 526)" onmouseover="showTip(event, 'fs82', 526)" class="id">addFunction</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell4</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 527)" onmouseover="showTip(event, 'fs88', 527)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 528)" onmouseover="showTip(event, 'fs27', 528)" class="id">addInput</span> <span class="s">&quot;b&quot;</span> <span class="id">dag</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell5</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 529)" onmouseover="showTip(event, 'fs88', 529)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 530)" onmouseover="showTip(event, 'fs27', 530)" class="id">addInput</span> <span class="n">2</span> <span class="id">dag</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell6</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs88', 531)" onmouseover="showTip(event, 'fs88', 531)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs65', 532)" onmouseover="showTip(event, 'fs65', 532)" class="id">buildFunction</span> <span class="id">dag</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">s</span> <span class="pn">(</span><span class="id">n</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs10', 533)" onmouseover="showTip(event, 'fs10', 533)" class="id">int</span><span class="pn">)</span> <span class="k">-&gt;</span> <span class="s">&quot;y:&quot;</span> <span class="o">+</span> <span class="id">s</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs91', 534)" onmouseover="showTip(event, 'fs91', 534)" class="id">string</span> <span class="id">n</span><span class="pn">)</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 535)" onmouseover="showTip(event, 'fs88', 535)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 536)" onmouseover="showTip(event, 'fs68', 536)" class="id">applyCell</span> <span class="id">cell4</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 537)" onmouseover="showTip(event, 'fs88', 537)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 538)" onmouseover="showTip(event, 'fs68', 538)" class="id">applyCell</span> <span class="id">cell5</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 539)" onmouseover="showTip(event, 'fs88', 539)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs82', 540)" onmouseover="showTip(event, 'fs82', 540)" class="id">addFunction</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell7</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 541)" onmouseover="showTip(event, 'fs88', 541)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 542)" onmouseover="showTip(event, 'fs27', 542)" class="id">addInput</span> <span class="s">&quot;c&quot;</span> <span class="id">dag</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell8</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 543)" onmouseover="showTip(event, 'fs88', 543)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 544)" onmouseover="showTip(event, 'fs27', 544)" class="id">addInput</span> <span class="n">3</span> <span class="id">dag</span>
            <span class="k">let</span> <span class="id">dag</span><span class="pn">,</span> <span class="id">cell9</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs88', 545)" onmouseover="showTip(event, 'fs88', 545)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs65', 546)" onmouseover="showTip(event, 'fs65', 546)" class="id">buildFunction</span> <span class="id">dag</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">s</span> <span class="pn">(</span><span class="id">n</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs10', 547)" onmouseover="showTip(event, 'fs10', 547)" class="id">int</span><span class="pn">)</span> <span class="k">-&gt;</span> <span class="s">&quot;z:&quot;</span> <span class="o">+</span> <span class="id">s</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs91', 548)" onmouseover="showTip(event, 'fs91', 548)" class="id">string</span> <span class="id">n</span><span class="pn">)</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 549)" onmouseover="showTip(event, 'fs88', 549)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 550)" onmouseover="showTip(event, 'fs68', 550)" class="id">applyCell</span> <span class="id">cell7</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 551)" onmouseover="showTip(event, 'fs88', 551)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 552)" onmouseover="showTip(event, 'fs68', 552)" class="id">applyCell</span> <span class="id">cell8</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 553)" onmouseover="showTip(event, 'fs88', 553)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs82', 554)" onmouseover="showTip(event, 'fs82', 554)" class="id">addFunction</span>
            <span class="k">let</span> <span class="id">dagBefore</span><span class="pn">,</span> <span class="id">cell10</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs88', 555)" onmouseover="showTip(event, 'fs88', 555)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs65', 556)" onmouseover="showTip(event, 'fs65', 556)" class="id">buildFunction</span> <span class="id">dag</span>
                    <span class="pn">(</span><span class="k">fun</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">s3</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs93', 557)" onmouseover="showTip(event, 'fs93', 557)" class="id">String</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs94', 558)" onmouseover="showTip(event, 'fs94', 558)" class="id">concat</span> <span class="s">&quot;|&quot;</span> <span class="pn">[</span><span class="id">s1</span><span class="pn">;</span><span class="id">s2</span><span class="pn">;</span><span class="id">s3</span><span class="pn">]</span><span class="pn">)</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 559)" onmouseover="showTip(event, 'fs88', 559)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 560)" onmouseover="showTip(event, 'fs68', 560)" class="id">applyCell</span> <span class="id">cell3</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 561)" onmouseover="showTip(event, 'fs88', 561)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 562)" onmouseover="showTip(event, 'fs68', 562)" class="id">applyCell</span> <span class="id">cell6</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 563)" onmouseover="showTip(event, 'fs88', 563)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 564)" onmouseover="showTip(event, 'fs68', 564)" class="id">applyCell</span> <span class="id">cell9</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs88', 565)" onmouseover="showTip(event, 'fs88', 565)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs82', 566)" onmouseover="showTip(event, 'fs82', 566)" class="id">addFunction</span>
            <span class="k">let</span> <span class="id">dagAfter</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 567)" onmouseover="showTip(event, 'fs88', 567)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs33', 568)" onmouseover="showTip(event, 'fs33', 568)" class="id">setInput</span> <span class="id">cell5</span> <span class="n">4</span> <span class="id">dagBefore</span>
            <span class="k">let!</span> <span class="id">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 569)" onmouseover="showTip(event, 'fs88', 569)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 570)" onmouseover="showTip(event, 'fs54', 570)" class="id">getValueTask</span> <span class="id">cell10</span> <span class="id">dagAfter</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs89', 571)" onmouseover="showTip(event, 'fs89', 571)" class="id">Async</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs90', 572)" onmouseover="showTip(event, 'fs90', 572)" class="id">AwaitTask</span>
            <span class="id">Expect</span><span class="pn">.</span><span class="id">equal</span> <span class="s">&quot;x:a1|y:b4|z:c3&quot;</span> <span class="id">result</span> <span class="s">&quot;x:a1|y:b4|z:c3&quot;</span>
            <span class="k">let!</span> <span class="id">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 573)" onmouseover="showTip(event, 'fs88', 573)" class="id">Dag</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 574)" onmouseover="showTip(event, 'fs54', 574)" class="id">getValueTask</span> <span class="id">cell10</span> <span class="id">dagBefore</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs89', 575)" onmouseover="showTip(event, 'fs89', 575)" class="id">Async</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs90', 576)" onmouseover="showTip(event, 'fs90', 576)" class="id">AwaitTask</span>
            <span class="id">Expect</span><span class="pn">.</span><span class="id">equal</span> <span class="s">&quot;x:a1|y:b2|z:c3&quot;</span> <span class="id">result</span> <span class="s">&quot;x:a1|y:b2|z:c3&quot;</span>
        <span class="pn">}</span>
    <span class="pn">]</span>
</code></pre>
<h2><a name="Conclusion" class="anchor" href="#Conclusion">Conclusion</a></h2>
<p>This has been a very successful experiment.
The DAG has some nice features while keeping type safety.</p>
<p>The way immutability has been implemented means it is probably not best suited to fast realtime updates or very fine-grained calculations.
For more coarse-grained calculations like grids of dependent fields, where each cell represents a column of values and summaries, it could be ideal.</p>


<div class="tip" id="fs1">namespace System</div>
<div class="tip" id="fs2">namespace System.Threading</div>
<div class="tip" id="fs3">namespace System.Threading.Tasks</div>
<div class="tip" id="fs4">type Dag =<br />&#160;&#160;private {InputValues: obj array;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FunctionInputs: (Set&lt;int&gt; * Set&lt;int&gt;) array;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FunctionFunctions: (Dag -&gt; obj) array;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FunctionValues: Lazy&lt;obj&gt; array;}</div>
<div class="tip" id="fs5">Dag.InputValues: obj array</div>
<div class="tip" id="fs6">type obj = Object</div>
<div class="tip" id="fs7">type &#39;T array = &#39;T []</div>
<div class="tip" id="fs8">Dag.FunctionInputs: (Set&lt;int&gt; * Set&lt;int&gt;) array</div>
<div class="tip" id="fs9">Multiple items<br />module Set<br /><br />from Microsoft.FSharp.Collections<br /><br />--------------------<br />type Set&lt;&#39;T (requires comparison)&gt; =<br />&#160;&#160;interface IReadOnlyCollection&lt;&#39;T&gt;<br />&#160;&#160;interface IComparable<br />&#160;&#160;interface IEnumerable<br />&#160;&#160;interface IEnumerable&lt;&#39;T&gt;<br />&#160;&#160;interface ICollection&lt;&#39;T&gt;<br />&#160;&#160;new : elements:seq&lt;&#39;T&gt; -&gt; Set&lt;&#39;T&gt;<br />&#160;&#160;member Add : value:&#39;T -&gt; Set&lt;&#39;T&gt;<br />&#160;&#160;member Contains : value:&#39;T -&gt; bool<br />&#160;&#160;override Equals : obj -&gt; bool<br />&#160;&#160;member IsProperSubsetOf : otherSet:Set&lt;&#39;T&gt; -&gt; bool<br />&#160;&#160;...<br /><br />--------------------<br />new : elements:seq&lt;&#39;T&gt; -&gt; Set&lt;&#39;T&gt;</div>
<div class="tip" id="fs10">Multiple items<br />val int : value:&#39;T -&gt; int (requires member op_Explicit)<br /><br />--------------------<br />type int = int32<br /><br />--------------------<br />type int&lt;&#39;Measure&gt; = int</div>
<div class="tip" id="fs11">Dag.FunctionFunctions: (Dag -&gt; obj) array</div>
<div class="tip" id="fs12">Dag.FunctionValues: Lazy&lt;obj&gt; array</div>
<div class="tip" id="fs13">Multiple items<br />active recognizer Lazy: Lazy&lt;&#39;T&gt; -&gt; &#39;T<br /><br />--------------------<br />type Lazy&lt;&#39;T&gt; =<br />&#160;&#160;new : unit -&gt; Lazy&lt;&#39;T&gt; + 5 overloads<br />&#160;&#160;member IsValueCreated : bool<br />&#160;&#160;member ToString : unit -&gt; string<br />&#160;&#160;member Value : &#39;T<br /><br />--------------------<br />type Lazy&lt;&#39;T,&#39;TMetadata&gt; =<br />&#160;&#160;inherit Lazy&lt;&#39;T&gt;<br />&#160;&#160;new : metadata:&#39;TMetadata -&gt; Lazy&lt;&#39;T, &#39;TMetadata&gt; + 5 overloads<br />&#160;&#160;member Metadata : &#39;TMetadata<br /><br />--------------------<br />Lazy() : Lazy&lt;&#39;T&gt;<br />Lazy(valueFactory: Func&lt;&#39;T&gt;) : Lazy&lt;&#39;T&gt;<br />Lazy(isThreadSafe: bool) : Lazy&lt;&#39;T&gt;<br />Lazy(mode: Threading.LazyThreadSafetyMode) : Lazy&lt;&#39;T&gt;<br />Lazy(valueFactory: Func&lt;&#39;T&gt;, isThreadSafe: bool) : Lazy&lt;&#39;T&gt;<br />Lazy(valueFactory: Func&lt;&#39;T&gt;, mode: Threading.LazyThreadSafetyMode) : Lazy&lt;&#39;T&gt;<br /><br />--------------------<br />Lazy(metadata: &#39;TMetadata) : Lazy&lt;&#39;T,&#39;TMetadata&gt;<br />Lazy(valueFactory: Func&lt;&#39;T&gt;, metadata: &#39;TMetadata) : Lazy&lt;&#39;T,&#39;TMetadata&gt;<br />Lazy(metadata: &#39;TMetadata, isThreadSafe: bool) : Lazy&lt;&#39;T,&#39;TMetadata&gt;<br />Lazy(metadata: &#39;TMetadata, mode: Threading.LazyThreadSafetyMode) : Lazy&lt;&#39;T,&#39;TMetadata&gt;<br />Lazy(valueFactory: Func&lt;&#39;T&gt;, metadata: &#39;TMetadata, isThreadSafe: bool) : Lazy&lt;&#39;T,&#39;TMetadata&gt;<br />Lazy(valueFactory: Func&lt;&#39;T&gt;, metadata: &#39;TMetadata, mode: Threading.LazyThreadSafetyMode) : Lazy&lt;&#39;T,&#39;TMetadata&gt;</div>
<div class="tip" id="fs14">val private append : a:&#39;a [] -&gt; v:&#39;a -&gt; &#39;a []</div>
<div class="tip" id="fs15">val a : &#39;a []</div>
<div class="tip" id="fs16">val v : &#39;a</div>
<div class="tip" id="fs17">val mutable a : &#39;a []</div>
<div class="tip" id="fs18">type Array =<br />&#160;&#160;member Clone : unit -&gt; obj<br />&#160;&#160;member CopyTo : array:Array * index:int -&gt; unit + 1 overload<br />&#160;&#160;member GetEnumerator : unit -&gt; IEnumerator<br />&#160;&#160;member GetLength : dimension:int -&gt; int<br />&#160;&#160;member GetLongLength : dimension:int -&gt; int64<br />&#160;&#160;member GetLowerBound : dimension:int -&gt; int<br />&#160;&#160;member GetUpperBound : dimension:int -&gt; int<br />&#160;&#160;member GetValue : [&lt;ParamArray&gt;] indices:int[] -&gt; obj + 7 overloads<br />&#160;&#160;member Initialize : unit -&gt; unit<br />&#160;&#160;member IsFixedSize : bool<br />&#160;&#160;...</div>
<div class="tip" id="fs19">Array.Resize&lt;&#39;T&gt;(array: byref&lt;&#39;T []&gt;, newSize: int) : unit</div>
<div class="tip" id="fs20">val length : array:&#39;T [] -&gt; int</div>
<div class="tip" id="fs21">type Input = private | CellInput</div>
<div class="tip" id="fs22">union case Dag.Input.CellInput: Dag.Input</div>
<div class="tip" id="fs23">type Function = private | CellFunction</div>
<div class="tip" id="fs24">union case Dag.Function.CellFunction: Dag.Function</div>
<div class="tip" id="fs25">Multiple items<br />union case Dag.Cell.Cell: int -&gt; Dag.Cell&lt;&#39;a,&#39;b&gt;<br /><br />--------------------<br />type Cell&lt;&#39;a,&#39;b&gt; = private | Cell of int</div>
<div class="tip" id="fs26">val empty : Dag</div>
<div class="tip" id="fs27">val addInput : v:&#39;a -&gt; d:Dag -&gt; Dag * Dag.Cell&lt;&#39;a,Dag.Input&gt;</div>
<div class="tip" id="fs28">val d : Dag</div>
<div class="tip" id="fs29">val box : value:&#39;T -&gt; obj</div>
<div class="tip" id="fs30">property Array.Length: int</div>
<div class="tip" id="fs31">val getValue : Dag.Cell&lt;&#39;a,Dag.Input&gt; -&gt; d:Dag -&gt; &#39;a</div>
<div class="tip" id="fs32">val i : int</div>
<div class="tip" id="fs33">val setInput : Dag.Cell&lt;&#39;a,Dag.Input&gt; -&gt; a:&#39;a -&gt; d:Dag -&gt; Dag (requires equality)</div>
<div class="tip" id="fs34">val a : &#39;a (requires equality)</div>
<div class="tip" id="fs35">val dirtyCalcs : Set&lt;int&gt;</div>
<div class="tip" id="fs36">module Seq<br /><br />from Microsoft.FSharp.Collections</div>
<div class="tip" id="fs37">val fold : folder:(&#39;State -&gt; &#39;T -&gt; &#39;State) -&gt; state:&#39;State -&gt; source:seq&lt;&#39;T&gt; -&gt; &#39;State</div>
<div class="tip" id="fs38">val j : int</div>
<div class="tip" id="fs39">val s : Set&lt;int&gt;</div>
<div class="tip" id="fs40">val inputs : Set&lt;int&gt;</div>
<div class="tip" id="fs41">val calcInputs : Set&lt;int&gt;</div>
<div class="tip" id="fs42">val contains : element:&#39;T -&gt; set:Set&lt;&#39;T&gt; -&gt; bool (requires comparison)</div>
<div class="tip" id="fs43">val intersect : set1:Set&lt;&#39;T&gt; -&gt; set2:Set&lt;&#39;T&gt; -&gt; Set&lt;&#39;T&gt; (requires comparison)</div>
<div class="tip" id="fs44">val isEmpty : set:Set&lt;&#39;T&gt; -&gt; bool (requires comparison)</div>
<div class="tip" id="fs45">val not : value:bool -&gt; bool</div>
<div class="tip" id="fs46">val add : value:&#39;T -&gt; set:Set&lt;&#39;T&gt; -&gt; Set&lt;&#39;T&gt; (requires comparison)</div>
<div class="tip" id="fs47">val empty&lt;&#39;T (requires comparison)&gt; : Set&lt;&#39;T&gt; (requires comparison)</div>
<div class="tip" id="fs48">val snd : tuple:(&#39;T1 * &#39;T2) -&gt; &#39;T2</div>
<div class="tip" id="fs49">val inputValues : obj []</div>
<div class="tip" id="fs50">val copy : array:&#39;T [] -&gt; &#39;T []</div>
<div class="tip" id="fs51">val functionValues : Lazy&lt;obj&gt; []</div>
<div class="tip" id="fs52">val dag : Dag</div>
<div class="tip" id="fs53">val iter : action:(&#39;T -&gt; unit) -&gt; set:Set&lt;&#39;T&gt; -&gt; unit (requires comparison)</div>
<div class="tip" id="fs54">val getValueTask : Dag.Cell&lt;&#39;a,Dag.Function&gt; -&gt; d:Dag -&gt; Task&lt;&#39;a&gt;</div>
<div class="tip" id="fs55">Multiple items<br />type Task =<br />&#160;&#160;new : action:Action -&gt; Task + 7 overloads<br />&#160;&#160;member AsyncState : obj<br />&#160;&#160;member ConfigureAwait : continueOnCapturedContext:bool -&gt; ConfiguredTaskAwaitable<br />&#160;&#160;member ContinueWith : continuationAction:Action&lt;Task&gt; -&gt; Task + 19 overloads<br />&#160;&#160;member CreationOptions : TaskCreationOptions<br />&#160;&#160;member Dispose : unit -&gt; unit<br />&#160;&#160;member Exception : AggregateException<br />&#160;&#160;member GetAwaiter : unit -&gt; TaskAwaiter<br />&#160;&#160;member Id : int<br />&#160;&#160;member IsCanceled : bool<br />&#160;&#160;...<br /><br />--------------------<br />type Task&lt;&#39;TResult&gt; =<br />&#160;&#160;inherit Task<br />&#160;&#160;new : function:Func&lt;&#39;TResult&gt; -&gt; Task&lt;&#39;TResult&gt; + 7 overloads<br />&#160;&#160;member ConfigureAwait : continueOnCapturedContext:bool -&gt; ConfiguredTaskAwaitable&lt;&#39;TResult&gt;<br />&#160;&#160;member ContinueWith : continuationAction:Action&lt;Task&lt;&#39;TResult&gt;&gt; -&gt; Task + 19 overloads<br />&#160;&#160;member GetAwaiter : unit -&gt; TaskAwaiter&lt;&#39;TResult&gt;<br />&#160;&#160;member Result : &#39;TResult<br />&#160;&#160;static member Factory : TaskFactory&lt;&#39;TResult&gt;<br /><br />--------------------<br />Task(action: Action) : Task<br />Task(action: Action, cancellationToken: Threading.CancellationToken) : Task<br />Task(action: Action, creationOptions: TaskCreationOptions) : Task<br />Task(action: Action&lt;obj&gt;, state: obj) : Task<br />Task(action: Action, cancellationToken: Threading.CancellationToken, creationOptions: TaskCreationOptions) : Task<br />Task(action: Action&lt;obj&gt;, state: obj, cancellationToken: Threading.CancellationToken) : Task<br />Task(action: Action&lt;obj&gt;, state: obj, creationOptions: TaskCreationOptions) : Task<br />Task(action: Action&lt;obj&gt;, state: obj, cancellationToken: Threading.CancellationToken, creationOptions: TaskCreationOptions) : Task<br /><br />--------------------<br />Task(function: Func&lt;&#39;TResult&gt;) : Task&lt;&#39;TResult&gt;<br />Task(function: Func&lt;&#39;TResult&gt;, cancellationToken: Threading.CancellationToken) : Task&lt;&#39;TResult&gt;<br />Task(function: Func&lt;&#39;TResult&gt;, creationOptions: TaskCreationOptions) : Task&lt;&#39;TResult&gt;<br />Task(function: Func&lt;obj,&#39;TResult&gt;, state: obj) : Task&lt;&#39;TResult&gt;<br />Task(function: Func&lt;&#39;TResult&gt;, cancellationToken: Threading.CancellationToken, creationOptions: TaskCreationOptions) : Task&lt;&#39;TResult&gt;<br />Task(function: Func&lt;obj,&#39;TResult&gt;, state: obj, cancellationToken: Threading.CancellationToken) : Task&lt;&#39;TResult&gt;<br />Task(function: Func&lt;obj,&#39;TResult&gt;, state: obj, creationOptions: TaskCreationOptions) : Task&lt;&#39;TResult&gt;<br />Task(function: Func&lt;obj,&#39;TResult&gt;, state: obj, cancellationToken: Threading.CancellationToken, creationOptions: TaskCreationOptions) : Task&lt;&#39;TResult&gt;</div>
<div class="tip" id="fs56">val changed : Dag.Cell&lt;&#39;a,&#39;t&gt; -&gt; before:Dag -&gt; after:Dag -&gt; bool</div>
<div class="tip" id="fs57">val before : Dag</div>
<div class="tip" id="fs58">val after : Dag</div>
<div class="tip" id="fs59">type bool = Boolean</div>
<div class="tip" id="fs60">val typeof&lt;&#39;T&gt; : Type</div>
<div class="tip" id="fs61">type &#39;a Builder =<br />&#160;&#160;private {Dag: Dag;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Inputs: Set&lt;int&gt; * Set&lt;int&gt;;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Function: Dag -&gt; Task&lt;&#39;a&gt;;}</div>
<div class="tip" id="fs62">Multiple items<br />Dag.Builder.Dag: Dag<br /><br />--------------------<br />type Dag =<br />&#160;&#160;private {InputValues: obj array;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FunctionInputs: (Set&lt;int&gt; * Set&lt;int&gt;) array;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FunctionFunctions: (Dag -&gt; obj) array;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FunctionValues: Lazy&lt;obj&gt; array;}</div>
<div class="tip" id="fs63">Dag.Builder.Inputs: Set&lt;int&gt; * Set&lt;int&gt;</div>
<div class="tip" id="fs64">Multiple items<br />Dag.Builder.Function: Dag -&gt; Task&lt;&#39;a&gt;<br /><br />--------------------<br />type Function = private | CellFunction</div>
<div class="tip" id="fs65">val buildFunction : d:Dag -&gt; f:&#39;a -&gt; &#39;a Dag.Builder</div>
<div class="tip" id="fs66">val f : &#39;a</div>
<div class="tip" id="fs67">Task.FromResult&lt;&#39;TResult&gt;(result: &#39;TResult) : Task&lt;&#39;TResult&gt;</div>
<div class="tip" id="fs68">val applyCell : Dag.Cell&lt;&#39;a,&#39;t&gt; -&gt; (&#39;a0 -&gt; &#39;b) Dag.Builder -&gt; &#39;b Dag.Builder</div>
<div class="tip" id="fs69">val inI : Set&lt;int&gt;</div>
<div class="tip" id="fs70">val inC : Set&lt;int&gt;</div>
<div class="tip" id="fs71">val bFn : (Dag -&gt; Task&lt;(&#39;a -&gt; &#39;b)&gt;)</div>
<div class="tip" id="fs72">val taskMap : ((&#39;c -&gt; &#39;d) -&gt; Task&lt;&#39;c&gt; -&gt; Task&lt;&#39;d&gt;)</div>
<div class="tip" id="fs73">val f : (&#39;c -&gt; &#39;d)</div>
<div class="tip" id="fs74">val t : Task&lt;&#39;c&gt;</div>
<div class="tip" id="fs75">Task.ContinueWith&lt;&#39;TResult&gt;(continuationFunction: Func&lt;Task,&#39;TResult&gt;) : Task&lt;&#39;TResult&gt;<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Task.ContinueWith(continuationAction: Action&lt;Task&gt;) : Task<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Task.ContinueWith&lt;&#39;TNewResult&gt;(continuationFunction: Func&lt;Task&lt;&#39;c&gt;,&#39;TNewResult&gt;) : Task&lt;&#39;TNewResult&gt;<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Task.ContinueWith(continuationAction: Action&lt;Task&lt;&#39;c&gt;&gt;) : Task<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Task.ContinueWith&lt;&#39;TResult&gt;(continuationFunction: Func&lt;Task,obj,&#39;TResult&gt;, state: obj) : Task&lt;&#39;TResult&gt;<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Task.ContinueWith&lt;&#39;TResult&gt;(continuationFunction: Func&lt;Task,&#39;TResult&gt;, continuationOptions: TaskContinuationOptions) : Task&lt;&#39;TResult&gt;<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Task.ContinueWith&lt;&#39;TResult&gt;(continuationFunction: Func&lt;Task,&#39;TResult&gt;, scheduler: TaskScheduler) : Task&lt;&#39;TResult&gt;<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Task.ContinueWith&lt;&#39;TResult&gt;(continuationFunction: Func&lt;Task,&#39;TResult&gt;, cancellationToken: Threading.CancellationToken) : Task&lt;&#39;TResult&gt;<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Task.ContinueWith(continuationAction: Action&lt;Task,obj&gt;, state: obj) : Task<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Task.ContinueWith(continuationAction: Action&lt;Task&gt;, continuationOptions: TaskContinuationOptions) : Task<br />&#160;&#160;&#160;<em>(+0 other overloads)</em></div>
<div class="tip" id="fs76">val r : Task&lt;&#39;c&gt;</div>
<div class="tip" id="fs77">property Task.Result: &#39;c</div>
<div class="tip" id="fs78">val isFunctionCell : bool</div>
<div class="tip" id="fs79">val fTask : Task&lt;(&#39;a -&gt; &#39;b)&gt;</div>
<div class="tip" id="fs80">val a : &#39;a</div>
<div class="tip" id="fs81">val f : (&#39;a -&gt; &#39;b)</div>
<div class="tip" id="fs82">val addFunction : &#39;a Dag.Builder -&gt; Dag * Dag.Cell&lt;&#39;a,Dag.Function&gt;</div>
<div class="tip" id="fs83">val ips : Set&lt;int&gt; * Set&lt;int&gt;</div>
<div class="tip" id="fs84">val fn : (Dag -&gt; Task&lt;&#39;a&gt;)</div>
<div class="tip" id="fs85">val calc : (Dag -&gt; obj)</div>
<div class="tip" id="fs86">val cell : Dag.Cell&lt;&#39;a,Dag.Function&gt;</div>
<div class="tip" id="fs87">val x : int</div>
<div class="tip" id="fs88">Multiple items<br />module Dag<br /><br />from DagBlog<br /><br />--------------------<br />type Dag =<br />&#160;&#160;private {InputValues: obj array;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FunctionInputs: (Set&lt;int&gt; * Set&lt;int&gt;) array;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FunctionFunctions: (Dag -&gt; obj) array;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FunctionValues: Lazy&lt;obj&gt; array;}</div>
<div class="tip" id="fs89">Multiple items<br />type Async =<br />&#160;&#160;static member AsBeginEnd : computation:(&#39;Arg -&gt; Async&lt;&#39;T&gt;) -&gt; (&#39;Arg * AsyncCallback * obj -&gt; IAsyncResult) * (IAsyncResult -&gt; &#39;T) * (IAsyncResult -&gt; unit)<br />&#160;&#160;static member AwaitEvent : event:IEvent&lt;&#39;Del,&#39;T&gt; * ?cancelAction:(unit -&gt; unit) -&gt; Async&lt;&#39;T&gt; (requires delegate and &#39;Del :&gt; Delegate)<br />&#160;&#160;static member AwaitIAsyncResult : iar:IAsyncResult * ?millisecondsTimeout:int -&gt; Async&lt;bool&gt;<br />&#160;&#160;static member AwaitTask : task:Task -&gt; Async&lt;unit&gt;<br />&#160;&#160;static member AwaitTask : task:Task&lt;&#39;T&gt; -&gt; Async&lt;&#39;T&gt;<br />&#160;&#160;static member AwaitWaitHandle : waitHandle:WaitHandle * ?millisecondsTimeout:int -&gt; Async&lt;bool&gt;<br />&#160;&#160;static member CancelDefaultToken : unit -&gt; unit<br />&#160;&#160;static member Catch : computation:Async&lt;&#39;T&gt; -&gt; Async&lt;Choice&lt;&#39;T,exn&gt;&gt;<br />&#160;&#160;static member Choice : computations:seq&lt;Async&lt;&#39;T option&gt;&gt; -&gt; Async&lt;&#39;T option&gt;<br />&#160;&#160;static member FromBeginEnd : beginAction:(AsyncCallback * obj -&gt; IAsyncResult) * endAction:(IAsyncResult -&gt; &#39;T) * ?cancelAction:(unit -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />&#160;&#160;...<br /><br />--------------------<br />type Async&lt;&#39;T&gt; =</div>
<div class="tip" id="fs90">static member Async.AwaitTask : task:Task -&gt; Async&lt;unit&gt;<br />static member Async.AwaitTask : task:Task&lt;&#39;T&gt; -&gt; Async&lt;&#39;T&gt;</div>
<div class="tip" id="fs91">Multiple items<br />val string : value:&#39;T -&gt; string<br /><br />--------------------<br />type string = String</div>
<div class="tip" id="fs92">Multiple items<br />val float : value:&#39;T -&gt; float (requires member op_Explicit)<br /><br />--------------------<br />type float = Double<br /><br />--------------------<br />type float&lt;&#39;Measure&gt; = float</div>
<div class="tip" id="fs93">Multiple items<br />type String =<br />&#160;&#160;new : value:char -&gt; string + 7 overloads<br />&#160;&#160;member Chars : int -&gt; char<br />&#160;&#160;member Clone : unit -&gt; obj<br />&#160;&#160;member CompareTo : value:obj -&gt; int + 1 overload<br />&#160;&#160;member Contains : value:string -&gt; bool<br />&#160;&#160;member CopyTo : sourceIndex:int * destination:char[] * destinationIndex:int * count:int -&gt; unit<br />&#160;&#160;member EndsWith : value:string -&gt; bool + 2 overloads<br />&#160;&#160;member Equals : obj:obj -&gt; bool + 2 overloads<br />&#160;&#160;member GetEnumerator : unit -&gt; CharEnumerator<br />&#160;&#160;member GetHashCode : unit -&gt; int<br />&#160;&#160;...<br /><br />--------------------<br />String(value: nativeptr&lt;char&gt;) : String<br />String(value: nativeptr&lt;sbyte&gt;) : String<br />String(value: char []) : String<br />String(c: char, count: int) : String<br />String(value: nativeptr&lt;char&gt;, startIndex: int, length: int) : String<br />String(value: nativeptr&lt;sbyte&gt;, startIndex: int, length: int) : String<br />String(value: char [], startIndex: int, length: int) : String<br />String(value: nativeptr&lt;sbyte&gt;, startIndex: int, length: int, enc: Text.Encoding) : String</div>
<div class="tip" id="fs94">val concat : sep:string -&gt; strings:seq&lt;string&gt; -&gt; string</div>
