---
layout: post
title: "DAG - An Immutable Spreadsheet Data Structure"
tags: [dag,immutable,spreadsheet,cell]
description: "DAG - An Immutable Spreadsheet Data Structure"
keywords: f#, dag, immutable, spreadsheet, cell
---
<p>In finance, data grids can be defined as a set of input fields and function fields that take other field values as parameters.
Spreadsheets are often used to do this, but they have several <a href="https://www.cio.com/article/2438188/enterprise-software/eight-of-the-worst-spreadsheet-blunders.html">limitations</a>.</p>
<p>Recently, I've been working on ways of describing calculations, so they can just as easily be viewed in a desktop application, web report or spreadsheet.</p>
<p>One of the components required to do this is a functional calculation graph much like how a spreadsheet works.
This blog aims to construct a functional <a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph">directed acyclic graph (DAG)</a> calculation data structure.</p>
<h2>DAG code</h2>
<p>We don't have to work very hard to ensure the graph is not circular or keep the cells in topological order.
The API can be designed such that it is only possible to add function cells when the parameter cells already exist in the DAG.
All tasks can be performed with a single pass of the cells in the order they were added.</p>
<p>The DAG data structure is made immutable by cloning any internal arrays when they need to be changed.
Grids can keep the old version of the calculations or compare and switch to the new version when needed.</p>
<p>The DAG is fully type safe by use of an applicative functor builder in constructing function cells.</p>
<p>Cells are evaluated as <code>lazy</code> <code>Task</code> so calculations run as parallel as possible.
Calculations are run only once, and results are reused even after further updates to the DAG.</p>
<p>The code can be downloaded <a href="https://github.com/AnthonyLloyd/Dag">here</a>.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">  1: </span>
<span class="l">  2: </span>
<span class="l">  3: </span>
<span class="l">  4: </span>
<span class="l">  5: </span>
<span class="l">  6: </span>
<span class="l">  7: </span>
<span class="l">  8: </span>
<span class="l">  9: </span>
<span class="l"> 10: </span>
<span class="l"> 11: </span>
<span class="l"> 12: </span>
<span class="l"> 13: </span>
<span class="l"> 14: </span>
<span class="l"> 15: </span>
<span class="l"> 16: </span>
<span class="l"> 17: </span>
<span class="l"> 18: </span>
<span class="l"> 19: </span>
<span class="l"> 20: </span>
<span class="l"> 21: </span>
<span class="l"> 22: </span>
<span class="l"> 23: </span>
<span class="l"> 24: </span>
<span class="l"> 25: </span>
<span class="l"> 26: </span>
<span class="l"> 27: </span>
<span class="l"> 28: </span>
<span class="l"> 29: </span>
<span class="l"> 30: </span>
<span class="l"> 31: </span>
<span class="l"> 32: </span>
<span class="l"> 33: </span>
<span class="l"> 34: </span>
<span class="l"> 35: </span>
<span class="l"> 36: </span>
<span class="l"> 37: </span>
<span class="l"> 38: </span>
<span class="l"> 39: </span>
<span class="l"> 40: </span>
<span class="l"> 41: </span>
<span class="l"> 42: </span>
<span class="l"> 43: </span>
<span class="l"> 44: </span>
<span class="l"> 45: </span>
<span class="l"> 46: </span>
<span class="l"> 47: </span>
<span class="l"> 48: </span>
<span class="l"> 49: </span>
<span class="l"> 50: </span>
<span class="l"> 51: </span>
<span class="l"> 52: </span>
<span class="l"> 53: </span>
<span class="l"> 54: </span>
<span class="l"> 55: </span>
<span class="l"> 56: </span>
<span class="l"> 57: </span>
<span class="l"> 58: </span>
<span class="l"> 59: </span>
<span class="l"> 60: </span>
<span class="l"> 61: </span>
<span class="l"> 62: </span>
<span class="l"> 63: </span>
<span class="l"> 64: </span>
<span class="l"> 65: </span>
<span class="l"> 66: </span>
<span class="l"> 67: </span>
<span class="l"> 68: </span>
<span class="l"> 69: </span>
<span class="l"> 70: </span>
<span class="l"> 71: </span>
<span class="l"> 72: </span>
<span class="l"> 73: </span>
<span class="l"> 74: </span>
<span class="l"> 75: </span>
<span class="l"> 76: </span>
<span class="l"> 77: </span>
<span class="l"> 78: </span>
<span class="l"> 79: </span>
<span class="l"> 80: </span>
<span class="l"> 81: </span>
<span class="l"> 82: </span>
<span class="l"> 83: </span>
<span class="l"> 84: </span>
<span class="l"> 85: </span>
<span class="l"> 86: </span>
<span class="l"> 87: </span>
<span class="l"> 88: </span>
<span class="l"> 89: </span>
<span class="l"> 90: </span>
<span class="l"> 91: </span>
<span class="l"> 92: </span>
<span class="l"> 93: </span>
<span class="l"> 94: </span>
<span class="l"> 95: </span>
<span class="l"> 96: </span>
<span class="l"> 97: </span>
<span class="l"> 98: </span>
<span class="l"> 99: </span>
<span class="l">100: </span>
<span class="l">101: </span>
<span class="l">102: </span>
<span class="l">103: </span>
<span class="l">104: </span>
<span class="l">105: </span>
<span class="l">106: </span>
<span class="l">107: </span>
<span class="l">108: </span>
<span class="l">109: </span>
<span class="l">110: </span>
<span class="l">111: </span>
<span class="l">112: </span>
<span class="l">113: </span>
<span class="l">114: </span>
<span class="l">115: </span>
<span class="l">116: </span>
<span class="l">117: </span>
<span class="l">118: </span>
<span class="l">119: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs4', 5)" onmouseover="showTip(event, 'fs4', 5)" class="t">Dag</span> <span class="o">=</span> <span class="k">private</span> {
    <span onmouseout="hideTip(event, 'fs5', 6)" onmouseover="showTip(event, 'fs5', 6)" class="i">InputValues</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs6', 7)" onmouseover="showTip(event, 'fs6', 7)" class="t">obj</span> <span onmouseout="hideTip(event, 'fs7', 8)" onmouseover="showTip(event, 'fs7', 8)" class="t">array</span>
    <span onmouseout="hideTip(event, 'fs8', 9)" onmouseover="showTip(event, 'fs8', 9)" class="i">FunctionInputs</span> <span class="o">:</span> (<span onmouseout="hideTip(event, 'fs9', 10)" onmouseover="showTip(event, 'fs9', 10)" class="t">Set</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs10', 11)" onmouseover="showTip(event, 'fs10', 11)" class="t">int</span><span class="o">&gt;</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs9', 12)" onmouseover="showTip(event, 'fs9', 12)" class="t">Set</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs10', 13)" onmouseover="showTip(event, 'fs10', 13)" class="t">int</span><span class="o">&gt;</span>) <span onmouseout="hideTip(event, 'fs7', 14)" onmouseover="showTip(event, 'fs7', 14)" class="t">array</span>
    <span onmouseout="hideTip(event, 'fs11', 15)" onmouseover="showTip(event, 'fs11', 15)" class="i">FunctionFunctions</span> <span class="o">:</span> (<span onmouseout="hideTip(event, 'fs4', 16)" onmouseover="showTip(event, 'fs4', 16)" class="t">Dag</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs6', 17)" onmouseover="showTip(event, 'fs6', 17)" class="t">obj</span>) <span onmouseout="hideTip(event, 'fs7', 18)" onmouseover="showTip(event, 'fs7', 18)" class="t">array</span> <span class="c">//obj is Task&lt;&#39;a&gt;</span>
    <span onmouseout="hideTip(event, 'fs12', 19)" onmouseover="showTip(event, 'fs12', 19)" class="i">FunctionValues</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs13', 20)" onmouseover="showTip(event, 'fs13', 20)" class="t">Lazy</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs6', 21)" onmouseover="showTip(event, 'fs6', 21)" class="t">obj</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs7', 22)" onmouseover="showTip(event, 'fs7', 22)" class="t">array</span> <span class="c">//obj is Task&lt;&#39;a&gt;</span>
}

<span class="k">module</span> <span onmouseout="hideTip(event, 'fs4', 23)" onmouseover="showTip(event, 'fs4', 23)" class="i">Dag</span> <span class="o">=</span>
    <span class="k">let</span> <span class="k">private</span> <span class="i">append</span> <span class="i">a</span> <span class="i">v</span> <span class="o">=</span>
        <span class="k">let</span> <span class="k">mutable</span> <span class="i">a</span> <span class="o">=</span> <span class="i">a</span>
        <span onmouseout="hideTip(event, 'fs14', 24)" onmouseover="showTip(event, 'fs14', 24)" class="i">Array</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs15', 25)" onmouseover="showTip(event, 'fs15', 25)" class="i">Resize</span>(<span class="o">&amp;</span><span class="i">a</span>, <span onmouseout="hideTip(event, 'fs14', 26)" onmouseover="showTip(event, 'fs14', 26)" class="i">Array</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs16', 27)" onmouseover="showTip(event, 'fs16', 27)" class="i">length</span> <span class="i">a</span> <span class="o">+</span> <span class="n">1</span>)
        <span class="i">a</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs14', 28)" onmouseover="showTip(event, 'fs14', 28)" class="i">Array</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs16', 29)" onmouseover="showTip(event, 'fs16', 29)" class="i">length</span> <span class="i">a</span> <span class="o">-</span> <span class="n">1</span>] <span class="o">&lt;-</span> <span class="i">v</span>
        <span class="i">a</span>

    <span class="k">type</span> <span class="i">Input</span> <span class="o">=</span> <span class="k">private</span> | <span class="i">CellInput</span>
    <span class="k">type</span> <span class="i">Function</span> <span class="o">=</span> <span class="k">private</span> | <span class="i">CellFunction</span>

    <span class="k">type</span> <span class="i">Cell</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">a</span>,<span class="o">&#39;</span><span class="i">b</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">private</span> | <span class="i">Cell</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs10', 30)" onmouseover="showTip(event, 'fs10', 30)" class="i">int</span>

    <span class="k">let</span> <span class="i">empty</span> <span class="o">=</span> {
        <span class="i">InputValues</span> <span class="o">=</span> [||]
        <span class="i">FunctionInputs</span> <span class="o">=</span> [||]
        <span class="i">FunctionFunctions</span> <span class="o">=</span> [||]
        <span onmouseout="hideTip(event, 'fs12', 31)" onmouseover="showTip(event, 'fs12', 31)" class="i">FunctionValues</span> <span class="o">=</span> [||]
    }

    <span class="k">let</span> <span class="i">addInput</span> (<span class="i">v</span><span class="o">:</span><span class="o">&#39;</span><span class="i">a</span>) (<span class="i">d</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs4', 32)" onmouseover="showTip(event, 'fs4', 32)" class="i">Dag</span>) <span class="o">:</span> <span onmouseout="hideTip(event, 'fs4', 33)" onmouseover="showTip(event, 'fs4', 33)" class="i">Dag</span> <span class="o">*</span> <span class="i">Cell</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">a</span>, <span class="i">Input</span><span class="o">&gt;</span> <span class="o">=</span>
        { <span class="i">d</span> <span class="k">with</span>
            <span class="i">InputValues</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs17', 34)" onmouseover="showTip(event, 'fs17', 34)" class="i">box</span> <span class="i">v</span> <span class="o">|&gt;</span> <span class="i">append</span> <span class="i">d</span><span class="o">.</span><span class="i">InputValues</span>
        }, <span class="i">Cell</span> <span class="i">d</span><span class="o">.</span><span class="i">InputValues</span><span class="o">.</span><span class="i">Length</span>

    <span class="k">let</span> <span class="i">getValue</span> (<span class="i">Cell</span> <span class="i">i</span><span class="o">:</span><span class="i">Cell</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">a</span>,<span class="i">Input</span><span class="o">&gt;</span>) (<span class="i">d</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs4', 35)" onmouseover="showTip(event, 'fs4', 35)" class="i">Dag</span>) <span class="o">:</span> <span class="o">&#39;</span><span class="i">a</span> <span class="o">=</span>
        <span class="k">downcast</span> <span class="i">d</span><span class="o">.</span><span class="i">InputValues</span><span class="o">.</span>[<span class="i">i</span>]

    <span class="k">let</span> <span class="i">setInput</span> (<span class="i">Cell</span> <span class="i">i</span><span class="o">:</span><span class="i">Cell</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">a</span>,<span class="i">Input</span><span class="o">&gt;</span>) (<span class="i">a</span><span class="o">:</span><span class="o">&#39;</span><span class="i">a</span>) (<span class="i">d</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs4', 36)" onmouseover="showTip(event, 'fs4', 36)" class="i">Dag</span>) <span class="o">:</span> <span onmouseout="hideTip(event, 'fs4', 37)" onmouseover="showTip(event, 'fs4', 37)" class="i">Dag</span> <span class="o">=</span>
        <span class="k">if</span> <span class="k">downcast</span> <span class="i">d</span><span class="o">.</span><span class="i">InputValues</span><span class="o">.</span>[<span class="i">i</span>] <span class="o">=</span> <span class="i">a</span> <span class="k">then</span> <span class="i">d</span>
        <span class="k">else</span>
            <span class="k">let</span> <span class="i">dirtyCalcs</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs18', 38)" onmouseover="showTip(event, 'fs18', 38)" class="i">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs19', 39)" onmouseover="showTip(event, 'fs19', 39)" class="i">fold</span> (<span class="k">fun</span> (<span class="i">j</span>,<span class="i">s</span>) (<span class="i">inputs</span>,<span class="i">calcInputs</span>) <span class="k">-&gt;</span>
                    <span class="k">if</span> <span onmouseout="hideTip(event, 'fs9', 40)" onmouseover="showTip(event, 'fs9', 40)" class="i">Set</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs20', 41)" onmouseover="showTip(event, 'fs20', 41)" class="i">contains</span> <span class="i">i</span> <span class="i">inputs</span> <span class="o">||</span>
                       <span onmouseout="hideTip(event, 'fs9', 42)" onmouseover="showTip(event, 'fs9', 42)" class="i">Set</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs21', 43)" onmouseover="showTip(event, 'fs21', 43)" class="i">intersect</span> <span class="i">s</span> <span class="i">calcInputs</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs9', 44)" onmouseover="showTip(event, 'fs9', 44)" class="i">Set</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs22', 45)" onmouseover="showTip(event, 'fs22', 45)" class="i">isEmpty</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs23', 46)" onmouseover="showTip(event, 'fs23', 46)" class="i">not</span> <span class="k">then</span>
                        <span class="i">j</span><span class="o">+</span><span class="n">1</span>, <span onmouseout="hideTip(event, 'fs9', 47)" onmouseover="showTip(event, 'fs9', 47)" class="i">Set</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs24', 48)" onmouseover="showTip(event, 'fs24', 48)" class="i">add</span> <span class="i">j</span> <span class="i">s</span>
                    <span class="k">else</span>
                        <span class="i">j</span><span class="o">+</span><span class="n">1</span>, <span class="i">s</span>
                ) (<span class="n">0</span>,<span onmouseout="hideTip(event, 'fs9', 49)" onmouseover="showTip(event, 'fs9', 49)" class="i">Set</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs25', 50)" onmouseover="showTip(event, 'fs25', 50)" class="i">empty</span>) <span class="i">d</span><span class="o">.</span><span class="i">FunctionInputs</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 51)" onmouseover="showTip(event, 'fs26', 51)" class="i">snd</span>

            <span class="k">let</span> <span class="i">inputValues</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs14', 52)" onmouseover="showTip(event, 'fs14', 52)" class="i">Array</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs27', 53)" onmouseover="showTip(event, 'fs27', 53)" class="i">copy</span> <span class="i">d</span><span class="o">.</span><span class="i">InputValues</span>
            <span class="i">inputValues</span><span class="o">.</span>[<span class="i">i</span>] <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs17', 54)" onmouseover="showTip(event, 'fs17', 54)" class="i">box</span> <span class="i">a</span>

            <span class="k">if</span> <span onmouseout="hideTip(event, 'fs9', 55)" onmouseover="showTip(event, 'fs9', 55)" class="i">Set</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs22', 56)" onmouseover="showTip(event, 'fs22', 56)" class="i">isEmpty</span> <span class="i">dirtyCalcs</span> <span class="k">then</span> { <span class="i">d</span> <span class="k">with</span> <span class="i">InputValues</span> <span class="o">=</span> <span class="i">inputValues</span> }
            <span class="k">else</span>
                <span class="k">let</span> <span class="i">functionValues</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs14', 57)" onmouseover="showTip(event, 'fs14', 57)" class="i">Array</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs27', 58)" onmouseover="showTip(event, 'fs27', 58)" class="i">copy</span> <span class="i">d</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 59)" onmouseover="showTip(event, 'fs12', 59)" class="i">FunctionValues</span>
                <span class="k">let</span> <span class="i">dag</span> <span class="o">=</span> {
                    <span class="i">d</span> <span class="k">with</span>
                        <span class="i">InputValues</span> <span class="o">=</span> <span class="i">inputValues</span>
                        <span onmouseout="hideTip(event, 'fs12', 60)" onmouseover="showTip(event, 'fs12', 60)" class="i">FunctionValues</span> <span class="o">=</span> <span class="i">functionValues</span>
                }
                <span onmouseout="hideTip(event, 'fs9', 61)" onmouseover="showTip(event, 'fs9', 61)" class="i">Set</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs28', 62)" onmouseover="showTip(event, 'fs28', 62)" class="i">iter</span> (<span class="k">fun</span> <span class="i">i</span> <span class="k">-&gt;</span>
                    <span class="i">functionValues</span><span class="o">.</span>[<span class="i">i</span>] <span class="o">&lt;-</span> <span class="k">lazy</span> <span class="i">d</span><span class="o">.</span><span class="i">FunctionFunctions</span><span class="o">.</span>[<span class="i">i</span>] <span class="i">dag</span>
                ) <span class="i">dirtyCalcs</span>
                <span class="i">dag</span>

    <span class="k">let</span> <span class="i">getValueTask</span> (<span class="i">Cell</span> <span class="i">i</span><span class="o">:</span><span class="i">Cell</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">a</span>,<span class="i">Function</span><span class="o">&gt;</span>) (<span class="i">d</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs4', 63)" onmouseover="showTip(event, 'fs4', 63)" class="i">Dag</span>) <span class="o">:</span> <span onmouseout="hideTip(event, 'fs29', 64)" onmouseover="showTip(event, 'fs29', 64)" class="i">Task</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">a</span><span class="o">&gt;</span> <span class="o">=</span>
        <span class="k">downcast</span> <span class="i">d</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 65)" onmouseover="showTip(event, 'fs12', 65)" class="i">FunctionValues</span><span class="o">.</span>[<span class="i">i</span>]<span class="o">.</span><span class="i">Value</span>

    <span class="k">let</span> <span class="i">changed</span> (<span class="i">Cell</span> <span class="i">i</span><span class="o">:</span><span class="i">Cell</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">a</span>,<span class="o">&#39;</span><span class="i">t</span><span class="o">&gt;</span>) (<span class="i">before</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs4', 66)" onmouseover="showTip(event, 'fs4', 66)" class="i">Dag</span>) (<span class="i">after</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs4', 67)" onmouseover="showTip(event, 'fs4', 67)" class="i">Dag</span>) <span class="o">:</span> <span onmouseout="hideTip(event, 'fs30', 68)" onmouseover="showTip(event, 'fs30', 68)" class="i">bool</span> <span class="o">=</span>
        <span class="k">if</span> <span onmouseout="hideTip(event, 'fs31', 69)" onmouseover="showTip(event, 'fs31', 69)" class="i">typeof</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">t</span><span class="o">&gt;</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs31', 70)" onmouseover="showTip(event, 'fs31', 70)" class="i">typeof</span><span class="o">&lt;</span><span class="i">Function</span><span class="o">&gt;</span> <span class="k">then</span>
            <span class="i">before</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 71)" onmouseover="showTip(event, 'fs12', 71)" class="i">FunctionValues</span><span class="o">.</span>[<span class="i">i</span>] <span class="o">&lt;&gt;</span> <span class="i">after</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 72)" onmouseover="showTip(event, 'fs12', 72)" class="i">FunctionValues</span><span class="o">.</span>[<span class="i">i</span>]
        <span class="k">else</span>
            <span class="k">downcast</span> <span class="i">before</span><span class="o">.</span><span class="i">InputValues</span><span class="o">.</span>[<span class="i">i</span>] <span class="o">&lt;&gt;</span> <span class="k">downcast</span> <span class="i">after</span><span class="o">.</span><span class="i">InputValues</span><span class="o">.</span>[<span class="i">i</span>]

    <span class="k">type</span> <span class="o">&#39;</span><span class="i">a</span> <span class="i">Builder</span> <span class="o">=</span> <span class="k">private</span> {
        <span onmouseout="hideTip(event, 'fs4', 73)" onmouseover="showTip(event, 'fs4', 73)" class="i">Dag</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs4', 74)" onmouseover="showTip(event, 'fs4', 74)" class="i">Dag</span>
        <span class="i">Inputs</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs9', 75)" onmouseover="showTip(event, 'fs9', 75)" class="i">Set</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs10', 76)" onmouseover="showTip(event, 'fs10', 76)" class="i">int</span><span class="o">&gt;</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs9', 77)" onmouseover="showTip(event, 'fs9', 77)" class="i">Set</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs10', 78)" onmouseover="showTip(event, 'fs10', 78)" class="i">int</span><span class="o">&gt;</span>
        <span class="i">Function</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs4', 79)" onmouseover="showTip(event, 'fs4', 79)" class="i">Dag</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs29', 80)" onmouseover="showTip(event, 'fs29', 80)" class="i">Task</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">a</span><span class="o">&gt;</span>
    }

    <span class="k">let</span> <span class="i">buildFunction</span> (<span class="i">d</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs4', 81)" onmouseover="showTip(event, 'fs4', 81)" class="i">Dag</span>) <span class="i">f</span> <span class="o">=</span> {
        <span onmouseout="hideTip(event, 'fs4', 82)" onmouseover="showTip(event, 'fs4', 82)" class="i">Dag</span> <span class="o">=</span> <span class="i">d</span>
        <span class="i">Inputs</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs9', 83)" onmouseover="showTip(event, 'fs9', 83)" class="i">Set</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs25', 84)" onmouseover="showTip(event, 'fs25', 84)" class="i">empty</span>, <span onmouseout="hideTip(event, 'fs9', 85)" onmouseover="showTip(event, 'fs9', 85)" class="i">Set</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs25', 86)" onmouseover="showTip(event, 'fs25', 86)" class="i">empty</span>
        <span class="i">Function</span> <span class="o">=</span> <span class="k">fun</span> _ <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs29', 87)" onmouseover="showTip(event, 'fs29', 87)" class="i">Task</span><span class="o">.</span><span class="i">FromResult</span> <span class="i">f</span>
    }

    <span class="k">let</span> <span class="i">applyCell</span> (<span class="i">Cell</span> <span class="i">i</span><span class="o">:</span><span class="i">Cell</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">a</span>,<span class="o">&#39;</span><span class="i">t</span><span class="o">&gt;</span>) {<span onmouseout="hideTip(event, 'fs4', 88)" onmouseover="showTip(event, 'fs4', 88)" class="i">Dag</span><span class="o">=</span><span class="i">dag</span>;<span class="i">Inputs</span><span class="o">=</span><span class="i">inI</span>,<span class="i">inC</span>;<span class="i">Function</span><span class="o">=</span><span class="i">bFn</span>} <span class="o">=</span>

        <span class="k">let</span> <span class="k">inline</span> <span class="i">taskMap</span> <span class="i">f</span> (<span class="i">t</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs29', 89)" onmouseover="showTip(event, 'fs29', 89)" class="i">Task</span><span class="o">&lt;</span>_<span class="o">&gt;</span>) <span class="o">=</span>
            <span class="i">t</span><span class="o">.</span><span class="i">ContinueWith</span>(<span class="k">fun</span> (<span class="i">r</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs29', 90)" onmouseover="showTip(event, 'fs29', 90)" class="i">Task</span><span class="o">&lt;</span>_<span class="o">&gt;</span>) <span class="k">-&gt;</span> <span class="i">f</span> <span class="i">r</span><span class="o">.</span><span class="i">Result</span>)

        <span class="k">let</span> <span class="i">isFunctionCell</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs31', 91)" onmouseover="showTip(event, 'fs31', 91)" class="i">typeof</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">t</span><span class="o">&gt;</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs31', 92)" onmouseover="showTip(event, 'fs31', 92)" class="i">typeof</span><span class="o">&lt;</span><span class="i">Function</span><span class="o">&gt;</span>
        {
            <span onmouseout="hideTip(event, 'fs4', 93)" onmouseover="showTip(event, 'fs4', 93)" class="i">Dag</span> <span class="o">=</span> <span class="i">dag</span>
            <span class="i">Inputs</span> <span class="o">=</span>
                <span class="k">if</span> <span class="i">isFunctionCell</span> <span class="k">then</span> <span class="i">inI</span>, <span onmouseout="hideTip(event, 'fs9', 94)" onmouseover="showTip(event, 'fs9', 94)" class="i">Set</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs24', 95)" onmouseover="showTip(event, 'fs24', 95)" class="i">add</span> <span class="i">i</span> <span class="i">inC</span>
                                  <span class="k">else</span> <span onmouseout="hideTip(event, 'fs9', 96)" onmouseover="showTip(event, 'fs9', 96)" class="i">Set</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs24', 97)" onmouseover="showTip(event, 'fs24', 97)" class="i">add</span> <span class="i">i</span> <span class="i">inI</span>, <span class="i">inC</span>
            <span class="i">Function</span> <span class="o">=</span>
                <span class="k">if</span> <span class="i">isFunctionCell</span> <span class="k">then</span>
                    <span class="k">fun</span> <span class="i">d</span> <span class="k">-&gt;</span>
                        <span class="k">let</span> <span class="i">fTask</span> <span class="o">=</span> <span class="i">bFn</span> <span class="i">d</span>
                        ( <span class="k">downcast</span> <span class="i">d</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 98)" onmouseover="showTip(event, 'fs12', 98)" class="i">FunctionValues</span><span class="o">.</span>[<span class="i">i</span>]<span class="o">.</span><span class="i">Value</span>
                          <span class="o">|&gt;</span> <span class="i">taskMap</span> (<span class="k">fun</span> <span class="i">a</span> <span class="k">-&gt;</span> <span class="i">taskMap</span> (<span class="k">fun</span> <span class="i">f</span> <span class="k">-&gt;</span> <span class="i">f</span> <span class="i">a</span>) <span class="i">fTask</span>)
                        )<span class="o">.</span><span class="i">Unwrap</span>()
                <span class="k">else</span>
                    <span class="k">fun</span> <span class="i">d</span> <span class="k">-&gt;</span>
                        <span class="i">bFn</span> <span class="i">d</span> <span class="o">|&gt;</span> <span class="i">taskMap</span> (<span class="k">fun</span> <span class="i">f</span> <span class="k">-&gt;</span>
                            <span class="k">downcast</span> <span class="i">d</span><span class="o">.</span><span class="i">InputValues</span><span class="o">.</span>[<span class="i">i</span>] <span class="o">|&gt;</span> <span class="i">f</span>  )
        }

    <span class="k">let</span> <span class="i">addFunction</span> ({<span onmouseout="hideTip(event, 'fs4', 99)" onmouseover="showTip(event, 'fs4', 99)" class="i">Dag</span><span class="o">=</span><span class="i">dag</span>;<span class="i">Inputs</span><span class="o">=</span><span class="i">ips</span>;<span class="i">Function</span><span class="o">=</span><span class="i">fn</span>}<span class="o">:</span><span class="o">&#39;</span><span class="i">a</span> <span class="i">Builder</span>) <span class="o">=</span>
        <span class="k">let</span> <span class="i">calc</span> <span class="o">=</span> <span class="i">fn</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs17', 100)" onmouseover="showTip(event, 'fs17', 100)" class="i">box</span>
        <span class="k">let</span> <span class="i">d</span> <span class="o">=</span> {
            <span class="i">dag</span> <span class="k">with</span>
                <span class="i">FunctionInputs</span> <span class="o">=</span> <span class="i">append</span> <span class="i">dag</span><span class="o">.</span><span class="i">FunctionInputs</span> <span class="i">ips</span>
                <span class="i">FunctionFunctions</span> <span class="o">=</span> <span class="i">append</span> <span class="i">dag</span><span class="o">.</span><span class="i">FunctionFunctions</span> <span class="i">calc</span>
                <span onmouseout="hideTip(event, 'fs12', 101)" onmouseover="showTip(event, 'fs12', 101)" class="i">FunctionValues</span> <span class="o">=</span> <span class="i">append</span> <span class="i">dag</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 102)" onmouseover="showTip(event, 'fs12', 102)" class="i">FunctionValues</span> <span class="k">null</span>
        }
        <span class="i">d</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 103)" onmouseover="showTip(event, 'fs12', 103)" class="i">FunctionValues</span><span class="o">.</span>[<span class="i">d</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 104)" onmouseover="showTip(event, 'fs12', 104)" class="i">FunctionValues</span><span class="o">.</span><span class="i">Length</span><span class="o">-</span><span class="n">1</span>] <span class="o">&lt;-</span> <span class="k">lazy</span> <span class="i">calc</span> <span class="i">d</span>
        <span class="k">let</span> <span class="i">cell</span> <span class="o">:</span> <span class="i">Cell</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">a</span>,<span class="i">Function</span><span class="o">&gt;</span> <span class="o">=</span> <span class="i">Cell</span> <span class="i">dag</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 105)" onmouseover="showTip(event, 'fs12', 105)" class="i">FunctionValues</span><span class="o">.</span><span class="i">Length</span>
        <span class="i">d</span>, <span class="i">cell</span>
</code></pre></td>
</tr>
</table>
<h2>Testing</h2>
<p>The following tests demonstrate use of the DAG.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">  1: </span>
<span class="l">  2: </span>
<span class="l">  3: </span>
<span class="l">  4: </span>
<span class="l">  5: </span>
<span class="l">  6: </span>
<span class="l">  7: </span>
<span class="l">  8: </span>
<span class="l">  9: </span>
<span class="l"> 10: </span>
<span class="l"> 11: </span>
<span class="l"> 12: </span>
<span class="l"> 13: </span>
<span class="l"> 14: </span>
<span class="l"> 15: </span>
<span class="l"> 16: </span>
<span class="l"> 17: </span>
<span class="l"> 18: </span>
<span class="l"> 19: </span>
<span class="l"> 20: </span>
<span class="l"> 21: </span>
<span class="l"> 22: </span>
<span class="l"> 23: </span>
<span class="l"> 24: </span>
<span class="l"> 25: </span>
<span class="l"> 26: </span>
<span class="l"> 27: </span>
<span class="l"> 28: </span>
<span class="l"> 29: </span>
<span class="l"> 30: </span>
<span class="l"> 31: </span>
<span class="l"> 32: </span>
<span class="l"> 33: </span>
<span class="l"> 34: </span>
<span class="l"> 35: </span>
<span class="l"> 36: </span>
<span class="l"> 37: </span>
<span class="l"> 38: </span>
<span class="l"> 39: </span>
<span class="l"> 40: </span>
<span class="l"> 41: </span>
<span class="l"> 42: </span>
<span class="l"> 43: </span>
<span class="l"> 44: </span>
<span class="l"> 45: </span>
<span class="l"> 46: </span>
<span class="l"> 47: </span>
<span class="l"> 48: </span>
<span class="l"> 49: </span>
<span class="l"> 50: </span>
<span class="l"> 51: </span>
<span class="l"> 52: </span>
<span class="l"> 53: </span>
<span class="l"> 54: </span>
<span class="l"> 55: </span>
<span class="l"> 56: </span>
<span class="l"> 57: </span>
<span class="l"> 58: </span>
<span class="l"> 59: </span>
<span class="l"> 60: </span>
<span class="l"> 61: </span>
<span class="l"> 62: </span>
<span class="l"> 63: </span>
<span class="l"> 64: </span>
<span class="l"> 65: </span>
<span class="l"> 66: </span>
<span class="l"> 67: </span>
<span class="l"> 68: </span>
<span class="l"> 69: </span>
<span class="l"> 70: </span>
<span class="l"> 71: </span>
<span class="l"> 72: </span>
<span class="l"> 73: </span>
<span class="l"> 74: </span>
<span class="l"> 75: </span>
<span class="l"> 76: </span>
<span class="l"> 77: </span>
<span class="l"> 78: </span>
<span class="l"> 79: </span>
<span class="l"> 80: </span>
<span class="l"> 81: </span>
<span class="l"> 82: </span>
<span class="l"> 83: </span>
<span class="l"> 84: </span>
<span class="l"> 85: </span>
<span class="l"> 86: </span>
<span class="l"> 87: </span>
<span class="l"> 88: </span>
<span class="l"> 89: </span>
<span class="l"> 90: </span>
<span class="l"> 91: </span>
<span class="l"> 92: </span>
<span class="l"> 93: </span>
<span class="l"> 94: </span>
<span class="l"> 95: </span>
<span class="l"> 96: </span>
<span class="l"> 97: </span>
<span class="l"> 98: </span>
<span class="l"> 99: </span>
<span class="l">100: </span>
<span class="l">101: </span>
<span class="l">102: </span>
<span class="l">103: </span>
<span class="l">104: </span>
<span class="l">105: </span>
<span class="l">106: </span>
<span class="l">107: </span>
<span class="l">108: </span>
<span class="l">109: </span>
<span class="l">110: </span>
<span class="l">111: </span>
<span class="l">112: </span>
<span class="l">113: </span>
<span class="l">114: </span>
<span class="l">115: </span>
<span class="l">116: </span>
<span class="l">117: </span>
<span class="l">118: </span>
<span class="l">119: </span>
<span class="l">120: </span>
<span class="l">121: </span>
<span class="l">122: </span>
<span class="l">123: </span>
<span class="l">124: </span>
<span class="l">125: </span>
<span class="l">126: </span>
<span class="l">127: </span>
<span class="l">128: </span>
<span class="l">129: </span>
<span class="l">130: </span>
<span class="l">131: </span>
<span class="l">132: </span>
<span class="l">133: </span>
<span class="l">134: </span>
<span class="l">135: </span>
<span class="l">136: </span>
<span class="l">137: </span>
<span class="l">138: </span>
<span class="l">139: </span>
<span class="l">140: </span>
<span class="l">141: </span>
<span class="l">142: </span>
<span class="l">143: </span>
<span class="l">144: </span>
<span class="l">145: </span>
<span class="l">146: </span>
<span class="l">147: </span>
<span class="l">148: </span>
<span class="l">149: </span>
<span class="l">150: </span>
<span class="l">151: </span>
<span class="l">152: </span>
<span class="l">153: </span>
<span class="l">154: </span>
<span class="l">155: </span>
<span class="l">156: </span>
<span class="l">157: </span>
<span class="l">158: </span>
<span class="l">159: </span>
<span class="l">160: </span>
<span class="l">161: </span>
<span class="l">162: </span>
<span class="l">163: </span>
<span class="l">164: </span>
<span class="l">165: </span>
<span class="l">166: </span>
<span class="l">167: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span class="i">tests</span> <span class="o">=</span>
    <span class="i">testList</span> <span class="s">&quot;dag tests&quot;</span> [

        <span class="i">testAsync</span> <span class="s">&quot;one cell&quot;</span> {
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 107)" onmouseover="showTip(event, 'fs4', 107)" class="i">Dag</span><span class="o">.</span><span class="i">addInput</span> <span class="n">7</span> <span onmouseout="hideTip(event, 'fs4', 108)" onmouseover="showTip(event, 'fs4', 108)" class="i">Dag</span><span class="o">.</span><span class="i">empty</span>
            <span class="i">Expect</span><span class="o">.</span><span class="i">equal</span> <span class="n">7</span> (<span onmouseout="hideTip(event, 'fs4', 109)" onmouseover="showTip(event, 'fs4', 109)" class="i">Dag</span><span class="o">.</span><span class="i">getValue</span> <span class="i">cell1</span> <span class="i">dag</span>) <span class="s">&quot;one cell&quot;</span>
        }

        <span class="i">testAsync</span> <span class="s">&quot;two cell&quot;</span> {
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 110)" onmouseover="showTip(event, 'fs4', 110)" class="i">Dag</span><span class="o">.</span><span class="i">addInput</span> <span class="n">8</span> <span onmouseout="hideTip(event, 'fs4', 111)" onmouseover="showTip(event, 'fs4', 111)" class="i">Dag</span><span class="o">.</span><span class="i">empty</span>
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell2</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 112)" onmouseover="showTip(event, 'fs4', 112)" class="i">Dag</span><span class="o">.</span><span class="i">addInput</span> <span class="n">9</span> <span class="i">dag</span>
            <span class="i">Expect</span><span class="o">.</span><span class="i">equal</span> <span class="n">8</span> (<span onmouseout="hideTip(event, 'fs4', 113)" onmouseover="showTip(event, 'fs4', 113)" class="i">Dag</span><span class="o">.</span><span class="i">getValue</span> <span class="i">cell1</span> <span class="i">dag</span>) <span class="s">&quot;first 8&quot;</span>
            <span class="i">Expect</span><span class="o">.</span><span class="i">equal</span> <span class="n">9</span> (<span onmouseout="hideTip(event, 'fs4', 114)" onmouseover="showTip(event, 'fs4', 114)" class="i">Dag</span><span class="o">.</span><span class="i">getValue</span> <span class="i">cell2</span> <span class="i">dag</span>) <span class="s">&quot;second 9&quot;</span>
        }

        <span class="i">testAsync</span> <span class="s">&quot;one function&quot;</span> {
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 115)" onmouseover="showTip(event, 'fs4', 115)" class="i">Dag</span><span class="o">.</span><span class="i">addInput</span> <span class="n">42</span> <span onmouseout="hideTip(event, 'fs4', 116)" onmouseover="showTip(event, 'fs4', 116)" class="i">Dag</span><span class="o">.</span><span class="i">empty</span>
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell2</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs4', 117)" onmouseover="showTip(event, 'fs4', 117)" class="i">Dag</span><span class="o">.</span><span class="i">buildFunction</span> <span class="i">dag</span> (<span class="k">fun</span> <span class="i">x</span> <span class="k">-&gt;</span> <span class="i">x</span> <span class="o">*</span> <span class="n">10</span>)
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 118)" onmouseover="showTip(event, 'fs4', 118)" class="i">Dag</span><span class="o">.</span><span class="i">applyCell</span> <span class="i">cell1</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 119)" onmouseover="showTip(event, 'fs4', 119)" class="i">Dag</span><span class="o">.</span><span class="i">addFunction</span>
            <span class="k">let!</span> <span class="i">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 120)" onmouseover="showTip(event, 'fs4', 120)" class="i">Dag</span><span class="o">.</span><span class="i">getValueTask</span> <span class="i">cell2</span> <span class="i">dag</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs33', 121)" onmouseover="showTip(event, 'fs33', 121)" class="i">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs34', 122)" onmouseover="showTip(event, 'fs34', 122)" class="i">AwaitTask</span>
            <span class="i">Expect</span><span class="o">.</span><span class="i">equal</span> <span class="n">420</span> <span class="i">result</span> <span class="s">&quot;42 * 10 = 420&quot;</span>
        }

        <span class="i">testAsync</span> <span class="s">&quot;one function with set&quot;</span> {
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 123)" onmouseover="showTip(event, 'fs4', 123)" class="i">Dag</span><span class="o">.</span><span class="i">addInput</span> <span class="n">13</span> <span onmouseout="hideTip(event, 'fs4', 124)" onmouseover="showTip(event, 'fs4', 124)" class="i">Dag</span><span class="o">.</span><span class="i">empty</span>
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell2</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs4', 125)" onmouseover="showTip(event, 'fs4', 125)" class="i">Dag</span><span class="o">.</span><span class="i">buildFunction</span> <span class="i">dag</span> (<span class="k">fun</span> <span class="i">x</span> <span class="k">-&gt;</span> <span class="i">x</span> <span class="o">*</span> <span class="n">10</span>)
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 126)" onmouseover="showTip(event, 'fs4', 126)" class="i">Dag</span><span class="o">.</span><span class="i">applyCell</span> <span class="i">cell1</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 127)" onmouseover="showTip(event, 'fs4', 127)" class="i">Dag</span><span class="o">.</span><span class="i">addFunction</span>
            <span class="k">let</span> <span class="i">dag</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 128)" onmouseover="showTip(event, 'fs4', 128)" class="i">Dag</span><span class="o">.</span><span class="i">setInput</span> <span class="i">cell1</span> <span class="n">43</span> <span class="i">dag</span>
            <span class="k">let!</span> <span class="i">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 129)" onmouseover="showTip(event, 'fs4', 129)" class="i">Dag</span><span class="o">.</span><span class="i">getValueTask</span> <span class="i">cell2</span> <span class="i">dag</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs33', 130)" onmouseover="showTip(event, 'fs33', 130)" class="i">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs34', 131)" onmouseover="showTip(event, 'fs34', 131)" class="i">AwaitTask</span>
            <span class="i">Expect</span><span class="o">.</span><span class="i">equal</span> <span class="n">430</span> <span class="i">result</span> <span class="s">&quot;43 * 10 = 430&quot;</span>
        }

        <span class="i">testAsync</span> <span class="s">&quot;one function with set twice&quot;</span> {
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 132)" onmouseover="showTip(event, 'fs4', 132)" class="i">Dag</span><span class="o">.</span><span class="i">addInput</span> <span class="n">15</span> <span onmouseout="hideTip(event, 'fs4', 133)" onmouseover="showTip(event, 'fs4', 133)" class="i">Dag</span><span class="o">.</span><span class="i">empty</span>
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell2</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs4', 134)" onmouseover="showTip(event, 'fs4', 134)" class="i">Dag</span><span class="o">.</span><span class="i">buildFunction</span> <span class="i">dag</span> (<span class="k">fun</span> <span class="i">x</span> <span class="k">-&gt;</span> <span class="i">x</span> <span class="o">*</span> <span class="n">10</span>)
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 135)" onmouseover="showTip(event, 'fs4', 135)" class="i">Dag</span><span class="o">.</span><span class="i">applyCell</span> <span class="i">cell1</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 136)" onmouseover="showTip(event, 'fs4', 136)" class="i">Dag</span><span class="o">.</span><span class="i">addFunction</span>
            <span class="k">let</span> <span class="i">dag</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 137)" onmouseover="showTip(event, 'fs4', 137)" class="i">Dag</span><span class="o">.</span><span class="i">setInput</span> <span class="i">cell1</span> <span class="n">43</span> <span class="i">dag</span>
            <span class="k">let</span> <span class="i">dag</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 138)" onmouseover="showTip(event, 'fs4', 138)" class="i">Dag</span><span class="o">.</span><span class="i">setInput</span> <span class="i">cell1</span> <span class="n">44</span> <span class="i">dag</span>
            <span class="k">let!</span> <span class="i">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 139)" onmouseover="showTip(event, 'fs4', 139)" class="i">Dag</span><span class="o">.</span><span class="i">getValueTask</span> <span class="i">cell2</span> <span class="i">dag</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs33', 140)" onmouseover="showTip(event, 'fs33', 140)" class="i">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs34', 141)" onmouseover="showTip(event, 'fs34', 141)" class="i">AwaitTask</span>
            <span class="i">Expect</span><span class="o">.</span><span class="i">equal</span> <span class="n">440</span> <span class="i">result</span> <span class="s">&quot;44 * 10 = 440&quot;</span>
        }

        <span class="i">testAsync</span> <span class="s">&quot;not changed input&quot;</span> {
            <span class="k">let</span> <span class="i">dagBefore</span>, <span class="i">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 142)" onmouseover="showTip(event, 'fs4', 142)" class="i">Dag</span><span class="o">.</span><span class="i">addInput</span> <span class="n">42</span> <span onmouseout="hideTip(event, 'fs4', 143)" onmouseover="showTip(event, 'fs4', 143)" class="i">Dag</span><span class="o">.</span><span class="i">empty</span>
            <span class="k">let</span> <span class="i">dagAfter</span>,_ <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 144)" onmouseover="showTip(event, 'fs4', 144)" class="i">Dag</span><span class="o">.</span><span class="i">addInput</span> <span class="n">45</span> <span class="i">dagBefore</span>
            <span class="i">Expect</span><span class="o">.</span><span class="i">isFalse</span> (<span onmouseout="hideTip(event, 'fs4', 145)" onmouseover="showTip(event, 'fs4', 145)" class="i">Dag</span><span class="o">.</span><span class="i">changed</span> <span class="i">cell1</span> <span class="i">dagBefore</span> <span class="i">dagAfter</span>) <span class="s">&quot;no change&quot;</span>
        }

        <span class="i">testAsync</span> <span class="s">&quot;changed input&quot;</span> {
            <span class="k">let</span> <span class="i">dagBefore</span>, <span class="i">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 146)" onmouseover="showTip(event, 'fs4', 146)" class="i">Dag</span><span class="o">.</span><span class="i">addInput</span> <span class="n">42</span> <span onmouseout="hideTip(event, 'fs4', 147)" onmouseover="showTip(event, 'fs4', 147)" class="i">Dag</span><span class="o">.</span><span class="i">empty</span>
            <span class="k">let</span> <span class="i">dagAfter</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 148)" onmouseover="showTip(event, 'fs4', 148)" class="i">Dag</span><span class="o">.</span><span class="i">setInput</span> <span class="i">cell1</span> <span class="n">45</span> <span class="i">dagBefore</span>
            <span class="i">Expect</span><span class="o">.</span><span class="i">isTrue</span> (<span onmouseout="hideTip(event, 'fs4', 149)" onmouseover="showTip(event, 'fs4', 149)" class="i">Dag</span><span class="o">.</span><span class="i">changed</span> <span class="i">cell1</span> <span class="i">dagBefore</span> <span class="i">dagAfter</span>) <span class="s">&quot;changed&quot;</span>
        }

        <span class="i">testAsync</span> <span class="s">&quot;not changed function&quot;</span> {
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 150)" onmouseover="showTip(event, 'fs4', 150)" class="i">Dag</span><span class="o">.</span><span class="i">addInput</span> <span class="n">42</span> <span onmouseout="hideTip(event, 'fs4', 151)" onmouseover="showTip(event, 'fs4', 151)" class="i">Dag</span><span class="o">.</span><span class="i">empty</span>
            <span class="k">let</span> <span class="i">dagBefore</span>, <span class="i">cell2</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs4', 152)" onmouseover="showTip(event, 'fs4', 152)" class="i">Dag</span><span class="o">.</span><span class="i">buildFunction</span> <span class="i">dag</span> (<span class="k">fun</span> <span class="i">x</span> <span class="k">-&gt;</span> <span class="i">x</span> <span class="o">*</span> <span class="n">10</span>)
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 153)" onmouseover="showTip(event, 'fs4', 153)" class="i">Dag</span><span class="o">.</span><span class="i">applyCell</span> <span class="i">cell1</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 154)" onmouseover="showTip(event, 'fs4', 154)" class="i">Dag</span><span class="o">.</span><span class="i">addFunction</span>
            <span class="k">let</span> <span class="i">dagAfter</span>,_ <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 155)" onmouseover="showTip(event, 'fs4', 155)" class="i">Dag</span><span class="o">.</span><span class="i">addInput</span> <span class="n">45</span> <span class="i">dagBefore</span>
            <span class="i">Expect</span><span class="o">.</span><span class="i">isFalse</span> (<span onmouseout="hideTip(event, 'fs4', 156)" onmouseover="showTip(event, 'fs4', 156)" class="i">Dag</span><span class="o">.</span><span class="i">changed</span> <span class="i">cell2</span> <span class="i">dagBefore</span> <span class="i">dagAfter</span>) <span class="s">&quot;no change&quot;</span>
        }

        <span class="i">testAsync</span> <span class="s">&quot;changed function&quot;</span> {
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 157)" onmouseover="showTip(event, 'fs4', 157)" class="i">Dag</span><span class="o">.</span><span class="i">addInput</span> <span class="n">17</span> <span onmouseout="hideTip(event, 'fs4', 158)" onmouseover="showTip(event, 'fs4', 158)" class="i">Dag</span><span class="o">.</span><span class="i">empty</span>
            <span class="k">let</span> <span class="i">dagBefore</span>, <span class="i">cell2</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs4', 159)" onmouseover="showTip(event, 'fs4', 159)" class="i">Dag</span><span class="o">.</span><span class="i">buildFunction</span> <span class="i">dag</span> (<span class="k">fun</span> <span class="i">x</span> <span class="k">-&gt;</span> <span class="i">x</span> <span class="o">*</span> <span class="n">10</span>)
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 160)" onmouseover="showTip(event, 'fs4', 160)" class="i">Dag</span><span class="o">.</span><span class="i">applyCell</span> <span class="i">cell1</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 161)" onmouseover="showTip(event, 'fs4', 161)" class="i">Dag</span><span class="o">.</span><span class="i">addFunction</span>
            <span class="k">let</span> <span class="i">dagAfter</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 162)" onmouseover="showTip(event, 'fs4', 162)" class="i">Dag</span><span class="o">.</span><span class="i">setInput</span> <span class="i">cell1</span> <span class="n">45</span> <span class="i">dagBefore</span>
            <span class="i">Expect</span><span class="o">.</span><span class="i">isTrue</span> (<span onmouseout="hideTip(event, 'fs4', 163)" onmouseover="showTip(event, 'fs4', 163)" class="i">Dag</span><span class="o">.</span><span class="i">changed</span> <span class="i">cell2</span> <span class="i">dagBefore</span> <span class="i">dagAfter</span>) <span class="s">&quot;changed&quot;</span>
            <span class="k">let!</span> <span class="i">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 164)" onmouseover="showTip(event, 'fs4', 164)" class="i">Dag</span><span class="o">.</span><span class="i">getValueTask</span> <span class="i">cell2</span> <span class="i">dagAfter</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs33', 165)" onmouseover="showTip(event, 'fs33', 165)" class="i">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs34', 166)" onmouseover="showTip(event, 'fs34', 166)" class="i">AwaitTask</span>
            <span class="i">Expect</span><span class="o">.</span><span class="i">equal</span> <span class="n">450</span> <span class="i">result</span> <span class="s">&quot;45 * 10 = 450&quot;</span>
            <span class="k">let!</span> <span class="i">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 167)" onmouseover="showTip(event, 'fs4', 167)" class="i">Dag</span><span class="o">.</span><span class="i">getValueTask</span> <span class="i">cell2</span> <span class="i">dagBefore</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs33', 168)" onmouseover="showTip(event, 'fs33', 168)" class="i">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs34', 169)" onmouseover="showTip(event, 'fs34', 169)" class="i">AwaitTask</span>
            <span class="i">Expect</span><span class="o">.</span><span class="i">equal</span> <span class="n">170</span> <span class="i">result</span> <span class="s">&quot;17 * 10 = 170&quot;</span>
        }

        <span class="i">testAsync</span> <span class="s">&quot;chained functions&quot;</span> {
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 170)" onmouseover="showTip(event, 'fs4', 170)" class="i">Dag</span><span class="o">.</span><span class="i">addInput</span> <span class="n">18</span> <span onmouseout="hideTip(event, 'fs4', 171)" onmouseover="showTip(event, 'fs4', 171)" class="i">Dag</span><span class="o">.</span><span class="i">empty</span>
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell2</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs4', 172)" onmouseover="showTip(event, 'fs4', 172)" class="i">Dag</span><span class="o">.</span><span class="i">buildFunction</span> <span class="i">dag</span> (<span class="k">fun</span> <span class="i">x</span> <span class="k">-&gt;</span> <span class="i">x</span> <span class="o">*</span> <span class="n">10</span>)
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 173)" onmouseover="showTip(event, 'fs4', 173)" class="i">Dag</span><span class="o">.</span><span class="i">applyCell</span> <span class="i">cell1</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 174)" onmouseover="showTip(event, 'fs4', 174)" class="i">Dag</span><span class="o">.</span><span class="i">addFunction</span>
            <span class="k">let</span> <span class="i">dagBefore</span>, <span class="i">cell3</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs4', 175)" onmouseover="showTip(event, 'fs4', 175)" class="i">Dag</span><span class="o">.</span><span class="i">buildFunction</span> <span class="i">dag</span> (<span class="k">fun</span> <span class="i">x</span> <span class="k">-&gt;</span> <span class="i">x</span> <span class="o">+</span> <span class="n">1</span>)
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 176)" onmouseover="showTip(event, 'fs4', 176)" class="i">Dag</span><span class="o">.</span><span class="i">applyCell</span> <span class="i">cell2</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 177)" onmouseover="showTip(event, 'fs4', 177)" class="i">Dag</span><span class="o">.</span><span class="i">addFunction</span>
            <span class="k">let</span> <span class="i">dagAfter</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 178)" onmouseover="showTip(event, 'fs4', 178)" class="i">Dag</span><span class="o">.</span><span class="i">setInput</span> <span class="i">cell1</span> <span class="n">23</span> <span class="i">dagBefore</span>
            <span class="k">let!</span> <span class="i">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 179)" onmouseover="showTip(event, 'fs4', 179)" class="i">Dag</span><span class="o">.</span><span class="i">getValueTask</span> <span class="i">cell3</span> <span class="i">dagAfter</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs33', 180)" onmouseover="showTip(event, 'fs33', 180)" class="i">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs34', 181)" onmouseover="showTip(event, 'fs34', 181)" class="i">AwaitTask</span>
            <span class="i">Expect</span><span class="o">.</span><span class="i">equal</span> <span class="n">231</span> <span class="i">result</span> <span class="s">&quot;231&quot;</span>
            <span class="k">let!</span> <span class="i">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 182)" onmouseover="showTip(event, 'fs4', 182)" class="i">Dag</span><span class="o">.</span><span class="i">getValueTask</span> <span class="i">cell3</span> <span class="i">dagBefore</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs33', 183)" onmouseover="showTip(event, 'fs33', 183)" class="i">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs34', 184)" onmouseover="showTip(event, 'fs34', 184)" class="i">AwaitTask</span>
            <span class="i">Expect</span><span class="o">.</span><span class="i">equal</span> <span class="n">181</span> <span class="i">result</span> <span class="s">&quot;181&quot;</span>
        }

        <span class="i">testAsync</span> <span class="s">&quot;two function&quot;</span> {
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 185)" onmouseover="showTip(event, 'fs4', 185)" class="i">Dag</span><span class="o">.</span><span class="i">addInput</span> <span class="s">&quot;z&quot;</span> <span onmouseout="hideTip(event, 'fs4', 186)" onmouseover="showTip(event, 'fs4', 186)" class="i">Dag</span><span class="o">.</span><span class="i">empty</span>
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell2</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 187)" onmouseover="showTip(event, 'fs4', 187)" class="i">Dag</span><span class="o">.</span><span class="i">addInput</span> <span class="n">7</span> <span class="i">dag</span>
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell3</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs4', 188)" onmouseover="showTip(event, 'fs4', 188)" class="i">Dag</span><span class="o">.</span><span class="i">buildFunction</span> <span class="i">dag</span> (<span class="k">fun</span> <span class="i">s</span> (<span class="i">n</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs10', 189)" onmouseover="showTip(event, 'fs10', 189)" class="i">int</span>) <span class="k">-&gt;</span> <span class="i">s</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs35', 190)" onmouseover="showTip(event, 'fs35', 190)" class="i">string</span> <span class="i">n</span>)
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 191)" onmouseover="showTip(event, 'fs4', 191)" class="i">Dag</span><span class="o">.</span><span class="i">applyCell</span> <span class="i">cell1</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 192)" onmouseover="showTip(event, 'fs4', 192)" class="i">Dag</span><span class="o">.</span><span class="i">applyCell</span> <span class="i">cell2</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 193)" onmouseover="showTip(event, 'fs4', 193)" class="i">Dag</span><span class="o">.</span><span class="i">addFunction</span>
            <span class="k">let!</span> <span class="i">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 194)" onmouseover="showTip(event, 'fs4', 194)" class="i">Dag</span><span class="o">.</span><span class="i">getValueTask</span> <span class="i">cell3</span> <span class="i">dag</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs33', 195)" onmouseover="showTip(event, 'fs33', 195)" class="i">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs34', 196)" onmouseover="showTip(event, 'fs34', 196)" class="i">AwaitTask</span>
            <span class="i">Expect</span><span class="o">.</span><span class="i">equal</span> <span class="s">&quot;z7&quot;</span> <span class="i">result</span> <span class="s">&quot;z7&quot;</span>
        }

        <span class="i">testAsync</span> <span class="s">&quot;three function with set&quot;</span> {
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 197)" onmouseover="showTip(event, 'fs4', 197)" class="i">Dag</span><span class="o">.</span><span class="i">addInput</span> <span class="s">&quot;f&quot;</span> <span onmouseout="hideTip(event, 'fs4', 198)" onmouseover="showTip(event, 'fs4', 198)" class="i">Dag</span><span class="o">.</span><span class="i">empty</span>
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell2</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 199)" onmouseover="showTip(event, 'fs4', 199)" class="i">Dag</span><span class="o">.</span><span class="i">addInput</span> <span class="n">8</span> <span class="i">dag</span>
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell3</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 200)" onmouseover="showTip(event, 'fs4', 200)" class="i">Dag</span><span class="o">.</span><span class="i">addInput</span> <span class="n">1.5</span> <span class="i">dag</span>
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell4</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs4', 201)" onmouseover="showTip(event, 'fs4', 201)" class="i">Dag</span><span class="o">.</span><span class="i">buildFunction</span> <span class="i">dag</span>
                    (<span class="k">fun</span> <span class="i">s</span> (<span class="i">n</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs10', 202)" onmouseover="showTip(event, 'fs10', 202)" class="i">int</span>) (<span class="i">f</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs36', 203)" onmouseover="showTip(event, 'fs36', 203)" class="i">float</span>) <span class="k">-&gt;</span> <span class="i">s</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs35', 204)" onmouseover="showTip(event, 'fs35', 204)" class="i">string</span> <span class="i">n</span> <span class="o">+</span> <span class="s">&quot;-&quot;</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs35', 205)" onmouseover="showTip(event, 'fs35', 205)" class="i">string</span> <span class="i">f</span>)
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 206)" onmouseover="showTip(event, 'fs4', 206)" class="i">Dag</span><span class="o">.</span><span class="i">applyCell</span> <span class="i">cell1</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 207)" onmouseover="showTip(event, 'fs4', 207)" class="i">Dag</span><span class="o">.</span><span class="i">applyCell</span> <span class="i">cell2</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 208)" onmouseover="showTip(event, 'fs4', 208)" class="i">Dag</span><span class="o">.</span><span class="i">applyCell</span> <span class="i">cell3</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 209)" onmouseover="showTip(event, 'fs4', 209)" class="i">Dag</span><span class="o">.</span><span class="i">addFunction</span>
            <span class="k">let!</span> <span class="i">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 210)" onmouseover="showTip(event, 'fs4', 210)" class="i">Dag</span><span class="o">.</span><span class="i">getValueTask</span> <span class="i">cell4</span> <span class="i">dag</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs33', 211)" onmouseover="showTip(event, 'fs33', 211)" class="i">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs34', 212)" onmouseover="showTip(event, 'fs34', 212)" class="i">AwaitTask</span>
            <span class="i">Expect</span><span class="o">.</span><span class="i">equal</span> <span class="s">&quot;f8-1.5&quot;</span> <span class="i">result</span> <span class="s">&quot;f8-1.5&quot;</span>
            <span class="k">let</span> <span class="i">dag</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 213)" onmouseover="showTip(event, 'fs4', 213)" class="i">Dag</span><span class="o">.</span><span class="i">setInput</span> <span class="i">cell1</span> <span class="s">&quot;w&quot;</span> <span class="i">dag</span>
            <span class="k">let!</span> <span class="i">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 214)" onmouseover="showTip(event, 'fs4', 214)" class="i">Dag</span><span class="o">.</span><span class="i">getValueTask</span> <span class="i">cell4</span> <span class="i">dag</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs33', 215)" onmouseover="showTip(event, 'fs33', 215)" class="i">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs34', 216)" onmouseover="showTip(event, 'fs34', 216)" class="i">AwaitTask</span>
            <span class="i">Expect</span><span class="o">.</span><span class="i">equal</span> <span class="s">&quot;w8-1.5&quot;</span> <span class="i">result</span> <span class="s">&quot;w8-1.5&quot;</span>
        }
        
        <span class="i">testAsync</span> <span class="s">&quot;chained functions multi&quot;</span> {
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 217)" onmouseover="showTip(event, 'fs4', 217)" class="i">Dag</span><span class="o">.</span><span class="i">addInput</span> <span class="s">&quot;a&quot;</span> <span onmouseout="hideTip(event, 'fs4', 218)" onmouseover="showTip(event, 'fs4', 218)" class="i">Dag</span><span class="o">.</span><span class="i">empty</span>
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell2</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 219)" onmouseover="showTip(event, 'fs4', 219)" class="i">Dag</span><span class="o">.</span><span class="i">addInput</span> <span class="n">1</span> <span class="i">dag</span>
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell3</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs4', 220)" onmouseover="showTip(event, 'fs4', 220)" class="i">Dag</span><span class="o">.</span><span class="i">buildFunction</span> <span class="i">dag</span> (<span class="k">fun</span> <span class="i">s</span> (<span class="i">n</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs10', 221)" onmouseover="showTip(event, 'fs10', 221)" class="i">int</span>) <span class="k">-&gt;</span> <span class="s">&quot;x:&quot;</span> <span class="o">+</span> <span class="i">s</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs35', 222)" onmouseover="showTip(event, 'fs35', 222)" class="i">string</span> <span class="i">n</span>)
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 223)" onmouseover="showTip(event, 'fs4', 223)" class="i">Dag</span><span class="o">.</span><span class="i">applyCell</span> <span class="i">cell1</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 224)" onmouseover="showTip(event, 'fs4', 224)" class="i">Dag</span><span class="o">.</span><span class="i">applyCell</span> <span class="i">cell2</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 225)" onmouseover="showTip(event, 'fs4', 225)" class="i">Dag</span><span class="o">.</span><span class="i">addFunction</span>
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell4</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 226)" onmouseover="showTip(event, 'fs4', 226)" class="i">Dag</span><span class="o">.</span><span class="i">addInput</span> <span class="s">&quot;b&quot;</span> <span class="i">dag</span>
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell5</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 227)" onmouseover="showTip(event, 'fs4', 227)" class="i">Dag</span><span class="o">.</span><span class="i">addInput</span> <span class="n">2</span> <span class="i">dag</span>
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell6</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs4', 228)" onmouseover="showTip(event, 'fs4', 228)" class="i">Dag</span><span class="o">.</span><span class="i">buildFunction</span> <span class="i">dag</span> (<span class="k">fun</span> <span class="i">s</span> (<span class="i">n</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs10', 229)" onmouseover="showTip(event, 'fs10', 229)" class="i">int</span>) <span class="k">-&gt;</span> <span class="s">&quot;y:&quot;</span> <span class="o">+</span> <span class="i">s</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs35', 230)" onmouseover="showTip(event, 'fs35', 230)" class="i">string</span> <span class="i">n</span>)
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 231)" onmouseover="showTip(event, 'fs4', 231)" class="i">Dag</span><span class="o">.</span><span class="i">applyCell</span> <span class="i">cell4</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 232)" onmouseover="showTip(event, 'fs4', 232)" class="i">Dag</span><span class="o">.</span><span class="i">applyCell</span> <span class="i">cell5</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 233)" onmouseover="showTip(event, 'fs4', 233)" class="i">Dag</span><span class="o">.</span><span class="i">addFunction</span>
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell7</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 234)" onmouseover="showTip(event, 'fs4', 234)" class="i">Dag</span><span class="o">.</span><span class="i">addInput</span> <span class="s">&quot;c&quot;</span> <span class="i">dag</span>
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell8</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 235)" onmouseover="showTip(event, 'fs4', 235)" class="i">Dag</span><span class="o">.</span><span class="i">addInput</span> <span class="n">3</span> <span class="i">dag</span>
            <span class="k">let</span> <span class="i">dag</span>, <span class="i">cell9</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs4', 236)" onmouseover="showTip(event, 'fs4', 236)" class="i">Dag</span><span class="o">.</span><span class="i">buildFunction</span> <span class="i">dag</span> (<span class="k">fun</span> <span class="i">s</span> (<span class="i">n</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs10', 237)" onmouseover="showTip(event, 'fs10', 237)" class="i">int</span>) <span class="k">-&gt;</span> <span class="s">&quot;z:&quot;</span> <span class="o">+</span> <span class="i">s</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs35', 238)" onmouseover="showTip(event, 'fs35', 238)" class="i">string</span> <span class="i">n</span>)
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 239)" onmouseover="showTip(event, 'fs4', 239)" class="i">Dag</span><span class="o">.</span><span class="i">applyCell</span> <span class="i">cell7</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 240)" onmouseover="showTip(event, 'fs4', 240)" class="i">Dag</span><span class="o">.</span><span class="i">applyCell</span> <span class="i">cell8</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 241)" onmouseover="showTip(event, 'fs4', 241)" class="i">Dag</span><span class="o">.</span><span class="i">addFunction</span>
            <span class="k">let</span> <span class="i">dagBefore</span>, <span class="i">cell10</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs4', 242)" onmouseover="showTip(event, 'fs4', 242)" class="i">Dag</span><span class="o">.</span><span class="i">buildFunction</span> <span class="i">dag</span>
                    (<span class="k">fun</span> <span class="i">s1</span> <span class="i">s2</span> <span class="i">s3</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs37', 243)" onmouseover="showTip(event, 'fs37', 243)" class="i">String</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs38', 244)" onmouseover="showTip(event, 'fs38', 244)" class="i">concat</span> <span class="s">&quot;|&quot;</span> [<span class="i">s1</span>;<span class="i">s2</span>;<span class="i">s3</span>])
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 245)" onmouseover="showTip(event, 'fs4', 245)" class="i">Dag</span><span class="o">.</span><span class="i">applyCell</span> <span class="i">cell3</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 246)" onmouseover="showTip(event, 'fs4', 246)" class="i">Dag</span><span class="o">.</span><span class="i">applyCell</span> <span class="i">cell6</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 247)" onmouseover="showTip(event, 'fs4', 247)" class="i">Dag</span><span class="o">.</span><span class="i">applyCell</span> <span class="i">cell9</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 248)" onmouseover="showTip(event, 'fs4', 248)" class="i">Dag</span><span class="o">.</span><span class="i">addFunction</span>
            <span class="k">let</span> <span class="i">dagAfter</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 249)" onmouseover="showTip(event, 'fs4', 249)" class="i">Dag</span><span class="o">.</span><span class="i">setInput</span> <span class="i">cell5</span> <span class="n">4</span> <span class="i">dagBefore</span>
            <span class="k">let!</span> <span class="i">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 250)" onmouseover="showTip(event, 'fs4', 250)" class="i">Dag</span><span class="o">.</span><span class="i">getValueTask</span> <span class="i">cell10</span> <span class="i">dagAfter</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs33', 251)" onmouseover="showTip(event, 'fs33', 251)" class="i">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs34', 252)" onmouseover="showTip(event, 'fs34', 252)" class="i">AwaitTask</span>
            <span class="i">Expect</span><span class="o">.</span><span class="i">equal</span> <span class="s">&quot;x:a1|y:b4|z:c3&quot;</span> <span class="i">result</span> <span class="s">&quot;x:a1|y:b4|z:c3&quot;</span>
            <span class="k">let!</span> <span class="i">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 253)" onmouseover="showTip(event, 'fs4', 253)" class="i">Dag</span><span class="o">.</span><span class="i">getValueTask</span> <span class="i">cell10</span> <span class="i">dagBefore</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs33', 254)" onmouseover="showTip(event, 'fs33', 254)" class="i">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs34', 255)" onmouseover="showTip(event, 'fs34', 255)" class="i">AwaitTask</span>
            <span class="i">Expect</span><span class="o">.</span><span class="i">equal</span> <span class="s">&quot;x:a1|y:b2|z:c3&quot;</span> <span class="i">result</span> <span class="s">&quot;x:a1|y:b2|z:c3&quot;</span>
        }
    ]
</code></pre></td>
</tr>
</table>
<h2>Conclusion</h2>
<p>This has been a very successful experiment.
The DAG has some nice features while keeping type safety.</p>
<p>The way immutability has been implemented means it is probably not best suited to fast realtime updates or very fine-grained calculations.
For more coarse-grained calculations like grids of dependent fields, where each cell represents a column of values and summaries, it could be ideal.</p>


<div class="tip" id="fs1">namespace System</div>
<div class="tip" id="fs2">namespace System.Threading</div>
<div class="tip" id="fs3">namespace System.Threading.Tasks</div>
<div class="tip" id="fs4">type Dag =<br />&#160;&#160;private {InputValues: obj array;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FunctionInputs: (Set&lt;int&gt; * Set&lt;int&gt;) array;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FunctionFunctions: (Dag -&gt; obj) array;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FunctionValues: Lazy&lt;obj&gt; array;}<br /><br />Full name: DagBlog.Dag</div>
<div class="tip" id="fs5">Dag.InputValues: obj array</div>
<div class="tip" id="fs6">type obj = Object<br /><br />Full name: Microsoft.FSharp.Core.obj</div>
<div class="tip" id="fs7">type &#39;T array = &#39;T []<br /><br />Full name: Microsoft.FSharp.Core.array&lt;_&gt;</div>
<div class="tip" id="fs8">Dag.FunctionInputs: (Set&lt;int&gt; * Set&lt;int&gt;) array</div>
<div class="tip" id="fs9">Multiple items<br />module Set<br /><br />from Microsoft.FSharp.Collections<br /><br />--------------------<br />type Set&lt;&#39;T (requires comparison)&gt; =<br />&#160;&#160;interface IComparable<br />&#160;&#160;interface IEnumerable<br />&#160;&#160;interface IEnumerable&lt;&#39;T&gt;<br />&#160;&#160;interface ICollection&lt;&#39;T&gt;<br />&#160;&#160;new : elements:seq&lt;&#39;T&gt; -&gt; Set&lt;&#39;T&gt;<br />&#160;&#160;member Add : value:&#39;T -&gt; Set&lt;&#39;T&gt;<br />&#160;&#160;member Contains : value:&#39;T -&gt; bool<br />&#160;&#160;override Equals : obj -&gt; bool<br />&#160;&#160;member IsProperSubsetOf : otherSet:Set&lt;&#39;T&gt; -&gt; bool<br />&#160;&#160;member IsProperSupersetOf : otherSet:Set&lt;&#39;T&gt; -&gt; bool<br />&#160;&#160;...<br /><br />Full name: Microsoft.FSharp.Collections.Set&lt;_&gt;<br /><br />--------------------<br />new : elements:seq&lt;&#39;T&gt; -&gt; Set&lt;&#39;T&gt;</div>
<div class="tip" id="fs10">Multiple items<br />val int : value:&#39;T -&gt; int (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.int<br /><br />--------------------<br />type int = int32<br /><br />Full name: Microsoft.FSharp.Core.int<br /><br />--------------------<br />type int&lt;&#39;Measure&gt; = int<br /><br />Full name: Microsoft.FSharp.Core.int&lt;_&gt;</div>
<div class="tip" id="fs11">Dag.FunctionFunctions: (Dag -&gt; obj) array</div>
<div class="tip" id="fs12">Dag.FunctionValues: Lazy&lt;obj&gt; array</div>
<div class="tip" id="fs13">Multiple items<br />active recognizer Lazy: Lazy&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.( |Lazy| )<br /><br />--------------------<br />type Lazy&lt;&#39;T&gt; =<br />&#160;&#160;new : unit -&gt; Lazy&lt;&#39;T&gt; + 5 overloads<br />&#160;&#160;member IsValueCreated : bool<br />&#160;&#160;member ToString : unit -&gt; string<br />&#160;&#160;member Value : &#39;T<br /><br />Full name: System.Lazy&lt;_&gt;<br /><br />--------------------<br />Lazy() : unit<br />Lazy(valueFactory: Func&lt;&#39;T&gt;) : unit<br />Lazy(isThreadSafe: bool) : unit<br />Lazy(mode: Threading.LazyThreadSafetyMode) : unit<br />Lazy(valueFactory: Func&lt;&#39;T&gt;, isThreadSafe: bool) : unit<br />Lazy(valueFactory: Func&lt;&#39;T&gt;, mode: Threading.LazyThreadSafetyMode) : unit</div>
<div class="tip" id="fs14">type Array =<br />&#160;&#160;member Clone : unit -&gt; obj<br />&#160;&#160;member CopyTo : array:Array * index:int -&gt; unit + 1 overload<br />&#160;&#160;member GetEnumerator : unit -&gt; IEnumerator<br />&#160;&#160;member GetLength : dimension:int -&gt; int<br />&#160;&#160;member GetLongLength : dimension:int -&gt; int64<br />&#160;&#160;member GetLowerBound : dimension:int -&gt; int<br />&#160;&#160;member GetUpperBound : dimension:int -&gt; int<br />&#160;&#160;member GetValue : [&lt;ParamArray&gt;] indices:int[] -&gt; obj + 7 overloads<br />&#160;&#160;member Initialize : unit -&gt; unit<br />&#160;&#160;member IsFixedSize : bool<br />&#160;&#160;...<br /><br />Full name: System.Array</div>
<div class="tip" id="fs15">Array.Resize&lt;&#39;T&gt;(array: byref&lt;&#39;T []&gt;, newSize: int) : unit</div>
<div class="tip" id="fs16">val length : array:&#39;T [] -&gt; int<br /><br />Full name: Microsoft.FSharp.Collections.Array.length</div>
<div class="tip" id="fs17">val box : value:&#39;T -&gt; obj<br /><br />Full name: Microsoft.FSharp.Core.Operators.box</div>
<div class="tip" id="fs18">module Seq<br /><br />from Microsoft.FSharp.Collections</div>
<div class="tip" id="fs19">val fold : folder:(&#39;State -&gt; &#39;T -&gt; &#39;State) -&gt; state:&#39;State -&gt; source:seq&lt;&#39;T&gt; -&gt; &#39;State<br /><br />Full name: Microsoft.FSharp.Collections.Seq.fold</div>
<div class="tip" id="fs20">val contains : element:&#39;T -&gt; set:Set&lt;&#39;T&gt; -&gt; bool (requires comparison)<br /><br />Full name: Microsoft.FSharp.Collections.Set.contains</div>
<div class="tip" id="fs21">val intersect : set1:Set&lt;&#39;T&gt; -&gt; set2:Set&lt;&#39;T&gt; -&gt; Set&lt;&#39;T&gt; (requires comparison)<br /><br />Full name: Microsoft.FSharp.Collections.Set.intersect</div>
<div class="tip" id="fs22">val isEmpty : set:Set&lt;&#39;T&gt; -&gt; bool (requires comparison)<br /><br />Full name: Microsoft.FSharp.Collections.Set.isEmpty</div>
<div class="tip" id="fs23">val not : value:bool -&gt; bool<br /><br />Full name: Microsoft.FSharp.Core.Operators.not</div>
<div class="tip" id="fs24">val add : value:&#39;T -&gt; set:Set&lt;&#39;T&gt; -&gt; Set&lt;&#39;T&gt; (requires comparison)<br /><br />Full name: Microsoft.FSharp.Collections.Set.add</div>
<div class="tip" id="fs25">val empty&lt;&#39;T (requires comparison)&gt; : Set&lt;&#39;T&gt; (requires comparison)<br /><br />Full name: Microsoft.FSharp.Collections.Set.empty</div>
<div class="tip" id="fs26">val snd : tuple:(&#39;T1 * &#39;T2) -&gt; &#39;T2<br /><br />Full name: Microsoft.FSharp.Core.Operators.snd</div>
<div class="tip" id="fs27">val copy : array:&#39;T [] -&gt; &#39;T []<br /><br />Full name: Microsoft.FSharp.Collections.Array.copy</div>
<div class="tip" id="fs28">val iter : action:(&#39;T -&gt; unit) -&gt; set:Set&lt;&#39;T&gt; -&gt; unit (requires comparison)<br /><br />Full name: Microsoft.FSharp.Collections.Set.iter</div>
<div class="tip" id="fs29">Multiple items<br />type Task =<br />&#160;&#160;new : action:Action -&gt; Task + 7 overloads<br />&#160;&#160;member AsyncState : obj<br />&#160;&#160;member ContinueWith : continuationAction:Action&lt;Task&gt; -&gt; Task + 9 overloads<br />&#160;&#160;member CreationOptions : TaskCreationOptions<br />&#160;&#160;member Dispose : unit -&gt; unit<br />&#160;&#160;member Exception : AggregateException<br />&#160;&#160;member Id : int<br />&#160;&#160;member IsCanceled : bool<br />&#160;&#160;member IsCompleted : bool<br />&#160;&#160;member IsFaulted : bool<br />&#160;&#160;...<br /><br />Full name: System.Threading.Tasks.Task<br /><br />--------------------<br />type Task&lt;&#39;TResult&gt; =<br />&#160;&#160;inherit Task<br />&#160;&#160;new : function:Func&lt;&#39;TResult&gt; -&gt; Task&lt;&#39;TResult&gt; + 7 overloads<br />&#160;&#160;member ContinueWith : continuationAction:Action&lt;Task&lt;&#39;TResult&gt;&gt; -&gt; Task + 9 overloads<br />&#160;&#160;member Result : &#39;TResult with get, set<br />&#160;&#160;static member Factory : TaskFactory&lt;&#39;TResult&gt;<br /><br />Full name: System.Threading.Tasks.Task&lt;_&gt;<br /><br />--------------------<br />Task(action: Action) : unit<br />Task(action: Action, cancellationToken: Threading.CancellationToken) : unit<br />Task(action: Action, creationOptions: TaskCreationOptions) : unit<br />Task(action: Action&lt;obj&gt;, state: obj) : unit<br />Task(action: Action, cancellationToken: Threading.CancellationToken, creationOptions: TaskCreationOptions) : unit<br />Task(action: Action&lt;obj&gt;, state: obj, cancellationToken: Threading.CancellationToken) : unit<br />Task(action: Action&lt;obj&gt;, state: obj, creationOptions: TaskCreationOptions) : unit<br />Task(action: Action&lt;obj&gt;, state: obj, cancellationToken: Threading.CancellationToken, creationOptions: TaskCreationOptions) : unit<br /><br />--------------------<br />Task(function: Func&lt;&#39;TResult&gt;) : unit<br />Task(function: Func&lt;&#39;TResult&gt;, cancellationToken: Threading.CancellationToken) : unit<br />Task(function: Func&lt;&#39;TResult&gt;, creationOptions: TaskCreationOptions) : unit<br />Task(function: Func&lt;obj,&#39;TResult&gt;, state: obj) : unit<br />Task(function: Func&lt;&#39;TResult&gt;, cancellationToken: Threading.CancellationToken, creationOptions: TaskCreationOptions) : unit<br />Task(function: Func&lt;obj,&#39;TResult&gt;, state: obj, cancellationToken: Threading.CancellationToken) : unit<br />Task(function: Func&lt;obj,&#39;TResult&gt;, state: obj, creationOptions: TaskCreationOptions) : unit<br />Task(function: Func&lt;obj,&#39;TResult&gt;, state: obj, cancellationToken: Threading.CancellationToken, creationOptions: TaskCreationOptions) : unit</div>
<div class="tip" id="fs30">type bool = Boolean<br /><br />Full name: Microsoft.FSharp.Core.bool</div>
<div class="tip" id="fs31">val typeof&lt;&#39;T&gt; : Type<br /><br />Full name: Microsoft.FSharp.Core.Operators.typeof</div>
<div class="tip" id="fs32">val x : int<br /><br />Full name: DagBlog.Gen.x</div>
<div class="tip" id="fs33">Multiple items<br />type Async<br />static member AsBeginEnd : computation:(&#39;Arg -&gt; Async&lt;&#39;T&gt;) -&gt; (&#39;Arg * AsyncCallback * obj -&gt; IAsyncResult) * (IAsyncResult -&gt; &#39;T) * (IAsyncResult -&gt; unit)<br />static member AwaitEvent : event:IEvent&lt;&#39;Del,&#39;T&gt; * ?cancelAction:(unit -&gt; unit) -&gt; Async&lt;&#39;T&gt; (requires delegate and &#39;Del :&gt; Delegate)<br />static member AwaitIAsyncResult : iar:IAsyncResult * ?millisecondsTimeout:int -&gt; Async&lt;bool&gt;<br />static member AwaitTask : task:Task -&gt; Async&lt;unit&gt;<br />static member AwaitTask : task:Task&lt;&#39;T&gt; -&gt; Async&lt;&#39;T&gt;<br />static member AwaitWaitHandle : waitHandle:WaitHandle * ?millisecondsTimeout:int -&gt; Async&lt;bool&gt;<br />static member CancelDefaultToken : unit -&gt; unit<br />static member Catch : computation:Async&lt;&#39;T&gt; -&gt; Async&lt;Choice&lt;&#39;T,exn&gt;&gt;<br />static member FromBeginEnd : beginAction:(AsyncCallback * obj -&gt; IAsyncResult) * endAction:(IAsyncResult -&gt; &#39;T) * ?cancelAction:(unit -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />static member FromBeginEnd : arg:&#39;Arg1 * beginAction:(&#39;Arg1 * AsyncCallback * obj -&gt; IAsyncResult) * endAction:(IAsyncResult -&gt; &#39;T) * ?cancelAction:(unit -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />static member FromBeginEnd : arg1:&#39;Arg1 * arg2:&#39;Arg2 * beginAction:(&#39;Arg1 * &#39;Arg2 * AsyncCallback * obj -&gt; IAsyncResult) * endAction:(IAsyncResult -&gt; &#39;T) * ?cancelAction:(unit -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />static member FromBeginEnd : arg1:&#39;Arg1 * arg2:&#39;Arg2 * arg3:&#39;Arg3 * beginAction:(&#39;Arg1 * &#39;Arg2 * &#39;Arg3 * AsyncCallback * obj -&gt; IAsyncResult) * endAction:(IAsyncResult -&gt; &#39;T) * ?cancelAction:(unit -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />static member FromContinuations : callback:((&#39;T -&gt; unit) * (exn -&gt; unit) * (OperationCanceledException -&gt; unit) -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />static member Ignore : computation:Async&lt;&#39;T&gt; -&gt; Async&lt;unit&gt;<br />static member OnCancel : interruption:(unit -&gt; unit) -&gt; Async&lt;IDisposable&gt;<br />static member Parallel : computations:seq&lt;Async&lt;&#39;T&gt;&gt; -&gt; Async&lt;&#39;T []&gt;<br />static member RunSynchronously : computation:Async&lt;&#39;T&gt; * ?timeout:int * ?cancellationToken:CancellationToken -&gt; &#39;T<br />static member Sleep : millisecondsDueTime:int -&gt; Async&lt;unit&gt;<br />static member Start : computation:Async&lt;unit&gt; * ?cancellationToken:CancellationToken -&gt; unit<br />static member StartAsTask : computation:Async&lt;&#39;T&gt; * ?taskCreationOptions:TaskCreationOptions * ?cancellationToken:CancellationToken -&gt; Task&lt;&#39;T&gt;<br />static member StartChild : computation:Async&lt;&#39;T&gt; * ?millisecondsTimeout:int -&gt; Async&lt;Async&lt;&#39;T&gt;&gt;<br />static member StartChildAsTask : computation:Async&lt;&#39;T&gt; * ?taskCreationOptions:TaskCreationOptions -&gt; Async&lt;Task&lt;&#39;T&gt;&gt;<br />static member StartImmediate : computation:Async&lt;unit&gt; * ?cancellationToken:CancellationToken -&gt; unit<br />static member StartWithContinuations : computation:Async&lt;&#39;T&gt; * continuation:(&#39;T -&gt; unit) * exceptionContinuation:(exn -&gt; unit) * cancellationContinuation:(OperationCanceledException -&gt; unit) * ?cancellationToken:CancellationToken -&gt; unit<br />static member SwitchToContext : syncContext:SynchronizationContext -&gt; Async&lt;unit&gt;<br />static member SwitchToNewThread : unit -&gt; Async&lt;unit&gt;<br />static member SwitchToThreadPool : unit -&gt; Async&lt;unit&gt;<br />static member TryCancelled : computation:Async&lt;&#39;T&gt; * compensation:(OperationCanceledException -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />static member CancellationToken : Async&lt;CancellationToken&gt;<br />static member DefaultCancellationToken : CancellationToken<br /><br />Full name: Microsoft.FSharp.Control.Async<br /><br />--------------------<br />type Async&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Control.Async&lt;_&gt;</div>
<div class="tip" id="fs34">static member Async.AwaitTask : task:Task -&gt; Async&lt;unit&gt;<br />static member Async.AwaitTask : task:Task&lt;&#39;T&gt; -&gt; Async&lt;&#39;T&gt;</div>
<div class="tip" id="fs35">Multiple items<br />val string : value:&#39;T -&gt; string<br /><br />Full name: Microsoft.FSharp.Core.Operators.string<br /><br />--------------------<br />type string = String<br /><br />Full name: Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs36">Multiple items<br />val float : value:&#39;T -&gt; float (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.float<br /><br />--------------------<br />type float = Double<br /><br />Full name: Microsoft.FSharp.Core.float<br /><br />--------------------<br />type float&lt;&#39;Measure&gt; = float<br /><br />Full name: Microsoft.FSharp.Core.float&lt;_&gt;</div>
<div class="tip" id="fs37">Multiple items<br />type String =<br />&#160;&#160;new : value:char -&gt; string + 7 overloads<br />&#160;&#160;member Chars : int -&gt; char<br />&#160;&#160;member Clone : unit -&gt; obj<br />&#160;&#160;member CompareTo : value:obj -&gt; int + 1 overload<br />&#160;&#160;member Contains : value:string -&gt; bool<br />&#160;&#160;member CopyTo : sourceIndex:int * destination:char[] * destinationIndex:int * count:int -&gt; unit<br />&#160;&#160;member EndsWith : value:string -&gt; bool + 2 overloads<br />&#160;&#160;member Equals : obj:obj -&gt; bool + 2 overloads<br />&#160;&#160;member GetEnumerator : unit -&gt; CharEnumerator<br />&#160;&#160;member GetHashCode : unit -&gt; int<br />&#160;&#160;...<br /><br />Full name: System.String<br /><br />--------------------<br />String(value: nativeptr&lt;char&gt;) : unit<br />String(value: nativeptr&lt;sbyte&gt;) : unit<br />String(value: char []) : unit<br />String(c: char, count: int) : unit<br />String(value: nativeptr&lt;char&gt;, startIndex: int, length: int) : unit<br />String(value: nativeptr&lt;sbyte&gt;, startIndex: int, length: int) : unit<br />String(value: char [], startIndex: int, length: int) : unit<br />String(value: nativeptr&lt;sbyte&gt;, startIndex: int, length: int, enc: Text.Encoding) : unit</div>
<div class="tip" id="fs38">val concat : sep:string -&gt; strings:seq&lt;string&gt; -&gt; string<br /><br />Full name: Microsoft.FSharp.Core.String.concat</div>
