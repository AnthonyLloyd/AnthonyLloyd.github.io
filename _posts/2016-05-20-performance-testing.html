---
layout: post
title: "Modularity from Lazy Evaluation - Performance Testing"
tags: [modularity,higher-order,lazy evaluation,performance,testing]
description: ""
keywords: f#, fsharp, functional, higher-order functions, lazy evaluation, modularity, performance, testing
---
<p>This is the second example of how higher-order functions and lazy evaluation can reduce complexity and lead to more modular software.</p>
<h2>Background</h2>
<p>To performance test code a number of iterations have to be performed so a more stable average can be compared.
The number of iterations is usually an input and chosen arbitrarily.</p>
<p>This post covers how statistical tests can be used to remove the need for this input.
This simplifies performance testing and makes the results more robust and useful.</p>
<h2>Statistics</h2>
<p>Lazy evaluation can be used to produce an <a href="https://en.wikipedia.org/wiki/Algorithms_for_calculating_variance#Online_algorithm">online</a> sample statistics sequence.</p>
<p>The <a href="https://en.wikipedia.org/wiki/Standard_error">standard error</a> of a sample mean is given by</p>
<p><span class="math">\[SE_{\bar{x}} = \frac{s}{\sqrt{n}}\]</span></p>
<p>The statistics sequence can be iterated until a given mean standard error level of accuracy is achieved.</p>
<p><a href="https://en.wikipedia.org/wiki/Welch%27s_t-test">Welch's t-test</a> for comparing the mean of two samples is given by</p>
<p><span class="math">\[t = \frac{\bar{x}_1-\bar{x}_2}{\sqrt{f_1+f_2}}\]</span></p>
<p><span class="math">\[df = \frac{\left(f_1+f_2\right)^2}{\frac{f_1^2}{n_1-1}+\frac{f_2^2}{n_2-1}}\]</span></p>
<p><span class="math">\[f_i = \frac{s_i^2}{n_i}\]</span></p>
<p>where <span class="math">\(n\)</span> is the sample size, <span class="math">\(\bar{x}\)</span> is the sample mean, <span class="math">\(s^2\)</span> is the sample variance, <span class="math">\(t\)</span> is Welch's t statistic, and <span class="math">\(df\)</span> is the degrees of freedom of the statistic.</p>
<p>Welch's t statistic can be compared to the inverse Student's t-distribution for a given confidence level to test if the sample means are different.</p>
<p>Two sample statistics sequences can be iterated together and compared to decide if one mean is larger than the other.</p>
<h2>Statistics code</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
<span class="l">31: </span>
<span class="l">32: </span>
<span class="l">33: </span>
<span class="l">34: </span>
<span class="l">35: </span>
<span class="l">36: </span>
<span class="l">37: </span>
<span class="l">38: </span>
<span class="l">39: </span>
<span class="l">40: </span>
<span class="l">41: </span>
<span class="l">42: </span>
<span class="l">43: </span>
<span class="l">44: </span>
<span class="l">45: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs6', 9)" onmouseover="showTip(event, 'fs6', 9)" class="t">SampleStatistics</span> <span class="o">=</span> {<span onmouseout="hideTip(event, 'fs7', 10)" onmouseover="showTip(event, 'fs7', 10)" class="i">N</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs8', 11)" onmouseover="showTip(event, 'fs8', 11)" class="t">int</span>;<span onmouseout="hideTip(event, 'fs9', 12)" onmouseover="showTip(event, 'fs9', 12)" class="i">Mean</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs10', 13)" onmouseover="showTip(event, 'fs10', 13)" class="t">float</span>;<span onmouseout="hideTip(event, 'fs11', 14)" onmouseover="showTip(event, 'fs11', 14)" class="i">Variance</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs10', 15)" onmouseover="showTip(event, 'fs10', 15)" class="t">float</span>}
                        <span class="k">member</span> <span onmouseout="hideTip(event, 'fs12', 16)" onmouseover="showTip(event, 'fs12', 16)" class="i">s</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 17)" onmouseover="showTip(event, 'fs13', 17)" class="i">StandardDeviation</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs14', 18)" onmouseover="showTip(event, 'fs14', 18)" class="f">sqrt</span> <span onmouseout="hideTip(event, 'fs12', 19)" onmouseover="showTip(event, 'fs12', 19)" class="i">s</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 20)" onmouseover="showTip(event, 'fs11', 20)" class="i">Variance</span>
                        <span class="k">member</span> <span onmouseout="hideTip(event, 'fs12', 21)" onmouseover="showTip(event, 'fs12', 21)" class="i">s</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs15', 22)" onmouseover="showTip(event, 'fs15', 22)" class="i">MeanStandardError</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs14', 23)" onmouseover="showTip(event, 'fs14', 23)" class="f">sqrt</span>(<span onmouseout="hideTip(event, 'fs12', 24)" onmouseover="showTip(event, 'fs12', 24)" class="i">s</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 25)" onmouseover="showTip(event, 'fs11', 25)" class="i">Variance</span><span class="o">/</span><span onmouseout="hideTip(event, 'fs10', 26)" onmouseover="showTip(event, 'fs10', 26)" class="f">float</span> <span onmouseout="hideTip(event, 'fs12', 27)" onmouseover="showTip(event, 'fs12', 27)" class="i">s</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs7', 28)" onmouseover="showTip(event, 'fs7', 28)" class="i">N</span>)

<span class="k">type</span> <span onmouseout="hideTip(event, 'fs16', 29)" onmouseover="showTip(event, 'fs16', 29)" class="t">WelchStatistic</span> <span class="o">=</span> {<span onmouseout="hideTip(event, 'fs17', 30)" onmouseover="showTip(event, 'fs17', 30)" class="i">T</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs10', 31)" onmouseover="showTip(event, 'fs10', 31)" class="t">float</span>;<span onmouseout="hideTip(event, 'fs18', 32)" onmouseover="showTip(event, 'fs18', 32)" class="i">DF</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs8', 33)" onmouseover="showTip(event, 'fs8', 33)" class="t">int</span>}

<span class="k">module</span> <span class="t">Statistics</span> <span class="o">=</span>
    <span class="c">/// Online statistics sequence for a given sample sequence.</span>
    <span class="k">let</span> <span class="k">inline</span> <span onmouseout="hideTip(event, 'fs19', 34)" onmouseover="showTip(event, 'fs19', 34)" class="f">sampleStatistics</span> <span onmouseout="hideTip(event, 'fs20', 35)" onmouseover="showTip(event, 'fs20', 35)" class="i">s</span> <span class="o">=</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs21', 36)" onmouseover="showTip(event, 'fs21', 36)" class="f">calc</span> (<span onmouseout="hideTip(event, 'fs22', 37)" onmouseover="showTip(event, 'fs22', 37)" class="i">n</span>,<span onmouseout="hideTip(event, 'fs23', 38)" onmouseover="showTip(event, 'fs23', 38)" class="i">m</span>,<span onmouseout="hideTip(event, 'fs24', 39)" onmouseover="showTip(event, 'fs24', 39)" class="i">s</span>) <span onmouseout="hideTip(event, 'fs25', 40)" onmouseover="showTip(event, 'fs25', 40)" class="i">x</span> <span class="o">=</span>
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs26', 41)" onmouseover="showTip(event, 'fs26', 41)" class="i">m&#39;</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs23', 42)" onmouseover="showTip(event, 'fs23', 42)" class="i">m</span><span class="o">+</span>(<span onmouseout="hideTip(event, 'fs25', 43)" onmouseover="showTip(event, 'fs25', 43)" class="i">x</span><span class="o">-</span><span onmouseout="hideTip(event, 'fs23', 44)" onmouseover="showTip(event, 'fs23', 44)" class="i">m</span>)<span class="o">/</span><span onmouseout="hideTip(event, 'fs10', 45)" onmouseover="showTip(event, 'fs10', 45)" class="f">float</span>(<span onmouseout="hideTip(event, 'fs22', 46)" onmouseover="showTip(event, 'fs22', 46)" class="i">n</span><span class="o">+</span><span class="n">1</span>)
            <span onmouseout="hideTip(event, 'fs22', 47)" onmouseover="showTip(event, 'fs22', 47)" class="i">n</span><span class="o">+</span><span class="n">1</span>,<span onmouseout="hideTip(event, 'fs26', 48)" onmouseover="showTip(event, 'fs26', 48)" class="i">m&#39;</span>,<span onmouseout="hideTip(event, 'fs24', 49)" onmouseover="showTip(event, 'fs24', 49)" class="i">s</span><span class="o">+</span>(<span onmouseout="hideTip(event, 'fs25', 50)" onmouseover="showTip(event, 'fs25', 50)" class="i">x</span><span class="o">-</span><span onmouseout="hideTip(event, 'fs23', 51)" onmouseover="showTip(event, 'fs23', 51)" class="i">m</span>)<span class="o">*</span>(<span onmouseout="hideTip(event, 'fs25', 52)" onmouseover="showTip(event, 'fs25', 52)" class="i">x</span><span class="o">-</span><span onmouseout="hideTip(event, 'fs26', 53)" onmouseover="showTip(event, 'fs26', 53)" class="i">m&#39;</span>)
        <span onmouseout="hideTip(event, 'fs27', 54)" onmouseover="showTip(event, 'fs27', 54)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs28', 55)" onmouseover="showTip(event, 'fs28', 55)" class="f">map</span> <span onmouseout="hideTip(event, 'fs10', 56)" onmouseover="showTip(event, 'fs10', 56)" class="f">float</span> <span onmouseout="hideTip(event, 'fs20', 57)" onmouseover="showTip(event, 'fs20', 57)" class="i">s</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs27', 58)" onmouseover="showTip(event, 'fs27', 58)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs29', 59)" onmouseover="showTip(event, 'fs29', 59)" class="f">scan</span> <span onmouseout="hideTip(event, 'fs21', 60)" onmouseover="showTip(event, 'fs21', 60)" class="f">calc</span> (<span class="n">0</span>,<span class="n">0.0</span>,<span class="n">0.0</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs27', 61)" onmouseover="showTip(event, 'fs27', 61)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs30', 62)" onmouseover="showTip(event, 'fs30', 62)" class="f">skip</span> <span class="n">3</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs27', 63)" onmouseover="showTip(event, 'fs27', 63)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs28', 64)" onmouseover="showTip(event, 'fs28', 64)" class="f">map</span> (<span class="k">fun</span> (<span onmouseout="hideTip(event, 'fs22', 65)" onmouseover="showTip(event, 'fs22', 65)" class="i">n</span>,<span onmouseout="hideTip(event, 'fs23', 66)" onmouseover="showTip(event, 'fs23', 66)" class="i">m</span>,<span onmouseout="hideTip(event, 'fs24', 67)" onmouseover="showTip(event, 'fs24', 67)" class="i">s</span>) <span class="k">-&gt;</span> {<span onmouseout="hideTip(event, 'fs7', 68)" onmouseover="showTip(event, 'fs7', 68)" class="i">N</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs22', 69)" onmouseover="showTip(event, 'fs22', 69)" class="i">n</span>;<span class="i">Mean</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs23', 70)" onmouseover="showTip(event, 'fs23', 70)" class="i">m</span>;<span class="i">Variance</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs24', 71)" onmouseover="showTip(event, 'fs24', 71)" class="i">s</span><span class="o">/</span><span onmouseout="hideTip(event, 'fs10', 72)" onmouseover="showTip(event, 'fs10', 72)" class="f">float</span>(<span onmouseout="hideTip(event, 'fs22', 73)" onmouseover="showTip(event, 'fs22', 73)" class="i">n</span><span class="o">-</span><span class="n">1</span>)})

    <span class="c">/// Scale the statistics for a given underlying random variable change of scale.</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs31', 74)" onmouseover="showTip(event, 'fs31', 74)" class="f">scale</span> <span onmouseout="hideTip(event, 'fs32', 75)" onmouseover="showTip(event, 'fs32', 75)" class="i">f</span> <span onmouseout="hideTip(event, 'fs12', 76)" onmouseover="showTip(event, 'fs12', 76)" class="i">s</span> <span class="o">=</span> {<span onmouseout="hideTip(event, 'fs12', 77)" onmouseover="showTip(event, 'fs12', 77)" class="i">s</span> <span class="k">with</span> <span class="i">Mean</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs12', 78)" onmouseover="showTip(event, 'fs12', 78)" class="i">s</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 79)" onmouseover="showTip(event, 'fs9', 79)" class="i">Mean</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs32', 80)" onmouseover="showTip(event, 'fs32', 80)" class="i">f</span>;<span class="i">Variance</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs12', 81)" onmouseover="showTip(event, 'fs12', 81)" class="i">s</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 82)" onmouseover="showTip(event, 'fs11', 82)" class="i">Variance</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs4', 83)" onmouseover="showTip(event, 'fs4', 83)" class="f">sqr</span> <span onmouseout="hideTip(event, 'fs32', 84)" onmouseover="showTip(event, 'fs32', 84)" class="i">f</span>}

    <span class="c">/// Single iteration statistics for a given iteration count and total statistics.</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs33', 85)" onmouseover="showTip(event, 'fs33', 85)" class="f">singleIteration</span> <span onmouseout="hideTip(event, 'fs34', 86)" onmouseover="showTip(event, 'fs34', 86)" class="i">ic</span> <span onmouseout="hideTip(event, 'fs12', 87)" onmouseover="showTip(event, 'fs12', 87)" class="i">s</span> <span class="o">=</span> {<span onmouseout="hideTip(event, 'fs7', 88)" onmouseover="showTip(event, 'fs7', 88)" class="i">N</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs12', 89)" onmouseover="showTip(event, 'fs12', 89)" class="i">s</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs7', 90)" onmouseover="showTip(event, 'fs7', 90)" class="i">N</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs34', 91)" onmouseover="showTip(event, 'fs34', 91)" class="i">ic</span>;<span class="i">Mean</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs12', 92)" onmouseover="showTip(event, 'fs12', 92)" class="i">s</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 93)" onmouseover="showTip(event, 'fs9', 93)" class="i">Mean</span><span class="o">/</span><span onmouseout="hideTip(event, 'fs10', 94)" onmouseover="showTip(event, 'fs10', 94)" class="f">float</span> <span onmouseout="hideTip(event, 'fs34', 95)" onmouseover="showTip(event, 'fs34', 95)" class="i">ic</span>;<span class="i">Variance</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs12', 96)" onmouseover="showTip(event, 'fs12', 96)" class="i">s</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 97)" onmouseover="showTip(event, 'fs11', 97)" class="i">Variance</span><span class="o">/</span><span onmouseout="hideTip(event, 'fs10', 98)" onmouseover="showTip(event, 'fs10', 98)" class="f">float</span> <span onmouseout="hideTip(event, 'fs34', 99)" onmouseover="showTip(event, 'fs34', 99)" class="i">ic</span>}

    <span class="c">/// Student&#39;s t-distribution inverse for 0.1% confidence level by degrees of freedom.</span>
    <span class="k">let</span> <span class="k">private</span> <span onmouseout="hideTip(event, 'fs35', 100)" onmouseover="showTip(event, 'fs35', 100)" class="i">tInv</span> <span class="o">=</span> 
        [|<span class="n">636.6</span>;<span class="n">31.60</span>;<span class="n">12.92</span>;<span class="n">8.610</span>;<span class="n">6.869</span>;<span class="n">5.959</span>;<span class="n">5.408</span>;<span class="n">5.041</span>;<span class="n">4.781</span>;<span class="n">4.587</span>;<span class="n">4.437</span>;<span class="n">4.318</span>;<span class="n">4.221</span>;
          <span class="n">4.140</span>;<span class="n">4.073</span>;<span class="n">4.015</span>;<span class="n">3.965</span>;<span class="n">3.922</span>;<span class="n">3.883</span>;<span class="n">3.850</span>;<span class="n">3.819</span>;<span class="n">3.792</span>;<span class="n">3.768</span>;<span class="n">3.745</span>;<span class="n">3.725</span>;<span class="n">3.707</span>;
          <span class="n">3.690</span>;<span class="n">3.674</span>;<span class="n">3.659</span>;<span class="n">3.646</span>;<span class="n">3.633</span>;<span class="n">3.622</span>;<span class="n">3.611</span>;<span class="n">3.601</span>;<span class="n">3.591</span>;<span class="n">3.582</span>;<span class="n">3.574</span>;<span class="n">3.566</span>;<span class="n">3.558</span>;
          <span class="n">3.551</span>;<span class="n">3.544</span>;<span class="n">3.538</span>;<span class="n">3.532</span>;<span class="n">3.526</span>;<span class="n">3.520</span>;<span class="n">3.515</span>;<span class="n">3.510</span>;<span class="n">3.505</span>;<span class="n">3.500</span>;<span class="n">3.496</span>;<span class="n">3.492</span>;<span class="n">3.488</span>;
          <span class="n">3.484</span>;<span class="n">3.480</span>;<span class="n">3.476</span>;<span class="n">3.473</span>;<span class="n">3.470</span>;<span class="n">3.466</span>;<span class="n">3.463</span>;<span class="n">3.460</span>;<span class="n">3.457</span>;<span class="n">3.454</span>;<span class="n">3.452</span>;<span class="n">3.449</span>;<span class="n">3.447</span>;
          <span class="n">3.444</span>;<span class="n">3.442</span>;<span class="n">3.439</span>;<span class="n">3.437</span>;<span class="n">3.435</span>;<span class="n">3.433</span>;<span class="n">3.431</span>;<span class="n">3.429</span>;<span class="n">3.427</span>;<span class="n">3.425</span>;<span class="n">3.423</span>;<span class="n">3.421</span>;<span class="n">3.420</span>;
          <span class="n">3.418</span>;<span class="n">3.416</span>;<span class="n">3.415</span>;<span class="n">3.413</span>;<span class="n">3.412</span>;<span class="n">3.410</span>;<span class="n">3.409</span>;<span class="n">3.407</span>;<span class="n">3.406</span>;<span class="n">3.405</span>;<span class="n">3.403</span>;<span class="n">3.402</span>;<span class="n">3.401</span>;
          <span class="n">3.399</span>;<span class="n">3.398</span>;<span class="n">3.397</span>;<span class="n">3.396</span>;<span class="n">3.395</span>;<span class="n">3.394</span>;<span class="n">3.393</span>;<span class="n">3.392</span>;<span class="n">3.390</span>|]

    <span class="c">/// Welch&#39;s t-test statistic for two given sample statistics.</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs36', 101)" onmouseover="showTip(event, 'fs36', 101)" class="f">welchStatistic</span> <span onmouseout="hideTip(event, 'fs37', 102)" onmouseover="showTip(event, 'fs37', 102)" class="i">s1</span> <span onmouseout="hideTip(event, 'fs38', 103)" onmouseover="showTip(event, 'fs38', 103)" class="i">s2</span> <span class="o">=</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs39', 104)" onmouseover="showTip(event, 'fs39', 104)" class="i">f1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs37', 105)" onmouseover="showTip(event, 'fs37', 105)" class="i">s1</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 106)" onmouseover="showTip(event, 'fs11', 106)" class="i">Variance</span><span class="o">/</span><span onmouseout="hideTip(event, 'fs10', 107)" onmouseover="showTip(event, 'fs10', 107)" class="f">float</span> <span onmouseout="hideTip(event, 'fs37', 108)" onmouseover="showTip(event, 'fs37', 108)" class="i">s1</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs7', 109)" onmouseover="showTip(event, 'fs7', 109)" class="i">N</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs40', 110)" onmouseover="showTip(event, 'fs40', 110)" class="i">f2</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs38', 111)" onmouseover="showTip(event, 'fs38', 111)" class="i">s2</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 112)" onmouseover="showTip(event, 'fs11', 112)" class="i">Variance</span><span class="o">/</span><span onmouseout="hideTip(event, 'fs10', 113)" onmouseover="showTip(event, 'fs10', 113)" class="f">float</span> <span onmouseout="hideTip(event, 'fs38', 114)" onmouseover="showTip(event, 'fs38', 114)" class="i">s2</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs7', 115)" onmouseover="showTip(event, 'fs7', 115)" class="i">N</span>
        {
            <span onmouseout="hideTip(event, 'fs17', 116)" onmouseover="showTip(event, 'fs17', 116)" class="i">T</span> <span class="o">=</span> (<span onmouseout="hideTip(event, 'fs37', 117)" onmouseover="showTip(event, 'fs37', 117)" class="i">s1</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 118)" onmouseover="showTip(event, 'fs9', 118)" class="i">Mean</span><span class="o">-</span><span onmouseout="hideTip(event, 'fs38', 119)" onmouseover="showTip(event, 'fs38', 119)" class="i">s2</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 120)" onmouseover="showTip(event, 'fs9', 120)" class="i">Mean</span>)<span class="o">/</span><span onmouseout="hideTip(event, 'fs14', 121)" onmouseover="showTip(event, 'fs14', 121)" class="f">sqrt</span>(<span onmouseout="hideTip(event, 'fs39', 122)" onmouseover="showTip(event, 'fs39', 122)" class="i">f1</span><span class="o">+</span><span onmouseout="hideTip(event, 'fs40', 123)" onmouseover="showTip(event, 'fs40', 123)" class="i">f2</span>)
            <span class="i">DF</span><span class="o">=</span> <span class="k">if</span> <span onmouseout="hideTip(event, 'fs39', 124)" onmouseover="showTip(event, 'fs39', 124)" class="i">f1</span><span class="o">=</span><span class="n">0.0</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs40', 125)" onmouseover="showTip(event, 'fs40', 125)" class="i">f2</span><span class="o">=</span><span class="n">0.0</span> <span class="k">then</span> <span class="n">1</span>
                <span class="k">else</span> <span onmouseout="hideTip(event, 'fs4', 126)" onmouseover="showTip(event, 'fs4', 126)" class="f">sqr</span>(<span onmouseout="hideTip(event, 'fs39', 127)" onmouseover="showTip(event, 'fs39', 127)" class="i">f1</span><span class="o">+</span><span onmouseout="hideTip(event, 'fs40', 128)" onmouseover="showTip(event, 'fs40', 128)" class="i">f2</span>)<span class="o">/</span>(<span onmouseout="hideTip(event, 'fs4', 129)" onmouseover="showTip(event, 'fs4', 129)" class="f">sqr</span> <span onmouseout="hideTip(event, 'fs39', 130)" onmouseover="showTip(event, 'fs39', 130)" class="i">f1</span><span class="o">/</span><span onmouseout="hideTip(event, 'fs10', 131)" onmouseover="showTip(event, 'fs10', 131)" class="f">float</span>(<span onmouseout="hideTip(event, 'fs37', 132)" onmouseover="showTip(event, 'fs37', 132)" class="i">s1</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs7', 133)" onmouseover="showTip(event, 'fs7', 133)" class="i">N</span><span class="o">-</span><span class="n">1</span>)<span class="o">+</span><span onmouseout="hideTip(event, 'fs4', 134)" onmouseover="showTip(event, 'fs4', 134)" class="f">sqr</span> <span onmouseout="hideTip(event, 'fs40', 135)" onmouseover="showTip(event, 'fs40', 135)" class="i">f2</span><span class="o">/</span><span onmouseout="hideTip(event, 'fs10', 136)" onmouseover="showTip(event, 'fs10', 136)" class="f">float</span>(<span onmouseout="hideTip(event, 'fs38', 137)" onmouseover="showTip(event, 'fs38', 137)" class="i">s2</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs7', 138)" onmouseover="showTip(event, 'fs7', 138)" class="i">N</span><span class="o">-</span><span class="n">1</span>)) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs8', 139)" onmouseover="showTip(event, 'fs8', 139)" class="f">int</span>
        }

    <span class="c">/// Welch&#39;s t-test for a given Welch statistic to a confidence level of 0.1%.</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs41', 140)" onmouseover="showTip(event, 'fs41', 140)" class="f">welchTest</span> <span onmouseout="hideTip(event, 'fs42', 141)" onmouseover="showTip(event, 'fs42', 141)" class="i">w</span> <span class="o">=</span>
        <span class="k">if</span> <span onmouseout="hideTip(event, 'fs43', 142)" onmouseover="showTip(event, 'fs43', 142)" class="f">abs</span> <span onmouseout="hideTip(event, 'fs42', 143)" onmouseover="showTip(event, 'fs42', 143)" class="i">w</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs17', 144)" onmouseover="showTip(event, 'fs17', 144)" class="i">T</span> <span class="o">&lt;</span> <span onmouseout="hideTip(event, 'fs44', 145)" onmouseover="showTip(event, 'fs44', 145)" class="t">Array</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs45', 146)" onmouseover="showTip(event, 'fs45', 146)" class="f">get</span> <span onmouseout="hideTip(event, 'fs35', 147)" onmouseover="showTip(event, 'fs35', 147)" class="i">tInv</span> (<span onmouseout="hideTip(event, 'fs46', 148)" onmouseover="showTip(event, 'fs46', 148)" class="f">min</span> <span onmouseout="hideTip(event, 'fs42', 149)" onmouseover="showTip(event, 'fs42', 149)" class="i">w</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs18', 150)" onmouseover="showTip(event, 'fs18', 150)" class="i">DF</span> (<span onmouseout="hideTip(event, 'fs44', 151)" onmouseover="showTip(event, 'fs44', 151)" class="t">Array</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs47', 152)" onmouseover="showTip(event, 'fs47', 152)" class="f">length</span> <span onmouseout="hideTip(event, 'fs35', 153)" onmouseover="showTip(event, 'fs35', 153)" class="i">tInv</span>) <span class="o">-</span> <span class="n">1</span>) <span class="k">then</span> <span class="n">0</span> <span class="k">else</span> <span onmouseout="hideTip(event, 'fs48', 154)" onmouseover="showTip(event, 'fs48', 154)" class="f">sign</span> <span onmouseout="hideTip(event, 'fs42', 155)" onmouseover="showTip(event, 'fs42', 155)" class="i">w</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs17', 156)" onmouseover="showTip(event, 'fs17', 156)" class="i">T</span>
</code></pre></td>
</tr>
</table>
<h2>Performance testing</h2>
<p>Three performance metrics will be created: time, memory allocated, and garbage collections.</p>
<p>Each of these will be repeated until at least the metric target is reached to ensure it is reliably measuring the metric and not any framework overhead.</p>
<p>Statistics functions will be created for each of the metrics to measure a function accurate to a mean standard error of 1%.</p>
<p>Compare functions will be created for each of the metrics to compare two functions to a confidence level of 0.1%.
The functions will be considered equal after 10,000 degrees of freedom have past without a positive test result.</p>
<h2>Performance testing code</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
<span class="l">31: </span>
<span class="l">32: </span>
<span class="l">33: </span>
<span class="l">34: </span>
<span class="l">35: </span>
<span class="l">36: </span>
<span class="l">37: </span>
<span class="l">38: </span>
<span class="l">39: </span>
<span class="l">40: </span>
<span class="l">41: </span>
<span class="l">42: </span>
<span class="l">43: </span>
<span class="l">44: </span>
<span class="l">45: </span>
<span class="l">46: </span>
<span class="l">47: </span>
<span class="l">48: </span>
<span class="l">49: </span>
<span class="l">50: </span>
<span class="l">51: </span>
<span class="l">52: </span>
<span class="l">53: </span>
<span class="l">54: </span>
<span class="l">55: </span>
<span class="l">56: </span>
<span class="l">57: </span>
<span class="l">58: </span>
<span class="l">59: </span>
<span class="l">60: </span>
<span class="l">61: </span>
<span class="l">62: </span>
<span class="l">63: </span>
<span class="l">64: </span>
<span class="l">65: </span>
<span class="l">66: </span>
<span class="l">67: </span>
<span class="l">68: </span>
<span class="l">69: </span>
<span class="l">70: </span>
<span class="l">71: </span>
<span class="l">72: </span>
<span class="l">73: </span>
<span class="l">74: </span>
<span class="l">75: </span>
<span class="l">76: </span>
<span class="l">77: </span>
<span class="l">78: </span>
<span class="l">79: </span>
<span class="l">80: </span>
<span class="l">81: </span>
<span class="l">82: </span>
<span class="l">83: </span>
<span class="l">84: </span>
<span class="l">85: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">module</span> <span onmouseout="hideTip(event, 'fs50', 158)" onmouseover="showTip(event, 'fs50', 158)" class="t">Performance</span> <span class="o">=</span>
    <span class="c">/// Find the iteration count to get to at least the metric target.</span>
    <span class="k">let</span> <span class="k">inline</span> <span class="k">private</span> <span onmouseout="hideTip(event, 'fs51', 159)" onmouseover="showTip(event, 'fs51', 159)" class="f">targetIterationCount</span> <span onmouseout="hideTip(event, 'fs52', 160)" onmouseover="showTip(event, 'fs52', 160)" class="f">metric</span> <span onmouseout="hideTip(event, 'fs53', 161)" onmouseover="showTip(event, 'fs53', 161)" class="i">metricTarget</span> <span onmouseout="hideTip(event, 'fs54', 162)" onmouseover="showTip(event, 'fs54', 162)" class="i">f</span> <span class="o">=</span>
        <span class="k">let</span> <span class="k">rec</span> <span onmouseout="hideTip(event, 'fs55', 163)" onmouseover="showTip(event, 'fs55', 163)" class="f">find</span> <span onmouseout="hideTip(event, 'fs22', 164)" onmouseover="showTip(event, 'fs22', 164)" class="i">n</span> <span class="o">=</span>
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs56', 165)" onmouseover="showTip(event, 'fs56', 165)" class="i">item</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs52', 166)" onmouseover="showTip(event, 'fs52', 166)" class="f">metric</span> <span onmouseout="hideTip(event, 'fs22', 167)" onmouseover="showTip(event, 'fs22', 167)" class="i">n</span> <span onmouseout="hideTip(event, 'fs54', 168)" onmouseover="showTip(event, 'fs54', 168)" class="i">f</span>
            <span class="k">if</span> (<span onmouseout="hideTip(event, 'fs56', 169)" onmouseover="showTip(event, 'fs56', 169)" class="i">item</span><span class="o">&lt;&lt;&lt;</span><span class="n">3</span>)<span class="o">&gt;</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs53', 170)" onmouseover="showTip(event, 'fs53', 170)" class="i">metricTarget</span> <span class="k">then</span> <span onmouseout="hideTip(event, 'fs22', 171)" onmouseover="showTip(event, 'fs22', 171)" class="i">n</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs8', 172)" onmouseover="showTip(event, 'fs8', 172)" class="f">int</span> <span onmouseout="hideTip(event, 'fs53', 173)" onmouseover="showTip(event, 'fs53', 173)" class="i">metricTarget</span><span class="o">/</span><span onmouseout="hideTip(event, 'fs8', 174)" onmouseover="showTip(event, 'fs8', 174)" class="f">int</span> <span onmouseout="hideTip(event, 'fs56', 175)" onmouseover="showTip(event, 'fs56', 175)" class="i">item</span><span class="o">+</span><span class="n">1</span>
            <span class="k">else</span> <span onmouseout="hideTip(event, 'fs55', 176)" onmouseover="showTip(event, 'fs55', 176)" class="f">find</span> (<span onmouseout="hideTip(event, 'fs22', 177)" onmouseover="showTip(event, 'fs22', 177)" class="i">n</span><span class="o">*</span><span class="n">10</span>)
        <span onmouseout="hideTip(event, 'fs55', 178)" onmouseover="showTip(event, 'fs55', 178)" class="f">find</span> <span class="n">1</span>
        
    <span class="c">/// Create and iterate a statistics sequence for a metric until the given accuracy.</span>
    <span class="k">let</span> <span class="k">inline</span> <span class="k">private</span> <span onmouseout="hideTip(event, 'fs57', 179)" onmouseover="showTip(event, 'fs57', 179)" class="f">measureStatistics</span> (<span onmouseout="hideTip(event, 'fs58', 180)" onmouseover="showTip(event, 'fs58', 180)" class="f">metric</span>,<span onmouseout="hideTip(event, 'fs59', 181)" onmouseover="showTip(event, 'fs59', 181)" class="i">metricTarget</span>) <span onmouseout="hideTip(event, 'fs60', 182)" onmouseover="showTip(event, 'fs60', 182)" class="i">relativeError</span> <span onmouseout="hideTip(event, 'fs54', 183)" onmouseover="showTip(event, 'fs54', 183)" class="i">f</span> <span class="o">=</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs34', 184)" onmouseover="showTip(event, 'fs34', 184)" class="i">ic</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs51', 185)" onmouseover="showTip(event, 'fs51', 185)" class="f">targetIterationCount</span> <span onmouseout="hideTip(event, 'fs58', 186)" onmouseover="showTip(event, 'fs58', 186)" class="f">metric</span> <span onmouseout="hideTip(event, 'fs59', 187)" onmouseover="showTip(event, 'fs59', 187)" class="i">metricTarget</span> <span onmouseout="hideTip(event, 'fs54', 188)" onmouseover="showTip(event, 'fs54', 188)" class="i">f</span>
        <span onmouseout="hideTip(event, 'fs27', 189)" onmouseover="showTip(event, 'fs27', 189)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs61', 190)" onmouseover="showTip(event, 'fs61', 190)" class="f">initInfinite</span> (<span class="k">fun</span> _ <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs58', 191)" onmouseover="showTip(event, 'fs58', 191)" class="f">metric</span> <span onmouseout="hideTip(event, 'fs34', 192)" onmouseover="showTip(event, 'fs34', 192)" class="i">ic</span> <span onmouseout="hideTip(event, 'fs54', 193)" onmouseover="showTip(event, 'fs54', 193)" class="i">f</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs19', 194)" onmouseover="showTip(event, 'fs19', 194)" class="f">sampleStatistics</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs27', 195)" onmouseover="showTip(event, 'fs27', 195)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs28', 196)" onmouseover="showTip(event, 'fs28', 196)" class="f">map</span> (<span onmouseout="hideTip(event, 'fs33', 197)" onmouseover="showTip(event, 'fs33', 197)" class="f">singleIteration</span> <span onmouseout="hideTip(event, 'fs34', 198)" onmouseover="showTip(event, 'fs34', 198)" class="i">ic</span>)
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs27', 199)" onmouseover="showTip(event, 'fs27', 199)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs62', 200)" onmouseover="showTip(event, 'fs62', 200)" class="f">find</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs12', 201)" onmouseover="showTip(event, 'fs12', 201)" class="i">s</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs12', 202)" onmouseover="showTip(event, 'fs12', 202)" class="i">s</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs63', 203)" onmouseover="showTip(event, 'fs63', 203)" class="i">MeanStandardError</span><span class="o">&lt;=</span><span onmouseout="hideTip(event, 'fs60', 204)" onmouseover="showTip(event, 'fs60', 204)" class="i">relativeError</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs12', 205)" onmouseover="showTip(event, 'fs12', 205)" class="i">s</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 206)" onmouseover="showTip(event, 'fs9', 206)" class="i">Mean</span>)

    <span class="c">/// Create and iterate two statistics sequences until the metric means can be compared.</span>
    <span class="k">let</span> <span class="k">inline</span> <span class="k">private</span> <span onmouseout="hideTip(event, 'fs64', 207)" onmouseover="showTip(event, 'fs64', 207)" class="f">measureCompare</span> (<span onmouseout="hideTip(event, 'fs65', 208)" onmouseover="showTip(event, 'fs65', 208)" class="f">metric</span>,<span onmouseout="hideTip(event, 'fs66', 209)" onmouseover="showTip(event, 'fs66', 209)" class="i">metricTarget</span>) <span onmouseout="hideTip(event, 'fs67', 210)" onmouseover="showTip(event, 'fs67', 210)" class="f">f1</span> <span onmouseout="hideTip(event, 'fs68', 211)" onmouseover="showTip(event, 'fs68', 211)" class="f">f2</span> <span class="o">=</span>
        <span class="k">if</span> <span onmouseout="hideTip(event, 'fs67', 212)" onmouseover="showTip(event, 'fs67', 212)" class="f">f1</span> <span onmouseout="hideTip(event, 'fs69', 213)" onmouseover="showTip(event, 'fs69', 213)" class="f">id</span><span class="o">&lt;&gt;</span><span onmouseout="hideTip(event, 'fs68', 214)" onmouseover="showTip(event, 'fs68', 214)" class="f">f2</span> <span onmouseout="hideTip(event, 'fs69', 215)" onmouseover="showTip(event, 'fs69', 215)" class="f">id</span> <span class="k">then</span> <span onmouseout="hideTip(event, 'fs70', 216)" onmouseover="showTip(event, 'fs70', 216)" class="f">failwith</span> <span class="s">&quot;function results are not the same&quot;</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs34', 217)" onmouseover="showTip(event, 'fs34', 217)" class="i">ic</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs51', 218)" onmouseover="showTip(event, 'fs51', 218)" class="f">targetIterationCount</span> <span onmouseout="hideTip(event, 'fs65', 219)" onmouseover="showTip(event, 'fs65', 219)" class="f">metric</span> <span onmouseout="hideTip(event, 'fs66', 220)" onmouseover="showTip(event, 'fs66', 220)" class="i">metricTarget</span> <span onmouseout="hideTip(event, 'fs68', 221)" onmouseover="showTip(event, 'fs68', 221)" class="f">f2</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs71', 222)" onmouseover="showTip(event, 'fs71', 222)" class="f">stats</span> <span onmouseout="hideTip(event, 'fs72', 223)" onmouseover="showTip(event, 'fs72', 223)" class="f">f</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs27', 224)" onmouseover="showTip(event, 'fs27', 224)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs61', 225)" onmouseover="showTip(event, 'fs61', 225)" class="f">initInfinite</span> (<span class="k">fun</span> _ <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs65', 226)" onmouseover="showTip(event, 'fs65', 226)" class="f">metric</span> <span onmouseout="hideTip(event, 'fs34', 227)" onmouseover="showTip(event, 'fs34', 227)" class="i">ic</span> <span onmouseout="hideTip(event, 'fs72', 228)" onmouseover="showTip(event, 'fs72', 228)" class="f">f</span>)
                      <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs19', 229)" onmouseover="showTip(event, 'fs19', 229)" class="f">sampleStatistics</span>
                      <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs27', 230)" onmouseover="showTip(event, 'fs27', 230)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs28', 231)" onmouseover="showTip(event, 'fs28', 231)" class="f">map</span> (<span onmouseout="hideTip(event, 'fs33', 232)" onmouseover="showTip(event, 'fs33', 232)" class="f">singleIteration</span> <span onmouseout="hideTip(event, 'fs34', 233)" onmouseover="showTip(event, 'fs34', 233)" class="i">ic</span>)
        <span onmouseout="hideTip(event, 'fs27', 234)" onmouseover="showTip(event, 'fs27', 234)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs73', 235)" onmouseover="showTip(event, 'fs73', 235)" class="f">map2</span> <span onmouseout="hideTip(event, 'fs36', 236)" onmouseover="showTip(event, 'fs36', 236)" class="f">welchStatistic</span> (<span onmouseout="hideTip(event, 'fs71', 237)" onmouseover="showTip(event, 'fs71', 237)" class="f">stats</span> <span onmouseout="hideTip(event, 'fs67', 238)" onmouseover="showTip(event, 'fs67', 238)" class="f">f1</span>) (<span onmouseout="hideTip(event, 'fs71', 239)" onmouseover="showTip(event, 'fs71', 239)" class="f">stats</span> <span onmouseout="hideTip(event, 'fs68', 240)" onmouseover="showTip(event, 'fs68', 240)" class="f">f2</span>)
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs27', 241)" onmouseover="showTip(event, 'fs27', 241)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs74', 242)" onmouseover="showTip(event, 'fs74', 242)" class="f">pick</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs42', 243)" onmouseover="showTip(event, 'fs42', 243)" class="i">w</span> <span class="k">-&gt;</span>
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs75', 244)" onmouseover="showTip(event, 'fs75', 244)" class="i">maxDF</span> <span class="o">=</span> <span class="n">10000</span>
            <span class="k">if</span> <span onmouseout="hideTip(event, 'fs42', 245)" onmouseover="showTip(event, 'fs42', 245)" class="i">w</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs18', 246)" onmouseover="showTip(event, 'fs18', 246)" class="i">DF</span><span class="o">&gt;</span><span onmouseout="hideTip(event, 'fs75', 247)" onmouseover="showTip(event, 'fs75', 247)" class="i">maxDF</span> <span class="k">then</span> <span onmouseout="hideTip(event, 'fs76', 248)" onmouseover="showTip(event, 'fs76', 248)" class="p">Some</span> <span class="n">0</span> <span class="k">else</span> <span class="k">match</span> <span onmouseout="hideTip(event, 'fs41', 249)" onmouseover="showTip(event, 'fs41', 249)" class="f">welchTest</span> <span onmouseout="hideTip(event, 'fs42', 250)" onmouseover="showTip(event, 'fs42', 250)" class="i">w</span> <span class="k">with</span> |<span class="n">0</span><span class="k">-&gt;</span><span onmouseout="hideTip(event, 'fs77', 251)" onmouseover="showTip(event, 'fs77', 251)" class="p">None</span> |<span onmouseout="hideTip(event, 'fs78', 252)" onmouseover="showTip(event, 'fs78', 252)" class="i">c</span><span class="k">-&gt;</span><span onmouseout="hideTip(event, 'fs76', 253)" onmouseover="showTip(event, 'fs76', 253)" class="p">Some</span> <span onmouseout="hideTip(event, 'fs78', 254)" onmouseover="showTip(event, 'fs78', 254)" class="i">c</span>)

    <span class="c">/// Measure the given function for the iteration count using the start and end metric.</span>
    <span class="k">let</span> <span class="k">inline</span> <span class="k">private</span> <span onmouseout="hideTip(event, 'fs79', 255)" onmouseover="showTip(event, 'fs79', 255)" class="f">measureMetric</span> <span onmouseout="hideTip(event, 'fs80', 256)" onmouseover="showTip(event, 'fs80', 256)" class="f">startMetric</span> <span onmouseout="hideTip(event, 'fs81', 257)" onmouseover="showTip(event, 'fs81', 257)" class="f">endMetric</span> <span onmouseout="hideTip(event, 'fs34', 258)" onmouseover="showTip(event, 'fs34', 258)" class="i">ic</span> <span onmouseout="hideTip(event, 'fs82', 259)" onmouseover="showTip(event, 'fs82', 259)" class="f">f</span> <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs83', 260)" onmouseover="showTip(event, 'fs83', 260)" class="t">GC</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs84', 261)" onmouseover="showTip(event, 'fs84', 261)" class="f">Collect</span>()
        <span onmouseout="hideTip(event, 'fs83', 262)" onmouseover="showTip(event, 'fs83', 262)" class="t">GC</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs85', 263)" onmouseover="showTip(event, 'fs85', 263)" class="f">WaitForPendingFinalizers</span>()
        <span onmouseout="hideTip(event, 'fs83', 264)" onmouseover="showTip(event, 'fs83', 264)" class="t">GC</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs84', 265)" onmouseover="showTip(event, 'fs84', 265)" class="f">Collect</span>()
        <span class="k">let</span> <span class="k">mutable</span> <span onmouseout="hideTip(event, 'fs86', 266)" onmouseover="showTip(event, 'fs86', 266)" class="v">total</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs87', 267)" onmouseover="showTip(event, 'fs87', 267)" class="t">LanguagePrimitives</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs88', 268)" onmouseover="showTip(event, 'fs88', 268)" class="i">GenericZero</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs89', 269)" onmouseover="showTip(event, 'fs89', 269)" class="f">measurer</span> <span onmouseout="hideTip(event, 'fs90', 270)" onmouseover="showTip(event, 'fs90', 270)" class="f">toMeasure</span> <span class="o">=</span>
            <span class="k">fun</span> <span onmouseout="hideTip(event, 'fs91', 271)" onmouseover="showTip(event, 'fs91', 271)" class="i">args</span> <span class="k">-&gt;</span>
                <span class="k">let</span> <span onmouseout="hideTip(event, 'fs92', 272)" onmouseover="showTip(event, 'fs92', 272)" class="i">s</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs80', 273)" onmouseover="showTip(event, 'fs80', 273)" class="f">startMetric</span>()
                <span class="k">let</span> <span onmouseout="hideTip(event, 'fs93', 274)" onmouseover="showTip(event, 'fs93', 274)" class="i">ret</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs90', 275)" onmouseover="showTip(event, 'fs90', 275)" class="f">toMeasure</span> <span onmouseout="hideTip(event, 'fs91', 276)" onmouseover="showTip(event, 'fs91', 276)" class="i">args</span>
                <span class="k">let</span> <span onmouseout="hideTip(event, 'fs94', 277)" onmouseover="showTip(event, 'fs94', 277)" class="i">m</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs81', 278)" onmouseover="showTip(event, 'fs81', 278)" class="f">endMetric</span> <span onmouseout="hideTip(event, 'fs92', 279)" onmouseover="showTip(event, 'fs92', 279)" class="i">s</span>
                <span onmouseout="hideTip(event, 'fs86', 280)" onmouseover="showTip(event, 'fs86', 280)" class="v">total</span><span class="o">&lt;-</span><span onmouseout="hideTip(event, 'fs86', 281)" onmouseover="showTip(event, 'fs86', 281)" class="v">total</span><span class="o">+</span><span onmouseout="hideTip(event, 'fs94', 282)" onmouseover="showTip(event, 'fs94', 282)" class="i">m</span>
                <span onmouseout="hideTip(event, 'fs93', 283)" onmouseover="showTip(event, 'fs93', 283)" class="i">ret</span>
        <span class="k">let</span> <span class="k">rec</span> <span onmouseout="hideTip(event, 'fs95', 284)" onmouseover="showTip(event, 'fs95', 284)" class="f">loop</span> <span onmouseout="hideTip(event, 'fs96', 285)" onmouseover="showTip(event, 'fs96', 285)" class="i">i</span> <span class="o">=</span> <span class="k">if</span> <span onmouseout="hideTip(event, 'fs96', 286)" onmouseover="showTip(event, 'fs96', 286)" class="i">i</span><span class="o">&gt;</span><span class="n">0</span> <span class="k">then</span> <span onmouseout="hideTip(event, 'fs82', 287)" onmouseover="showTip(event, 'fs82', 287)" class="f">f</span> <span onmouseout="hideTip(event, 'fs89', 288)" onmouseover="showTip(event, 'fs89', 288)" class="f">measurer</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs97', 289)" onmouseover="showTip(event, 'fs97', 289)" class="f">ignore</span>; <span onmouseout="hideTip(event, 'fs95', 290)" onmouseover="showTip(event, 'fs95', 290)" class="f">loop</span> (<span onmouseout="hideTip(event, 'fs96', 291)" onmouseover="showTip(event, 'fs96', 291)" class="i">i</span><span class="o">-</span><span class="n">1</span>)
        <span onmouseout="hideTip(event, 'fs95', 292)" onmouseover="showTip(event, 'fs95', 292)" class="f">loop</span> <span onmouseout="hideTip(event, 'fs34', 293)" onmouseover="showTip(event, 'fs34', 293)" class="i">ic</span>
        <span onmouseout="hideTip(event, 'fs86', 294)" onmouseover="showTip(event, 'fs86', 294)" class="v">total</span>
    
    <span class="c">/// Measure the time metric for the given function and iteration count.</span>
    <span class="k">let</span> <span class="k">private</span> <span onmouseout="hideTip(event, 'fs98', 295)" onmouseover="showTip(event, 'fs98', 295)" class="f">timeMetric</span> <span onmouseout="hideTip(event, 'fs34', 296)" onmouseover="showTip(event, 'fs34', 296)" class="i">ic</span> <span onmouseout="hideTip(event, 'fs99', 297)" onmouseover="showTip(event, 'fs99', 297)" class="f">f</span> <span class="o">=</span> 
        <span onmouseout="hideTip(event, 'fs79', 298)" onmouseover="showTip(event, 'fs79', 298)" class="f">measureMetric</span> <span onmouseout="hideTip(event, 'fs100', 299)" onmouseover="showTip(event, 'fs100', 299)" class="t">Stopwatch</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs101', 300)" onmouseover="showTip(event, 'fs101', 300)" class="f">GetTimestamp</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs102', 301)" onmouseover="showTip(event, 'fs102', 301)" class="i">t</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs100', 302)" onmouseover="showTip(event, 'fs100', 302)" class="t">Stopwatch</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs101', 303)" onmouseover="showTip(event, 'fs101', 303)" class="f">GetTimestamp</span>()<span class="o">-</span><span onmouseout="hideTip(event, 'fs102', 304)" onmouseover="showTip(event, 'fs102', 304)" class="i">t</span>) <span onmouseout="hideTip(event, 'fs34', 305)" onmouseover="showTip(event, 'fs34', 305)" class="i">ic</span> <span onmouseout="hideTip(event, 'fs99', 306)" onmouseover="showTip(event, 'fs99', 306)" class="f">f</span>
        
    <span class="c">/// Measure the memory metric for the given function and iteration count.</span>
    <span class="k">let</span> <span class="k">private</span> <span onmouseout="hideTip(event, 'fs103', 307)" onmouseover="showTip(event, 'fs103', 307)" class="f">memoryMetric</span> <span onmouseout="hideTip(event, 'fs34', 308)" onmouseover="showTip(event, 'fs34', 308)" class="i">ic</span> <span onmouseout="hideTip(event, 'fs99', 309)" onmouseover="showTip(event, 'fs99', 309)" class="f">f</span> <span class="o">=</span>
        <span class="k">let</span> <span class="k">inline</span> <span onmouseout="hideTip(event, 'fs104', 310)" onmouseover="showTip(event, 'fs104', 310)" class="f">startMetric</span>() <span class="o">=</span>
            <span class="k">if</span> <span onmouseout="hideTip(event, 'fs83', 311)" onmouseover="showTip(event, 'fs83', 311)" class="i">GC</span><span class="o">.</span><span class="i">TryStartNoGCRegion</span>(<span class="n">1L</span><span class="o">&lt;&lt;&lt;</span><span class="n">22</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs105', 312)" onmouseover="showTip(event, 'fs105', 312)" class="f">not</span> <span class="k">then</span> <span onmouseout="hideTip(event, 'fs70', 313)" onmouseover="showTip(event, 'fs70', 313)" class="f">failwith</span> <span class="s">&quot;TryStartNoGCRegion&quot;</span>
            <span onmouseout="hideTip(event, 'fs83', 314)" onmouseover="showTip(event, 'fs83', 314)" class="t">GC</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs106', 315)" onmouseover="showTip(event, 'fs106', 315)" class="f">GetTotalMemory</span> <span class="k">false</span>
        <span class="k">let</span> <span class="k">inline</span> <span onmouseout="hideTip(event, 'fs107', 316)" onmouseover="showTip(event, 'fs107', 316)" class="f">endMetric</span> <span onmouseout="hideTip(event, 'fs108', 317)" onmouseover="showTip(event, 'fs108', 317)" class="i">s</span> <span class="o">=</span>
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs102', 318)" onmouseover="showTip(event, 'fs102', 318)" class="i">t</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs83', 319)" onmouseover="showTip(event, 'fs83', 319)" class="t">GC</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs106', 320)" onmouseover="showTip(event, 'fs106', 320)" class="f">GetTotalMemory</span> <span class="k">false</span> <span class="o">-</span> <span onmouseout="hideTip(event, 'fs108', 321)" onmouseover="showTip(event, 'fs108', 321)" class="i">s</span>
            <span onmouseout="hideTip(event, 'fs83', 322)" onmouseover="showTip(event, 'fs83', 322)" class="i">GC</span><span class="o">.</span><span class="i">EndNoGCRegion</span>()
            <span onmouseout="hideTip(event, 'fs102', 323)" onmouseover="showTip(event, 'fs102', 323)" class="i">t</span>
        <span onmouseout="hideTip(event, 'fs79', 324)" onmouseover="showTip(event, 'fs79', 324)" class="f">measureMetric</span> <span onmouseout="hideTip(event, 'fs104', 325)" onmouseover="showTip(event, 'fs104', 325)" class="f">startMetric</span> <span onmouseout="hideTip(event, 'fs107', 326)" onmouseover="showTip(event, 'fs107', 326)" class="f">endMetric</span> <span onmouseout="hideTip(event, 'fs34', 327)" onmouseover="showTip(event, 'fs34', 327)" class="i">ic</span> <span onmouseout="hideTip(event, 'fs99', 328)" onmouseover="showTip(event, 'fs99', 328)" class="f">f</span>

    <span class="c">/// Measure the garbage collection metric for the given function and iteration count.</span>
    <span class="k">let</span> <span class="k">private</span> <span onmouseout="hideTip(event, 'fs109', 329)" onmouseover="showTip(event, 'fs109', 329)" class="f">garbageMetric</span> <span onmouseout="hideTip(event, 'fs34', 330)" onmouseover="showTip(event, 'fs34', 330)" class="i">ic</span> <span onmouseout="hideTip(event, 'fs99', 331)" onmouseover="showTip(event, 'fs99', 331)" class="f">f</span> <span class="o">=</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs110', 332)" onmouseover="showTip(event, 'fs110', 332)" class="f">count</span>() <span class="o">=</span> <span onmouseout="hideTip(event, 'fs83', 333)" onmouseover="showTip(event, 'fs83', 333)" class="t">GC</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs111', 334)" onmouseover="showTip(event, 'fs111', 334)" class="f">CollectionCount</span> <span class="n">0</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs83', 335)" onmouseover="showTip(event, 'fs83', 335)" class="t">GC</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs111', 336)" onmouseover="showTip(event, 'fs111', 336)" class="f">CollectionCount</span> <span class="n">1</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs83', 337)" onmouseover="showTip(event, 'fs83', 337)" class="t">GC</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs111', 338)" onmouseover="showTip(event, 'fs111', 338)" class="f">CollectionCount</span> <span class="n">2</span>
        <span onmouseout="hideTip(event, 'fs79', 339)" onmouseover="showTip(event, 'fs79', 339)" class="f">measureMetric</span> <span onmouseout="hideTip(event, 'fs110', 340)" onmouseover="showTip(event, 'fs110', 340)" class="f">count</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs112', 341)" onmouseover="showTip(event, 'fs112', 341)" class="i">s</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs110', 342)" onmouseover="showTip(event, 'fs110', 342)" class="f">count</span>()<span class="o">-</span><span onmouseout="hideTip(event, 'fs112', 343)" onmouseover="showTip(event, 'fs112', 343)" class="i">s</span>) <span onmouseout="hideTip(event, 'fs34', 344)" onmouseover="showTip(event, 'fs34', 344)" class="i">ic</span> <span onmouseout="hideTip(event, 'fs99', 345)" onmouseover="showTip(event, 'fs99', 345)" class="f">f</span>

    <span class="c">/// Measure definitions which are a metric together with a metric target.</span>
    <span class="k">let</span> <span class="k">private</span> <span onmouseout="hideTip(event, 'fs113', 346)" onmouseover="showTip(event, 'fs113', 346)" class="i">oneMillisecond</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs100', 347)" onmouseover="showTip(event, 'fs100', 347)" class="t">Stopwatch</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs114', 348)" onmouseover="showTip(event, 'fs114', 348)" class="i">Frequency</span><span class="o">/</span><span class="n">1000L</span>
    <span class="k">let</span> <span class="k">private</span> <span onmouseout="hideTip(event, 'fs115', 349)" onmouseover="showTip(event, 'fs115', 349)" class="i">timeMeasure</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs98', 350)" onmouseover="showTip(event, 'fs98', 350)" class="f">timeMetric</span>, <span onmouseout="hideTip(event, 'fs113', 351)" onmouseover="showTip(event, 'fs113', 351)" class="i">oneMillisecond</span>
    <span class="k">let</span> <span class="k">private</span> <span onmouseout="hideTip(event, 'fs116', 352)" onmouseover="showTip(event, 'fs116', 352)" class="i">memoryMeasure</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs103', 353)" onmouseover="showTip(event, 'fs103', 353)" class="f">memoryMetric</span>, <span class="n">1024L</span> <span class="c">//1KB</span>
    <span class="k">let</span> <span class="k">private</span> <span onmouseout="hideTip(event, 'fs117', 354)" onmouseover="showTip(event, 'fs117', 354)" class="i">garbageMeasure</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs109', 355)" onmouseover="showTip(event, 'fs109', 355)" class="f">garbageMetric</span>, <span class="n">10</span>

    <span class="c">/// Time statistics for a given function accurate to a mean standard error of 1%.</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs118', 356)" onmouseover="showTip(event, 'fs118', 356)" class="f">timeStatistics</span> <span onmouseout="hideTip(event, 'fs99', 357)" onmouseover="showTip(event, 'fs99', 357)" class="f">f</span> <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs57', 358)" onmouseover="showTip(event, 'fs57', 358)" class="f">measureStatistics</span> <span onmouseout="hideTip(event, 'fs115', 359)" onmouseover="showTip(event, 'fs115', 359)" class="i">timeMeasure</span> <span class="n">0.01</span> <span onmouseout="hideTip(event, 'fs99', 360)" onmouseover="showTip(event, 'fs99', 360)" class="f">f</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs31', 361)" onmouseover="showTip(event, 'fs31', 361)" class="f">scale</span> (<span class="n">1.0</span><span class="o">/</span><span onmouseout="hideTip(event, 'fs10', 362)" onmouseover="showTip(event, 'fs10', 362)" class="f">float</span> <span onmouseout="hideTip(event, 'fs100', 363)" onmouseover="showTip(event, 'fs100', 363)" class="t">Stopwatch</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs114', 364)" onmouseover="showTip(event, 'fs114', 364)" class="i">Frequency</span>)
    <span class="c">/// Memory statistics for a given function accurate to a mean standard error of 1%.</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs119', 365)" onmouseover="showTip(event, 'fs119', 365)" class="f">memoryStatistics</span> <span onmouseout="hideTip(event, 'fs99', 366)" onmouseover="showTip(event, 'fs99', 366)" class="f">f</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs57', 367)" onmouseover="showTip(event, 'fs57', 367)" class="f">measureStatistics</span> <span onmouseout="hideTip(event, 'fs116', 368)" onmouseover="showTip(event, 'fs116', 368)" class="i">memoryMeasure</span> <span class="n">0.01</span> <span onmouseout="hideTip(event, 'fs99', 369)" onmouseover="showTip(event, 'fs99', 369)" class="f">f</span>
    <span class="c">/// GC count statistics for a given function accurate to a mean standard error of 1%.</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs120', 370)" onmouseover="showTip(event, 'fs120', 370)" class="f">gcCountStatistics</span> <span onmouseout="hideTip(event, 'fs99', 371)" onmouseover="showTip(event, 'fs99', 371)" class="f">f</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs57', 372)" onmouseover="showTip(event, 'fs57', 372)" class="f">measureStatistics</span> <span onmouseout="hideTip(event, 'fs117', 373)" onmouseover="showTip(event, 'fs117', 373)" class="i">garbageMeasure</span> <span class="n">0.01</span> <span onmouseout="hideTip(event, 'fs99', 374)" onmouseover="showTip(event, 'fs99', 374)" class="f">f</span>
    
    <span class="c">/// Time comparison for two given functions to a confidence level of 0.1%.</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs121', 375)" onmouseover="showTip(event, 'fs121', 375)" class="f">timeCompare</span> <span onmouseout="hideTip(event, 'fs122', 376)" onmouseover="showTip(event, 'fs122', 376)" class="f">f1</span> <span onmouseout="hideTip(event, 'fs123', 377)" onmouseover="showTip(event, 'fs123', 377)" class="f">f2</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs64', 378)" onmouseover="showTip(event, 'fs64', 378)" class="f">measureCompare</span> <span onmouseout="hideTip(event, 'fs115', 379)" onmouseover="showTip(event, 'fs115', 379)" class="i">timeMeasure</span> <span onmouseout="hideTip(event, 'fs122', 380)" onmouseover="showTip(event, 'fs122', 380)" class="f">f1</span> <span onmouseout="hideTip(event, 'fs123', 381)" onmouseover="showTip(event, 'fs123', 381)" class="f">f2</span>
    <span class="c">/// Memory comparison for two given functions to a confidence level of 0.1%.</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs124', 382)" onmouseover="showTip(event, 'fs124', 382)" class="f">memoryCompare</span> <span onmouseout="hideTip(event, 'fs122', 383)" onmouseover="showTip(event, 'fs122', 383)" class="f">f1</span> <span onmouseout="hideTip(event, 'fs123', 384)" onmouseover="showTip(event, 'fs123', 384)" class="f">f2</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs64', 385)" onmouseover="showTip(event, 'fs64', 385)" class="f">measureCompare</span> <span onmouseout="hideTip(event, 'fs116', 386)" onmouseover="showTip(event, 'fs116', 386)" class="i">memoryMeasure</span> <span onmouseout="hideTip(event, 'fs122', 387)" onmouseover="showTip(event, 'fs122', 387)" class="f">f1</span> <span onmouseout="hideTip(event, 'fs123', 388)" onmouseover="showTip(event, 'fs123', 388)" class="f">f2</span>
    <span class="c">/// GC count comparison for two given functions to a confidence level of 0.1%.</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs125', 389)" onmouseover="showTip(event, 'fs125', 389)" class="f">gcCountCompare</span> <span onmouseout="hideTip(event, 'fs122', 390)" onmouseover="showTip(event, 'fs122', 390)" class="f">f1</span> <span onmouseout="hideTip(event, 'fs123', 391)" onmouseover="showTip(event, 'fs123', 391)" class="f">f2</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs64', 392)" onmouseover="showTip(event, 'fs64', 392)" class="f">measureCompare</span> <span onmouseout="hideTip(event, 'fs117', 393)" onmouseover="showTip(event, 'fs117', 393)" class="i">garbageMeasure</span> <span onmouseout="hideTip(event, 'fs122', 394)" onmouseover="showTip(event, 'fs122', 394)" class="f">f1</span> <span onmouseout="hideTip(event, 'fs123', 395)" onmouseover="showTip(event, 'fs123', 395)" class="f">f2</span>
</code></pre></td>
</tr>
</table>
<h2>Conclusion</h2>
<p>The performance testing functions have a very simple signature.
The statistics functions just take the function to be measured.
The compare functions just take the two functions to be compared.</p>
<p>The statistics functions give an overview of a function's performance.
These can easily be combined to produce a useful performance report.</p>
<p>The compare functions can be used in unit tests since they are a relative test and hence should be independent of the machine.
They are also fast since they stop as soon as the given confidence level is achieved.
The compare functions could also be extended to test if a function is a given percentage better than another.</p>
<p>Modularity from higher-order functions and lazy evaluation together with a little maths have produced a simple yet powerful performance testing library.</p>
<p>UPDATED (2016-10-21):
The functions have been extended to be able to measure a sub function of the passed in functions.
The sub function can be called multiple times and the metric will be aggregated.
An example of it's use can be found in the Outliers and MAD <a href="{% post_url 2016-10-21-MAD-Outliers %}">post</a>.</p>


<div class="tip" id="fs1">namespace System</div>
<div class="tip" id="fs2">namespace System.Diagnostics</div>
<div class="tip" id="fs3">Multiple items<br />type AutoOpenAttribute =<br />&#160;&#160;inherit Attribute<br />&#160;&#160;new : unit -&gt; AutoOpenAttribute<br />&#160;&#160;new : path:string -&gt; AutoOpenAttribute<br />&#160;&#160;member Path : string<br /><br />Full name: Microsoft.FSharp.Core.AutoOpenAttribute<br /><br />--------------------<br />new : unit -&gt; AutoOpenAttribute<br />new : path:string -&gt; AutoOpenAttribute</div>
<div class="tip" id="fs4">val sqr : x:&#39;a -&gt; &#39;b (requires member ( * ))<br /><br />Full name: Main.Functions.sqr</div>
<div class="tip" id="fs5">val x : &#39;a (requires member ( * ))</div>
<div class="tip" id="fs6">type SampleStatistics =<br />&#160;&#160;{N: int;<br />&#160;&#160;&#160;Mean: float;<br />&#160;&#160;&#160;Variance: float;}<br />&#160;&#160;member MeanStandardError : float<br />&#160;&#160;member StandardDeviation : float<br /><br />Full name: Main.SampleStatistics</div>
<div class="tip" id="fs7">SampleStatistics.N: int</div>
<div class="tip" id="fs8">Multiple items<br />val int : value:&#39;T -&gt; int (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.int<br /><br />--------------------<br />type int = int32<br /><br />Full name: Microsoft.FSharp.Core.int<br /><br />--------------------<br />type int&lt;&#39;Measure&gt; = int<br /><br />Full name: Microsoft.FSharp.Core.int&lt;_&gt;</div>
<div class="tip" id="fs9">SampleStatistics.Mean: float</div>
<div class="tip" id="fs10">Multiple items<br />val float : value:&#39;T -&gt; float (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.float<br /><br />--------------------<br />type float = Double<br /><br />Full name: Microsoft.FSharp.Core.float<br /><br />--------------------<br />type float&lt;&#39;Measure&gt; = float<br /><br />Full name: Microsoft.FSharp.Core.float&lt;_&gt;</div>
<div class="tip" id="fs11">SampleStatistics.Variance: float</div>
<div class="tip" id="fs12">val s : SampleStatistics</div>
<div class="tip" id="fs13">member SampleStatistics.StandardDeviation : float<br /><br />Full name: Main.SampleStatistics.StandardDeviation</div>
<div class="tip" id="fs14">val sqrt : value:&#39;T -&gt; &#39;U (requires member Sqrt)<br /><br />Full name: Microsoft.FSharp.Core.Operators.sqrt</div>
<div class="tip" id="fs15">member SampleStatistics.MeanStandardError : float<br /><br />Full name: Main.SampleStatistics.MeanStandardError</div>
<div class="tip" id="fs16">type WelchStatistic =<br />&#160;&#160;{T: float;<br />&#160;&#160;&#160;DF: int;}<br /><br />Full name: Main.WelchStatistic</div>
<div class="tip" id="fs17">WelchStatistic.T: float</div>
<div class="tip" id="fs18">WelchStatistic.DF: int</div>
<div class="tip" id="fs19">val sampleStatistics : s:seq&lt;&#39;a&gt; -&gt; seq&lt;SampleStatistics&gt; (requires member op_Explicit)<br /><br />Full name: Main.Statistics.sampleStatistics<br /><em><br /><br />&#160;Online statistics sequence for a given sample sequence.</em></div>
<div class="tip" id="fs20">val s : seq&lt;&#39;a&gt; (requires member op_Explicit)</div>
<div class="tip" id="fs21">val calc : (int * float * float -&gt; float -&gt; int * float * float)</div>
<div class="tip" id="fs22">val n : int</div>
<div class="tip" id="fs23">val m : float</div>
<div class="tip" id="fs24">val s : float</div>
<div class="tip" id="fs25">val x : float</div>
<div class="tip" id="fs26">val m&#39; : float</div>
<div class="tip" id="fs27">module Seq<br /><br />from Microsoft.FSharp.Collections</div>
<div class="tip" id="fs28">val map : mapping:(&#39;T -&gt; &#39;U) -&gt; source:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;U&gt;<br /><br />Full name: Microsoft.FSharp.Collections.Seq.map</div>
<div class="tip" id="fs29">val scan : folder:(&#39;State -&gt; &#39;T -&gt; &#39;State) -&gt; state:&#39;State -&gt; source:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;State&gt;<br /><br />Full name: Microsoft.FSharp.Collections.Seq.scan</div>
<div class="tip" id="fs30">val skip : count:int -&gt; source:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Collections.Seq.skip</div>
<div class="tip" id="fs31">val scale : f:float -&gt; s:SampleStatistics -&gt; SampleStatistics<br /><br />Full name: Main.Statistics.scale<br /><em><br /><br />&#160;Scale the statistics for a given underlying random variable change of scale.</em></div>
<div class="tip" id="fs32">val f : float</div>
<div class="tip" id="fs33">val singleIteration : ic:int -&gt; s:SampleStatistics -&gt; SampleStatistics<br /><br />Full name: Main.Statistics.singleIteration<br /><em><br /><br />&#160;Single iteration statistics for a given iteration count and total statistics.</em></div>
<div class="tip" id="fs34">val ic : int</div>
<div class="tip" id="fs35">val private tInv : float []<br /><br />Full name: Main.Statistics.tInv<br /><em><br /><br />&#160;Student&#39;s t-distribution inverse for 0.1% confidence level by degrees of freedom.</em></div>
<div class="tip" id="fs36">val welchStatistic : s1:SampleStatistics -&gt; s2:SampleStatistics -&gt; WelchStatistic<br /><br />Full name: Main.Statistics.welchStatistic<br /><em><br /><br />&#160;Welch&#39;s t-test statistic for two given sample statistics.</em></div>
<div class="tip" id="fs37">val s1 : SampleStatistics</div>
<div class="tip" id="fs38">val s2 : SampleStatistics</div>
<div class="tip" id="fs39">val f1 : float</div>
<div class="tip" id="fs40">val f2 : float</div>
<div class="tip" id="fs41">val welchTest : w:WelchStatistic -&gt; int<br /><br />Full name: Main.Statistics.welchTest<br /><em><br /><br />&#160;Welch&#39;s t-test for a given Welch statistic to a confidence level of 0.1%.</em></div>
<div class="tip" id="fs42">val w : WelchStatistic</div>
<div class="tip" id="fs43">val abs : value:&#39;T -&gt; &#39;T (requires member Abs)<br /><br />Full name: Microsoft.FSharp.Core.Operators.abs</div>
<div class="tip" id="fs44">type Array =<br />&#160;&#160;member Clone : unit -&gt; obj<br />&#160;&#160;member CopyTo : array:Array * index:int -&gt; unit + 1 overload<br />&#160;&#160;member GetEnumerator : unit -&gt; IEnumerator<br />&#160;&#160;member GetLength : dimension:int -&gt; int<br />&#160;&#160;member GetLongLength : dimension:int -&gt; int64<br />&#160;&#160;member GetLowerBound : dimension:int -&gt; int<br />&#160;&#160;member GetUpperBound : dimension:int -&gt; int<br />&#160;&#160;member GetValue : [&lt;ParamArray&gt;] indices:int[] -&gt; obj + 7 overloads<br />&#160;&#160;member Initialize : unit -&gt; unit<br />&#160;&#160;member IsFixedSize : bool<br />&#160;&#160;...<br /><br />Full name: System.Array</div>
<div class="tip" id="fs45">val get : array:&#39;T [] -&gt; index:int -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Collections.Array.get</div>
<div class="tip" id="fs46">val min : e1:&#39;T -&gt; e2:&#39;T -&gt; &#39;T (requires comparison)<br /><br />Full name: Microsoft.FSharp.Core.Operators.min</div>
<div class="tip" id="fs47">val length : array:&#39;T [] -&gt; int<br /><br />Full name: Microsoft.FSharp.Collections.Array.length</div>
<div class="tip" id="fs48">val sign : value:&#39;T -&gt; int (requires member get_Sign)<br /><br />Full name: Microsoft.FSharp.Core.Operators.sign</div>
<div class="tip" id="fs49">module Statistics<br /><br />from Main</div>
<div class="tip" id="fs50">module Performance<br /><br />from Main</div>
<div class="tip" id="fs51">val private targetIterationCount : metric:(int -&gt; &#39;a -&gt; &#39;b) -&gt; metricTarget:&#39;b -&gt; f:&#39;a -&gt; int (requires member ( &lt;&lt;&lt; ) and comparison and member op_Explicit)<br /><br />Full name: Main.Performance.targetIterationCount<br /><em><br /><br />&#160;Find the iteration count to get to at least the metric target.</em></div>
<div class="tip" id="fs52">val metric : (int -&gt; &#39;a -&gt; &#39;b) (requires member ( &lt;&lt;&lt; ) and comparison and member op_Explicit)</div>
<div class="tip" id="fs53">val metricTarget : &#39;b (requires member ( &lt;&lt;&lt; ) and comparison and member op_Explicit)</div>
<div class="tip" id="fs54">val f : &#39;a</div>
<div class="tip" id="fs55">val find : (int -&gt; int)</div>
<div class="tip" id="fs56">val item : &#39;b (requires member ( &lt;&lt;&lt; ) and comparison and member op_Explicit)</div>
<div class="tip" id="fs57">val private measureStatistics : metric:(int -&gt; &#39;a -&gt; &#39;b) * metricTarget:&#39;b -&gt; relativeError:float -&gt; f:&#39;a -&gt; SampleStatistics (requires member ( &lt;&lt;&lt; ) and comparison and member op_Explicit and member op_Explicit)<br /><br />Full name: Main.Performance.measureStatistics<br /><em><br /><br />&#160;Create and iterate a statistics sequence for a metric until the given accuracy.</em></div>
<div class="tip" id="fs58">val metric : (int -&gt; &#39;a -&gt; &#39;b) (requires member ( &lt;&lt;&lt; ) and comparison and member op_Explicit and member op_Explicit)</div>
<div class="tip" id="fs59">val metricTarget : &#39;b (requires member ( &lt;&lt;&lt; ) and comparison and member op_Explicit and member op_Explicit)</div>
<div class="tip" id="fs60">val relativeError : float</div>
<div class="tip" id="fs61">val initInfinite : initializer:(int -&gt; &#39;T) -&gt; seq&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Collections.Seq.initInfinite</div>
<div class="tip" id="fs62">val find : predicate:(&#39;T -&gt; bool) -&gt; source:seq&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Collections.Seq.find</div>
<div class="tip" id="fs63">property SampleStatistics.MeanStandardError: float</div>
<div class="tip" id="fs64">val private measureCompare : metric:(int -&gt; ((&#39;a -&gt; &#39;a) -&gt; &#39;b) -&gt; &#39;c) * metricTarget:&#39;c -&gt; f1:((&#39;a -&gt; &#39;a) -&gt; &#39;b) -&gt; f2:((&#39;a -&gt; &#39;a) -&gt; &#39;b) -&gt; int (requires equality and member ( &lt;&lt;&lt; ) and comparison and member op_Explicit and member op_Explicit)<br /><br />Full name: Main.Performance.measureCompare<br /><em><br /><br />&#160;Create and iterate two statistics sequences until the metric means can be compared.</em></div>
<div class="tip" id="fs65">val metric : (int -&gt; ((&#39;a -&gt; &#39;a) -&gt; &#39;b) -&gt; &#39;c) (requires equality and member ( &lt;&lt;&lt; ) and comparison and member op_Explicit and member op_Explicit)</div>
<div class="tip" id="fs66">val metricTarget : &#39;c (requires member ( &lt;&lt;&lt; ) and comparison and member op_Explicit and member op_Explicit)</div>
<div class="tip" id="fs67">val f1 : ((&#39;a -&gt; &#39;a) -&gt; &#39;b) (requires equality)</div>
<div class="tip" id="fs68">val f2 : ((&#39;a -&gt; &#39;a) -&gt; &#39;b) (requires equality)</div>
<div class="tip" id="fs69">val id : x:&#39;T -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.Operators.id</div>
<div class="tip" id="fs70">val failwith : message:string -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.Operators.failwith</div>
<div class="tip" id="fs71">val stats : (((&#39;a -&gt; &#39;a) -&gt; &#39;b) -&gt; seq&lt;SampleStatistics&gt;) (requires equality)</div>
<div class="tip" id="fs72">val f : ((&#39;a -&gt; &#39;a) -&gt; &#39;b) (requires equality)</div>
<div class="tip" id="fs73">val map2 : mapping:(&#39;T1 -&gt; &#39;T2 -&gt; &#39;U) -&gt; source1:seq&lt;&#39;T1&gt; -&gt; source2:seq&lt;&#39;T2&gt; -&gt; seq&lt;&#39;U&gt;<br /><br />Full name: Microsoft.FSharp.Collections.Seq.map2</div>
<div class="tip" id="fs74">val pick : chooser:(&#39;T -&gt; &#39;U option) -&gt; source:seq&lt;&#39;T&gt; -&gt; &#39;U<br /><br />Full name: Microsoft.FSharp.Collections.Seq.pick</div>
<div class="tip" id="fs75">val maxDF : int</div>
<div class="tip" id="fs76">union case Option.Some: Value: &#39;T -&gt; Option&lt;&#39;T&gt;</div>
<div class="tip" id="fs77">union case Option.None: Option&lt;&#39;T&gt;</div>
<div class="tip" id="fs78">val c : int</div>
<div class="tip" id="fs79">val private measureMetric : startMetric:(unit -&gt; &#39;a) -&gt; endMetric:(&#39;a -&gt; &#39;b) -&gt; ic:int -&gt; f:(((&#39;d -&gt; &#39;e) -&gt; &#39;d -&gt; &#39;e) -&gt; &#39;f) -&gt; &#39;c (requires member ( + ) and member get_Zero)<br /><br />Full name: Main.Performance.measureMetric<br /><em><br /><br />&#160;Measure the given function for the iteration count using the start and end metric.</em></div>
<div class="tip" id="fs80">val startMetric : (unit -&gt; &#39;a)</div>
<div class="tip" id="fs81">val endMetric : (&#39;a -&gt; &#39;b) (requires member ( + ) and member get_Zero)</div>
<div class="tip" id="fs82">val f : (((&#39;d -&gt; &#39;e) -&gt; &#39;d -&gt; &#39;e) -&gt; &#39;f)</div>
<div class="tip" id="fs83">type GC =<br />&#160;&#160;static member AddMemoryPressure : bytesAllocated:int64 -&gt; unit<br />&#160;&#160;static member CancelFullGCNotification : unit -&gt; unit<br />&#160;&#160;static member Collect : unit -&gt; unit + 2 overloads<br />&#160;&#160;static member CollectionCount : generation:int -&gt; int<br />&#160;&#160;static member GetGeneration : obj:obj -&gt; int + 1 overload<br />&#160;&#160;static member GetTotalMemory : forceFullCollection:bool -&gt; int64<br />&#160;&#160;static member KeepAlive : obj:obj -&gt; unit<br />&#160;&#160;static member MaxGeneration : int<br />&#160;&#160;static member ReRegisterForFinalize : obj:obj -&gt; unit<br />&#160;&#160;static member RegisterForFullGCNotification : maxGenerationThreshold:int * largeObjectHeapThreshold:int -&gt; unit<br />&#160;&#160;...<br /><br />Full name: System.GC</div>
<div class="tip" id="fs84">GC.Collect() : unit<br />GC.Collect(generation: int) : unit<br />GC.Collect(generation: int, mode: GCCollectionMode) : unit</div>
<div class="tip" id="fs85">GC.WaitForPendingFinalizers() : unit</div>
<div class="tip" id="fs86">val mutable total : &#39;c (requires member get_Zero and member ( + ))</div>
<div class="tip" id="fs87">module LanguagePrimitives<br /><br />from Microsoft.FSharp.Core</div>
<div class="tip" id="fs88">val GenericZero&lt;&#39;T (requires member get_Zero)&gt; : &#39;T (requires member get_Zero)<br /><br />Full name: Microsoft.FSharp.Core.LanguagePrimitives.GenericZero</div>
<div class="tip" id="fs89">val measurer : ((&#39;g -&gt; &#39;h) -&gt; &#39;g -&gt; &#39;h)</div>
<div class="tip" id="fs90">val toMeasure : (&#39;g -&gt; &#39;h)</div>
<div class="tip" id="fs91">val args : &#39;g</div>
<div class="tip" id="fs92">val s : &#39;a</div>
<div class="tip" id="fs93">val ret : &#39;h</div>
<div class="tip" id="fs94">val m : &#39;b (requires member ( + ) and member get_Zero)</div>
<div class="tip" id="fs95">val loop : (int -&gt; unit)</div>
<div class="tip" id="fs96">val i : int</div>
<div class="tip" id="fs97">val ignore : value:&#39;T -&gt; unit<br /><br />Full name: Microsoft.FSharp.Core.Operators.ignore</div>
<div class="tip" id="fs98">val private timeMetric : ic:int -&gt; f:(((&#39;a -&gt; &#39;b) -&gt; &#39;a -&gt; &#39;b) -&gt; &#39;c) -&gt; int64<br /><br />Full name: Main.Performance.timeMetric<br /><em><br /><br />&#160;Measure the time metric for the given function and iteration count.</em></div>
<div class="tip" id="fs99">val f : (((&#39;a -&gt; &#39;b) -&gt; &#39;a -&gt; &#39;b) -&gt; &#39;c)</div>
<div class="tip" id="fs100">Multiple items<br />type Stopwatch =<br />&#160;&#160;new : unit -&gt; Stopwatch<br />&#160;&#160;member Elapsed : TimeSpan<br />&#160;&#160;member ElapsedMilliseconds : int64<br />&#160;&#160;member ElapsedTicks : int64<br />&#160;&#160;member IsRunning : bool<br />&#160;&#160;member Reset : unit -&gt; unit<br />&#160;&#160;member Restart : unit -&gt; unit<br />&#160;&#160;member Start : unit -&gt; unit<br />&#160;&#160;member Stop : unit -&gt; unit<br />&#160;&#160;static val Frequency : int64<br />&#160;&#160;...<br /><br />Full name: System.Diagnostics.Stopwatch<br /><br />--------------------<br />Stopwatch() : unit</div>
<div class="tip" id="fs101">Stopwatch.GetTimestamp() : int64</div>
<div class="tip" id="fs102">val t : int64</div>
<div class="tip" id="fs103">val private memoryMetric : ic:int -&gt; f:(((&#39;a -&gt; &#39;b) -&gt; &#39;a -&gt; &#39;b) -&gt; &#39;c) -&gt; int64<br /><br />Full name: Main.Performance.memoryMetric<br /><em><br /><br />&#160;Measure the memory metric for the given function and iteration count.</em></div>
<div class="tip" id="fs104">val startMetric : (unit -&gt; int64)</div>
<div class="tip" id="fs105">val not : value:bool -&gt; bool<br /><br />Full name: Microsoft.FSharp.Core.Operators.not</div>
<div class="tip" id="fs106">GC.GetTotalMemory(forceFullCollection: bool) : int64</div>
<div class="tip" id="fs107">val endMetric : (int64 -&gt; int64)</div>
<div class="tip" id="fs108">val s : int64</div>
<div class="tip" id="fs109">val private garbageMetric : ic:int -&gt; f:(((&#39;a -&gt; &#39;b) -&gt; &#39;a -&gt; &#39;b) -&gt; &#39;c) -&gt; int<br /><br />Full name: Main.Performance.garbageMetric<br /><em><br /><br />&#160;Measure the garbage collection metric for the given function and iteration count.</em></div>
<div class="tip" id="fs110">val count : (unit -&gt; int)</div>
<div class="tip" id="fs111">GC.CollectionCount(generation: int) : int</div>
<div class="tip" id="fs112">val s : int</div>
<div class="tip" id="fs113">val private oneMillisecond : int64<br /><br />Full name: Main.Performance.oneMillisecond<br /><em><br /><br />&#160;Measure definitions which are a metric together with a metric target.</em></div>
<div class="tip" id="fs114">field Stopwatch.Frequency</div>
<div class="tip" id="fs115">val private timeMeasure : (int -&gt; (((&#39;a -&gt; &#39;b) -&gt; &#39;a -&gt; &#39;b) -&gt; &#39;c) -&gt; int64) * int64<br /><br />Full name: Main.Performance.timeMeasure</div>
<div class="tip" id="fs116">val private memoryMeasure : (int -&gt; (((&#39;a -&gt; &#39;b) -&gt; &#39;a -&gt; &#39;b) -&gt; &#39;c) -&gt; int64) * int64<br /><br />Full name: Main.Performance.memoryMeasure</div>
<div class="tip" id="fs117">val private garbageMeasure : (int -&gt; (((&#39;a -&gt; &#39;b) -&gt; &#39;a -&gt; &#39;b) -&gt; &#39;c) -&gt; int) * int<br /><br />Full name: Main.Performance.garbageMeasure</div>
<div class="tip" id="fs118">val timeStatistics : f:(((&#39;a -&gt; &#39;b) -&gt; &#39;a -&gt; &#39;b) -&gt; &#39;c) -&gt; SampleStatistics<br /><br />Full name: Main.Performance.timeStatistics<br /><em><br /><br />&#160;Time statistics for a given function accurate to a mean standard error of 1%.</em></div>
<div class="tip" id="fs119">val memoryStatistics : f:(((&#39;a -&gt; &#39;b) -&gt; &#39;a -&gt; &#39;b) -&gt; &#39;c) -&gt; SampleStatistics<br /><br />Full name: Main.Performance.memoryStatistics<br /><em><br /><br />&#160;Memory statistics for a given function accurate to a mean standard error of 1%.</em></div>
<div class="tip" id="fs120">val gcCountStatistics : f:(((&#39;a -&gt; &#39;b) -&gt; &#39;a -&gt; &#39;b) -&gt; &#39;c) -&gt; SampleStatistics<br /><br />Full name: Main.Performance.gcCountStatistics<br /><em><br /><br />&#160;GC count statistics for a given function accurate to a mean standard error of 1%.</em></div>
<div class="tip" id="fs121">val timeCompare : f1:(((&#39;a -&gt; &#39;b) -&gt; &#39;a -&gt; &#39;b) -&gt; &#39;c) -&gt; f2:(((&#39;a -&gt; &#39;b) -&gt; &#39;a -&gt; &#39;b) -&gt; &#39;c) -&gt; int (requires equality)<br /><br />Full name: Main.Performance.timeCompare<br /><em><br /><br />&#160;Time comparison for two given functions to a confidence level of 0.1%.</em></div>
<div class="tip" id="fs122">val f1 : (((&#39;a -&gt; &#39;b) -&gt; &#39;a -&gt; &#39;b) -&gt; &#39;c) (requires equality)</div>
<div class="tip" id="fs123">val f2 : (((&#39;a -&gt; &#39;b) -&gt; &#39;a -&gt; &#39;b) -&gt; &#39;c) (requires equality)</div>
<div class="tip" id="fs124">val memoryCompare : f1:(((&#39;a -&gt; &#39;b) -&gt; &#39;a -&gt; &#39;b) -&gt; &#39;c) -&gt; f2:(((&#39;a -&gt; &#39;b) -&gt; &#39;a -&gt; &#39;b) -&gt; &#39;c) -&gt; int (requires equality)<br /><br />Full name: Main.Performance.memoryCompare<br /><em><br /><br />&#160;Memory comparison for two given functions to a confidence level of 0.1%.</em></div>
<div class="tip" id="fs125">val gcCountCompare : f1:(((&#39;a -&gt; &#39;b) -&gt; &#39;a -&gt; &#39;b) -&gt; &#39;c) -&gt; f2:(((&#39;a -&gt; &#39;b) -&gt; &#39;a -&gt; &#39;b) -&gt; &#39;c) -&gt; int (requires equality)<br /><br />Full name: Main.Performance.gcCountCompare<br /><em><br /><br />&#160;GC count comparison for two given functions to a confidence level of 0.1%.</em></div>
