---
layout: post
title: "Balinski-Young weighted allocation algorithm"
tags: [cscheck, random, testing, rounding, allocation, weighted, integer]
description: "Balinski-Young weighted allocation algorithm"
keywords: cscheck random testing rounding allocation weighted integer
---
<p>We will cover an alternative weighted allocation algorithm to the one in the previous <a href="{% post_url 2022-09-14-allocate %}">post</a>.
These algorithms are used to allocate an integer total quantity over a set of weights.</p>
<p><a href="https://en.wikipedia.org/wiki/Apportionment_paradox">Balinski and Young</a> proved that no allocation algorithm can be free of perceived unintuitive observations, or paradoxes.</p>
<p>The algorithm in the previous <a href="{% post_url 2022-09-14-allocate %}">post</a> is the most fair with minimum error but it does suffer from the Alabama paradox.
This is when for a small increment of the total quantity there can be a decrease in one of the allocated values.</p>
<h2><a name="Balinski-Young-Algorithm" class="anchor" href="#Balinski-Young-Algorithm">Balinski-Young Algorithm</a></h2>
<p>Balinski and Young constructed an <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC433936/">algorithm</a> that follows the quota rule (all values are either the floor or ceiling of the unrounded allocation) and is free of the Alabama paradox.</p>
<img style="border:1px solid black" src="/{{site.baseurl}}public/allocate/balinski_young.png" title="BalinskiYoung"/>
<p>Again this is tested with <a href="https://www.nuget.org/packages/CsCheck/">CsCheck</a> including a test for the Alabama paradox.</p>
<h2><a name="Conclusion" class="anchor" href="#Conclusion">Conclusion</a></h2>
<p>The Balinski-Young algorithm is said to be slightly biased towards larger weights.
It can be useful in situations where there is the possibility of small incremental increases to the total quantity.</p>
<p>There is little online about this algorithm (or the one in the previous <a href="{% post_url 2022-09-14-allocate %}">post</a>) and many <a href="https://stackoverflow.com/questions/1925691/proportionately-distribute-prorate-a-value-across-a-set-of-values">unanswered</a> <a href="https://stackoverflow.com/questions/9088403/distributing-integers-using-weights-how-to-calculate">questions</a>.
From twitter polls not looking correct, to algorithms with poor properties such as cascade rounding or adjusting the largest weights, there seem to be common software errors in this area.</p>
<p><a href="https://github.com/AnthonyLloyd/CsCheck/blob/master/Tests/Allocator.cs">Allocator.cs</a><br />
<a href="https://github.com/AnthonyLloyd/CsCheck/blob/master/Tests/Allocator_Tests.cs">Allocator_Tests.cs</a></p>


