---
layout: post
title: "F# Implementation of Scala ZIO"
tags: [io,zio,async,reader,result]
description: "F# Implementation of Scala ZIO"
keywords: F#, io, zio, async, result
---
<p>PLEASE NOTE SOURCE CODE IS NO LONGER AVAILABLE AND THE POST IS HERE JUST FOR INFORMATION</p>
<p>This is a prototype implementation of <a href="https://github.com/scalaz/scalaz-zio">Scala ZIO</a> in F#.
It aims to be a skeleton of ZIO features such that additional functions can be easily fleshed out.</p>
<h2><a name="Background" class="anchor" href="#Background">Background</a></h2>
<p>I recently went to a <a href="https://www.slideshare.net/jdegoes/the-death-of-final-tagless">talk</a>
on <a href="https://github.com/scalaz/scalaz-zio">Scala ZIO</a> by <a href="https://twitter.com/jdegoes">John De Goes</a>.
ZIO is a type-safe, composable library for asynchronous and concurrent programming in Scala.</p>
<p>It takes a different approach to other Scala effects libraries in that it does not require the use of Higher-Kinded Types.
Instead it uses a reader monad to provide access to IO effects (called ZIO Environment).</p>
<p>I came away wanting something similar in F#.
A useful library that could be used in the outer IO layer to simplify and test IO dependency code.
I started to play with some reader code but didn't think it would ultimately work out.
In fact, it works really well.</p>
<h2><a name="IO" class="anchor" href="#IO">IO</a></h2>
<p><span class="math">\[IO = Reader + Async + Result\]</span></p>
<p>The F# equivalent of ZIO type aliases are <code>UIO&lt;'r,'a&gt;</code> which represents effects without errors,
and <code>IO&lt;'r,'a,'e&gt;</code> which represents effects with a possible error.
<a href="https://github.com/AnthonyLloyd/Fsion/blob/master/Fsion/IO.fs">IO</a> combines reader, async and result into one unified computation expression.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs37', 72)" onmouseover="showTip(event, 'fs37', 72)" class="rt">UIO</span><span class="pn">&lt;</span><span class="ta">&#39;</span><span class="id">r</span><span class="pn">,</span><span class="ta">&#39;</span><span class="id">a</span><span class="pn">&gt;</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs37', 73)" onmouseover="showTip(event, 'fs37', 73)" class="uc">UIO</span> <span class="k">of</span> <span class="pn">(</span><span class="ta">&#39;</span><span class="id">r</span> <span class="pn">*</span> <span onmouseout="hideTip(event, 'fs38', 74)" onmouseover="showTip(event, 'fs38', 74)" class="rt">Cancel</span> <span class="k">-&gt;</span> <span class="pn">(</span><span class="ta">&#39;</span><span class="id">a</span> <span onmouseout="hideTip(event, 'fs39', 75)" onmouseover="showTip(event, 'fs39', 75)" class="rt">option</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs40', 76)" onmouseover="showTip(event, 'fs40', 76)" class="rt">unit</span><span class="pn">)</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs40', 77)" onmouseover="showTip(event, 'fs40', 77)" class="rt">unit</span><span class="pn">)</span>
</code></pre>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs130', 466)" onmouseover="showTip(event, 'fs130', 466)" class="rt">IO</span><span class="pn">&lt;</span><span class="ta">&#39;</span><span class="id">r</span><span class="pn">,</span><span class="ta">&#39;</span><span class="id">a</span><span class="pn">,</span><span class="ta">&#39;</span><span class="id">e</span><span class="pn">&gt;</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs130', 467)" onmouseover="showTip(event, 'fs130', 467)" class="uc">IO</span> <span class="k">of</span> <span class="pn">(</span><span class="ta">&#39;</span><span class="id">r</span> <span class="pn">*</span> <span onmouseout="hideTip(event, 'fs38', 468)" onmouseover="showTip(event, 'fs38', 468)" class="rt">Cancel</span> <span class="k">-&gt;</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs131', 469)" onmouseover="showTip(event, 'fs131', 469)" class="rt">Result</span><span class="pn">&lt;</span><span class="ta">&#39;</span><span class="id">a</span><span class="pn">,</span><span class="ta">&#39;</span><span class="id">e</span><span class="pn">&gt;</span> <span onmouseout="hideTip(event, 'fs39', 470)" onmouseover="showTip(event, 'fs39', 470)" class="rt">option</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs40', 471)" onmouseover="showTip(event, 'fs40', 471)" class="rt">unit</span><span class="pn">)</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs40', 472)" onmouseover="showTip(event, 'fs40', 472)" class="rt">unit</span><span class="pn">)</span>
</code></pre>
<h2><a name="Reader" class="anchor" href="#Reader">Reader</a></h2>
<p>The reader part represents all the environment dependencies required in the computation expression.
It is fully type-safe with types inferred including any library requirements such as Clock for the timeout.
The computation expression can easily be <a href="https://github.com/AnthonyLloyd/Fsion/blob/master/Fsion.Tests/IOTests.fs">tested</a> by running with a test environment.</p>
<img style="margin-left:20px" src="/{{site.baseurl}}public/io/programType.png" title="program type" />
<h2><a name="Async" class="anchor" href="#Async">Async</a></h2>
<p>At the IO layer thread pool threads need to be used in the most efficient way without any blocking.
This usually means Async in F# or async/await in C# need to be used.
They both join threads without a thread pool thread having to wait.</p>
<pre class="fssnip highlighted"><code lang="fsharp">    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs200', 1127)" onmouseover="showTip(event, 'fs200', 1127)" class="fn">race</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs93', 1128)" onmouseover="showTip(event, 'fs93', 1128)" class="uc">UIO</span> <span onmouseout="hideTip(event, 'fs201', 1129)" onmouseover="showTip(event, 'fs201', 1129)" class="fn">run1</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs130', 1130)" onmouseover="showTip(event, 'fs130', 1130)" class="uc">IO</span> <span onmouseout="hideTip(event, 'fs202', 1131)" onmouseover="showTip(event, 'fs202', 1131)" class="fn">run2</span><span class="pn">)</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs130', 1132)" onmouseover="showTip(event, 'fs130', 1132)" class="rt">IO</span><span class="pn">&lt;</span><span class="ta">&#39;</span><span class="id">r</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs141', 1133)" onmouseover="showTip(event, 'fs141', 1133)" class="rt">Choice</span><span class="pn">&lt;</span><span class="ta">&#39;</span><span class="id">a1</span><span class="pn">,</span><span class="ta">&#39;</span><span class="id">a2</span><span class="pn">&gt;</span><span class="pn">,</span><span class="ta">&#39;</span><span class="id">e1</span><span class="pn">&gt;</span> <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs130', 1134)" onmouseover="showTip(event, 'fs130', 1134)" class="uc">IO</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs44', 1135)" onmouseover="showTip(event, 'fs44', 1135)" class="id">env</span> <span onmouseout="hideTip(event, 'fs203', 1136)" onmouseover="showTip(event, 'fs203', 1136)" class="fn">cont</span> <span class="k">-&gt;</span>
            <span class="k">if</span> <span onmouseout="hideTip(event, 'fs38', 1137)" onmouseover="showTip(event, 'fs38', 1137)" class="m">Cancel</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs24', 1138)" onmouseover="showTip(event, 'fs24', 1138)" class="id">isSet</span> <span onmouseout="hideTip(event, 'fs44', 1139)" onmouseover="showTip(event, 'fs44', 1139)" class="id">env</span> <span class="k">then</span> <span onmouseout="hideTip(event, 'fs203', 1140)" onmouseover="showTip(event, 'fs203', 1140)" class="fn">cont</span> <span onmouseout="hideTip(event, 'fs46', 1141)" onmouseover="showTip(event, 'fs46', 1141)" class="uc">None</span>
            <span class="k">else</span>
                <span class="k">let</span> <span onmouseout="hideTip(event, 'fs190', 1142)" onmouseover="showTip(event, 'fs190', 1142)" class="id">envChild</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs38', 1143)" onmouseover="showTip(event, 'fs38', 1143)" class="m">Cancel</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 1144)" onmouseover="showTip(event, 'fs27', 1144)" class="id">add</span> <span onmouseout="hideTip(event, 'fs44', 1145)" onmouseover="showTip(event, 'fs44', 1145)" class="id">env</span>
                <span class="k">let</span> <span class="k">mutable</span> <span onmouseout="hideTip(event, 'fs204', 1146)" onmouseover="showTip(event, 'fs204', 1146)" class="mv">o</span> <span class="o">=</span> <span class="n">0</span>
                <span onmouseout="hideTip(event, 'fs81', 1147)" onmouseover="showTip(event, 'fs81', 1147)" class="rt">ThreadPool</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs82', 1148)" onmouseover="showTip(event, 'fs82', 1148)" class="id">QueueUserWorkItem</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">_</span> <span class="k">-&gt;</span>
                    <span onmouseout="hideTip(event, 'fs201', 1149)" onmouseover="showTip(event, 'fs201', 1149)" class="fn">run1</span> <span onmouseout="hideTip(event, 'fs190', 1150)" onmouseover="showTip(event, 'fs190', 1150)" class="id">envChild</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs205', 1151)" onmouseover="showTip(event, 'fs205', 1151)" class="id">a</span> <span class="k">-&gt;</span>
                        <span class="k">if</span> <span onmouseout="hideTip(event, 'fs85', 1152)" onmouseover="showTip(event, 'fs85', 1152)" class="rt">Interlocked</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs199', 1153)" onmouseover="showTip(event, 'fs199', 1153)" class="id">Exchange</span><span class="pn">(</span><span class="o">&amp;</span><span onmouseout="hideTip(event, 'fs204', 1154)" onmouseover="showTip(event, 'fs204', 1154)" class="mv">o</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span> <span class="o">=</span> <span class="n">0</span> <span class="k">then</span>
                            <span onmouseout="hideTip(event, 'fs38', 1155)" onmouseover="showTip(event, 'fs38', 1155)" class="m">Cancel</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs31', 1156)" onmouseover="showTip(event, 'fs31', 1156)" class="id">set</span> <span onmouseout="hideTip(event, 'fs190', 1157)" onmouseover="showTip(event, 'fs190', 1157)" class="id">envChild</span>
                            <span class="k">if</span> <span onmouseout="hideTip(event, 'fs38', 1158)" onmouseover="showTip(event, 'fs38', 1158)" class="m">Cancel</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs24', 1159)" onmouseover="showTip(event, 'fs24', 1159)" class="id">isSet</span> <span onmouseout="hideTip(event, 'fs44', 1160)" onmouseover="showTip(event, 'fs44', 1160)" class="id">env</span> <span class="k">then</span> <span onmouseout="hideTip(event, 'fs203', 1161)" onmouseover="showTip(event, 'fs203', 1161)" class="fn">cont</span> <span onmouseout="hideTip(event, 'fs46', 1162)" onmouseover="showTip(event, 'fs46', 1162)" class="uc">None</span>
                            <span class="k">else</span> <span onmouseout="hideTip(event, 'fs48', 1163)" onmouseover="showTip(event, 'fs48', 1163)" class="m">Option</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs49', 1164)" onmouseover="showTip(event, 'fs49', 1164)" class="id">map</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs17', 1165)" onmouseover="showTip(event, 'fs17', 1165)" class="uc">Choice2Of2</span> <span class="o">&gt;</span><span class="pn">&gt;</span> <span onmouseout="hideTip(event, 'fs2', 1166)" onmouseover="showTip(event, 'fs2', 1166)" class="uc">Ok</span><span class="pn">)</span> <span onmouseout="hideTip(event, 'fs205', 1167)" onmouseover="showTip(event, 'fs205', 1167)" class="id">a</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs203', 1168)" onmouseover="showTip(event, 'fs203', 1168)" class="fn">cont</span>
                    <span class="pn">)</span>
                <span class="pn">)</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs90', 1169)" onmouseover="showTip(event, 'fs90', 1169)" class="fn">ignore</span>
                <span onmouseout="hideTip(event, 'fs81', 1170)" onmouseover="showTip(event, 'fs81', 1170)" class="rt">ThreadPool</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs82', 1171)" onmouseover="showTip(event, 'fs82', 1171)" class="id">QueueUserWorkItem</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">_</span> <span class="k">-&gt;</span>
                    <span onmouseout="hideTip(event, 'fs202', 1172)" onmouseover="showTip(event, 'fs202', 1172)" class="fn">run2</span> <span onmouseout="hideTip(event, 'fs190', 1173)" onmouseover="showTip(event, 'fs190', 1173)" class="id">envChild</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs206', 1174)" onmouseover="showTip(event, 'fs206', 1174)" class="id">a</span> <span class="k">-&gt;</span>
                        <span class="k">if</span> <span onmouseout="hideTip(event, 'fs85', 1175)" onmouseover="showTip(event, 'fs85', 1175)" class="rt">Interlocked</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs199', 1176)" onmouseover="showTip(event, 'fs199', 1176)" class="id">Exchange</span><span class="pn">(</span><span class="o">&amp;</span><span onmouseout="hideTip(event, 'fs204', 1177)" onmouseover="showTip(event, 'fs204', 1177)" class="mv">o</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span> <span class="o">=</span> <span class="n">0</span> <span class="k">then</span>
                            <span onmouseout="hideTip(event, 'fs38', 1178)" onmouseover="showTip(event, 'fs38', 1178)" class="m">Cancel</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs31', 1179)" onmouseover="showTip(event, 'fs31', 1179)" class="id">set</span> <span onmouseout="hideTip(event, 'fs190', 1180)" onmouseover="showTip(event, 'fs190', 1180)" class="id">envChild</span>
                            <span class="k">if</span> <span onmouseout="hideTip(event, 'fs38', 1181)" onmouseover="showTip(event, 'fs38', 1181)" class="m">Cancel</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs24', 1182)" onmouseover="showTip(event, 'fs24', 1182)" class="id">isSet</span> <span onmouseout="hideTip(event, 'fs44', 1183)" onmouseover="showTip(event, 'fs44', 1183)" class="id">env</span> <span class="k">then</span> <span onmouseout="hideTip(event, 'fs203', 1184)" onmouseover="showTip(event, 'fs203', 1184)" class="fn">cont</span> <span onmouseout="hideTip(event, 'fs46', 1185)" onmouseover="showTip(event, 'fs46', 1185)" class="uc">None</span>
                            <span class="k">else</span> <span onmouseout="hideTip(event, 'fs48', 1186)" onmouseover="showTip(event, 'fs48', 1186)" class="m">Option</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs49', 1187)" onmouseover="showTip(event, 'fs49', 1187)" class="id">map</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs131', 1188)" onmouseover="showTip(event, 'fs131', 1188)" class="m">Result</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs157', 1189)" onmouseover="showTip(event, 'fs157', 1189)" class="id">map</span> <span onmouseout="hideTip(event, 'fs15', 1190)" onmouseover="showTip(event, 'fs15', 1190)" class="uc">Choice1Of2</span><span class="pn">)</span> <span onmouseout="hideTip(event, 'fs206', 1191)" onmouseover="showTip(event, 'fs206', 1191)" class="id">a</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs203', 1192)" onmouseover="showTip(event, 'fs203', 1192)" class="fn">cont</span>
                    <span class="pn">)</span>
                <span class="pn">)</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs90', 1193)" onmouseover="showTip(event, 'fs90', 1193)" class="fn">ignore</span>
        <span class="pn">)</span>
</code></pre>
<p>With <a href="https://github.com/AnthonyLloyd/Fsion/blob/master/Fsion/IO.fs">IO</a> async is implemented directly using the thread pool.
There are two main reasons for this.
In <a href="https://github.com/AnthonyLloyd/Fsion/blob/master/Fsion/IO.fs">IO</a> exceptions are not part of control flow.
Errors are first class and type-safe. Unrecoverable exceptions output the stack trace and exit the process.
Cancellation is fully integrated into <a href="https://github.com/AnthonyLloyd/Fsion/blob/master/Fsion/IO.fs">IO</a> meaning in race,
parallel and upon an error, computations are automatically cancelled, saving resources.</p>
<p>These with the final part dramatically simplify and optimise asynchronous IO code.</p>
<h2><a name="Result" class="anchor" href="#Result">Result</a></h2>
<p>The result part of <a href="https://github.com/AnthonyLloyd/Fsion/blob/master/Fsion/IO.fs">IO</a> represents possible errors in an integrated and type-safe way.
The error type is inferred, and different error types are auto lifted into <code>Choice&lt;'a,'b&gt;</code> when combined.
<a href="https://github.com/AnthonyLloyd/Fsion/blob/master/Fsion/IO.fs">IO</a> computations can be timed out and retried based on result using simple functions.
Schedule is a powerful construct that can be combined several ways.
I've replicated the structure from ZIO but not fully explored its uses.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs249', 1381)" onmouseover="showTip(event, 'fs249', 1381)" class="fn">programRetry</span> <span onmouseout="hideTip(event, 'fs250', 1382)" onmouseover="showTip(event, 'fs250', 1382)" class="id">noRetry</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs224', 1383)" onmouseover="showTip(event, 'fs224', 1383)" class="k">io</span> <span class="pn">{</span>
        <span class="k">do!</span> <span onmouseout="hideTip(event, 'fs251', 1384)" onmouseover="showTip(event, 'fs251', 1384)" class="m">Logger</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs238', 1385)" onmouseover="showTip(event, 'fs238', 1385)" class="id">log</span> <span class="s">&quot;started&quot;</span>
        <span class="k">do!</span> <span onmouseout="hideTip(event, 'fs252', 1386)" onmouseover="showTip(event, 'fs252', 1386)" class="m">Console</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs229', 1387)" onmouseover="showTip(event, 'fs229', 1387)" class="id">writeLine</span> <span class="s">&quot;Please enter your name:&quot;</span>
        <span class="k">let!</span> <span onmouseout="hideTip(event, 'fs253', 1388)" onmouseover="showTip(event, 'fs253', 1388)" class="id">name</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs252', 1389)" onmouseover="showTip(event, 'fs252', 1389)" class="m">Console</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs234', 1390)" onmouseover="showTip(event, 'fs234', 1390)" class="id">readLine</span><span class="pn">(</span><span class="pn">)</span>
        <span class="k">do!</span> <span onmouseout="hideTip(event, 'fs251', 1391)" onmouseover="showTip(event, 'fs251', 1391)" class="m">Logger</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs238', 1392)" onmouseover="showTip(event, 'fs238', 1392)" class="id">log</span> <span class="pn">(</span><span class="s">&quot;got name = &quot;</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs253', 1393)" onmouseover="showTip(event, 'fs253', 1393)" class="id">name</span><span class="pn">)</span>
        <span class="k">let!</span> <span onmouseout="hideTip(event, 'fs254', 1394)" onmouseover="showTip(event, 'fs254', 1394)" class="id">thread</span> <span class="o">=</span>
            <span onmouseout="hideTip(event, 'fs255', 1395)" onmouseover="showTip(event, 'fs255', 1395)" class="m">Persistence</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs245', 1396)" onmouseover="showTip(event, 'fs245', 1396)" class="id">persist</span> <span onmouseout="hideTip(event, 'fs253', 1397)" onmouseover="showTip(event, 'fs253', 1397)" class="id">name</span>
            <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs218', 1398)" onmouseover="showTip(event, 'fs218', 1398)" class="m">IO</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs207', 1399)" onmouseover="showTip(event, 'fs207', 1399)" class="id">timeout</span> <span class="n">1000</span>
            <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs218', 1400)" onmouseover="showTip(event, 'fs218', 1400)" class="m">IO</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs182', 1401)" onmouseover="showTip(event, 'fs182', 1401)" class="id">retry</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs171', 1402)" onmouseover="showTip(event, 'fs171', 1402)" class="m">Schedule</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs127', 1403)" onmouseover="showTip(event, 'fs127', 1403)" class="id">recurs</span> <span onmouseout="hideTip(event, 'fs250', 1404)" onmouseover="showTip(event, 'fs250', 1404)" class="id">noRetry</span><span class="pn">)</span>
            <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs218', 1405)" onmouseover="showTip(event, 'fs218', 1405)" class="m">IO</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs184', 1406)" onmouseover="showTip(event, 'fs184', 1406)" class="id">fork</span>
        <span class="k">do!</span> <span onmouseout="hideTip(event, 'fs252', 1407)" onmouseover="showTip(event, 'fs252', 1407)" class="m">Console</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs229', 1408)" onmouseover="showTip(event, 'fs229', 1408)" class="id">writeLine</span> <span class="pn">(</span><span class="s">&quot;Hi &quot;</span><span class="o">+</span><span onmouseout="hideTip(event, 'fs253', 1409)" onmouseover="showTip(event, 'fs253', 1409)" class="id">name</span><span class="pn">)</span>
        <span class="k">do!</span> <span onmouseout="hideTip(event, 'fs254', 1410)" onmouseover="showTip(event, 'fs254', 1410)" class="id">thread</span>
        <span class="k">do!</span> <span onmouseout="hideTip(event, 'fs251', 1411)" onmouseover="showTip(event, 'fs251', 1411)" class="m">Logger</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs238', 1412)" onmouseover="showTip(event, 'fs238', 1412)" class="id">log</span> <span class="s">&quot;finished&quot;</span>
        <span class="k">return</span> <span class="n">0</span>
    <span class="pn">}</span>
</code></pre>
<h2><a name="Conclusion" class="anchor" href="#Conclusion">Conclusion</a></h2>
<p>When type inference worked for the dependencies I was surprised.
When it was also possible to make it work for the errors I was amazed.</p>
<p>Computation expressions do not compose well.
At the IO layer a solution is needed for dependencies in a testable way.
The IO layer also needs to efficiently use the thread pool.
Making errors type-safe and integrated in the IO logic completes this compelling trinity.</p>
<h2><a name="References" class="anchor" href="#References">References</a></h2>
<p><a href="https://github.com/AnthonyLloyd/Fsion/blob/master/Fsion/IO.fs">IO.fs</a><br />
<a href="https://github.com/AnthonyLloyd/Fsion/blob/master/Fsion.Tests/IOTests.fs">IOTests.fs</a><br />
<a href="https://scalaz.github.io/scalaz-zio/overview/">ZIO Overview</a><br />
<a href="https://scalaz.github.io/scalaz-zio/datatypes/">ZIO Data Types</a><br />
<a href="https://www.slideshare.net/jdegoes/the-death-of-final-tagless">The Death Of Final Tagless</a></p>
<h2><a name="Thanks" class="anchor" href="#Thanks">Thanks</a></h2>
<p><a href="https://twitter.com/jdegoes">@jdegoes</a> for ZIO and a great talk that made me want to do this.<br />
<a href="https://twitter.com/NinoFloris">@NinoFloris</a> for useful async discussions.<br />
<a href="https://twitter.com/keithtpinson/status/1104071022544932866">@keithtpinson</a> for the error auto lift idea.</p>


<div class="tip" id="fs1">Multiple items<br />module Result<br /><br />from Microsoft.FSharp.Core<br /><br />--------------------<br />[&lt;Struct&gt;]<br />type Result&lt;&#39;T,&#39;TError&gt; =<br />&#160;&#160;| Ok of ResultValue: &#39;T<br />&#160;&#160;| Error of ErrorValue: &#39;TError</div>
<div class="tip" id="fs2">union case Result.Ok: &#39;a -&gt; Result&lt;&#39;a,&#39;e&gt;</div>
<div class="tip" id="fs3">union case Result.Error: &#39;e -&gt; Result&lt;&#39;a,&#39;e&gt;</div>
<div class="tip" id="fs4">Multiple items<br />module Result<br /><br />from Microsoft.FSharp.Core<br /><br />--------------------<br />type Result&lt;&#39;a,&#39;e&gt; =<br />&#160;&#160;| Ok of &#39;a<br />&#160;&#160;| Error of &#39;e</div>
<div class="tip" id="fs5">val map : f:(&#39;a -&gt; &#39;b) -&gt; Result&lt;&#39;a,&#39;e&gt; -&gt; Result&lt;&#39;b,&#39;e&gt;</div>
<div class="tip" id="fs6">val f : (&#39;a -&gt; &#39;b)</div>
<div class="tip" id="fs7">val failwith : message:string -&gt; &#39;T</div>
<div class="tip" id="fs8">val mapError : f:(&#39;e -&gt; &#39;f) -&gt; Result&lt;&#39;a,&#39;e&gt; -&gt; Result&lt;&#39;a,&#39;f&gt;</div>
<div class="tip" id="fs9">val f : (&#39;e -&gt; &#39;f)</div>
<div class="tip" id="fs10">Multiple items<br />union case Time.Time: Time<br /><br />--------------------<br />type Time = | Time</div>
<div class="tip" id="fs11">val now : unit -&gt; Time</div>
<div class="tip" id="fs12">Multiple items<br />type Choice&lt;&#39;T1,&#39;T2&gt; =<br />&#160;&#160;| Choice1Of2 of &#39;T1<br />&#160;&#160;| Choice2Of2 of &#39;T2<br /><br />--------------------<br />type Choice&lt;&#39;T1,&#39;T2,&#39;T3&gt; =<br />&#160;&#160;| Choice1Of3 of &#39;T1<br />&#160;&#160;| Choice2Of3 of &#39;T2<br />&#160;&#160;| Choice3Of3 of &#39;T3<br /><br />--------------------<br />type Choice&lt;&#39;T1,&#39;T2,&#39;T3,&#39;T4&gt; =<br />&#160;&#160;| Choice1Of4 of &#39;T1<br />&#160;&#160;| Choice2Of4 of &#39;T2<br />&#160;&#160;| Choice3Of4 of &#39;T3<br />&#160;&#160;| Choice4Of4 of &#39;T4<br /><br />--------------------<br />type Choice&lt;&#39;T1,&#39;T2,&#39;T3,&#39;T4,&#39;T5&gt; =<br />&#160;&#160;| Choice1Of5 of &#39;T1<br />&#160;&#160;| Choice2Of5 of &#39;T2<br />&#160;&#160;| Choice3Of5 of &#39;T3<br />&#160;&#160;| Choice4Of5 of &#39;T4<br />&#160;&#160;| Choice5Of5 of &#39;T5<br /><br />--------------------<br />type Choice&lt;&#39;T1,&#39;T2,&#39;T3,&#39;T4,&#39;T5,&#39;T6&gt; =<br />&#160;&#160;| Choice1Of6 of &#39;T1<br />&#160;&#160;| Choice2Of6 of &#39;T2<br />&#160;&#160;| Choice3Of6 of &#39;T3<br />&#160;&#160;| Choice4Of6 of &#39;T4<br />&#160;&#160;| Choice5Of6 of &#39;T5<br />&#160;&#160;| Choice6Of6 of &#39;T6<br /><br />--------------------<br />type Choice&lt;&#39;T1,&#39;T2,&#39;T3,&#39;T4,&#39;T5,&#39;T6,&#39;T7&gt; =<br />&#160;&#160;| Choice1Of7 of &#39;T1<br />&#160;&#160;| Choice2Of7 of &#39;T2<br />&#160;&#160;| Choice3Of7 of &#39;T3<br />&#160;&#160;| Choice4Of7 of &#39;T4<br />&#160;&#160;| Choice5Of7 of &#39;T5<br />&#160;&#160;| Choice6Of7 of &#39;T6<br />&#160;&#160;| Choice7Of7 of &#39;T7</div>
<div class="tip" id="fs13">val merge : c:Choice&lt;&#39;a,&#39;a&gt; -&gt; &#39;a</div>
<div class="tip" id="fs14">val c : Choice&lt;&#39;a,&#39;a&gt;</div>
<div class="tip" id="fs15">union case Choice.Choice1Of2: &#39;T1 -&gt; Choice&lt;&#39;T1,&#39;T2&gt;</div>
<div class="tip" id="fs16">val a : &#39;a</div>
<div class="tip" id="fs17">union case Choice.Choice2Of2: &#39;T2 -&gt; Choice&lt;&#39;T1,&#39;T2&gt;</div>
<div class="tip" id="fs18">namespace System</div>
<div class="tip" id="fs19">namespace System.Threading</div>
<div class="tip" id="fs20">Multiple items<br />union case Cancel.Cancel: bool ref * children: Cancel list ref -&gt; Cancel<br /><br />--------------------<br />type Cancel = private | Cancel of bool ref * children: Cancel list ref</div>
<div class="tip" id="fs21">type bool = System.Boolean</div>
<div class="tip" id="fs22">Multiple items<br />val ref : value:&#39;T -&gt; &#39;T ref<br /><br />--------------------<br />type &#39;T ref = Ref&lt;&#39;T&gt;</div>
<div class="tip" id="fs23">type &#39;T list = List&lt;&#39;T&gt;</div>
<div class="tip" id="fs24">val internal isSet : &#39;r * Cancel -&gt; bool</div>
<div class="tip" id="fs25">val i : bool ref</div>
<div class="tip" id="fs26">val internal create : unit -&gt; Cancel</div>
<div class="tip" id="fs27">val internal add : r:&#39;r * Cancel -&gt; &#39;r * Cancel</div>
<div class="tip" id="fs28">val r : &#39;r</div>
<div class="tip" id="fs29">val c : Cancel list ref</div>
<div class="tip" id="fs30">val i : Cancel</div>
<div class="tip" id="fs31">val internal set : r:&#39;a * Cancel -&gt; unit</div>
<div class="tip" id="fs32">val r : &#39;a</div>
<div class="tip" id="fs33">val me : bool ref</div>
<div class="tip" id="fs34">val kids : Cancel list ref</div>
<div class="tip" id="fs35">Multiple items<br />module List<br /><br />from Microsoft.FSharp.Collections<br /><br />--------------------<br />type List&lt;&#39;T&gt; =<br />&#160;&#160;| ( [] )<br />&#160;&#160;| ( :: ) of Head: &#39;T * Tail: &#39;T list<br />&#160;&#160;&#160;&#160;interface IReadOnlyList&lt;&#39;T&gt;<br />&#160;&#160;&#160;&#160;interface IReadOnlyCollection&lt;&#39;T&gt;<br />&#160;&#160;&#160;&#160;interface IEnumerable<br />&#160;&#160;&#160;&#160;interface IEnumerable&lt;&#39;T&gt;<br />&#160;&#160;&#160;&#160;member GetSlice : startIndex:int option * endIndex:int option -&gt; &#39;T list<br />&#160;&#160;&#160;&#160;member Head : &#39;T<br />&#160;&#160;&#160;&#160;member IsEmpty : bool<br />&#160;&#160;&#160;&#160;member Item : index:int -&gt; &#39;T with get<br />&#160;&#160;&#160;&#160;member Length : int<br />&#160;&#160;&#160;&#160;member Tail : &#39;T list<br />&#160;&#160;&#160;&#160;...</div>
<div class="tip" id="fs36">val iter : action:(&#39;T -&gt; unit) -&gt; list:&#39;T list -&gt; unit</div>
<div class="tip" id="fs37">Multiple items<br />union case UIO.UIO: (&#39;r * Cancel -&gt; (&#39;a option -&gt; unit) -&gt; unit) -&gt; UIO&lt;&#39;r,&#39;a&gt;<br /><br />--------------------<br />type UIO&lt;&#39;r,&#39;a&gt; =<br />&#160;&#160;| UIO of (&#39;r * Cancel -&gt; (&#39;a option -&gt; unit) -&gt; unit)<br />&#160;&#160;&#160;&#160;member Bind : f:(&#39;a -&gt; UIO&lt;&#39;r,&#39;b&gt;) -&gt; UIO&lt;&#39;r,&#39;b&gt;<br />&#160;&#160;&#160;&#160;member Bind : f:(&#39;a -&gt; IO&lt;&#39;r,&#39;b,&#39;e&gt;) -&gt; IO&lt;&#39;r,&#39;b,&#39;e&gt;</div>
<div class="tip" id="fs38">Multiple items<br />union case Cancel.Cancel: bool ref * children: Cancel list ref -&gt; Cancel<br /><br />--------------------<br />module Cancel<br /><br />from 2019-03-29-io<br /><br />--------------------<br />type Cancel = private | Cancel of bool ref * children: Cancel list ref</div>
<div class="tip" id="fs39">type &#39;T option = Option&lt;&#39;T&gt;</div>
<div class="tip" id="fs40">type unit = Unit</div>
<div class="tip" id="fs41">val m : UIO&lt;&#39;r,&#39;a&gt;</div>
<div class="tip" id="fs42">val f : (&#39;a -&gt; UIO&lt;&#39;r,&#39;b&gt;)</div>
<div class="tip" id="fs43">val run : (&#39;r * Cancel -&gt; (&#39;a option -&gt; unit) -&gt; unit)</div>
<div class="tip" id="fs44">val env : &#39;r * Cancel</div>
<div class="tip" id="fs45">val cont : (&#39;b option -&gt; unit)</div>
<div class="tip" id="fs46">union case Option.None: Option&lt;&#39;T&gt;</div>
<div class="tip" id="fs47">val o : &#39;a option</div>
<div class="tip" id="fs48">module Option<br /><br />from Microsoft.FSharp.Core</div>
<div class="tip" id="fs49">val map : mapping:(&#39;T -&gt; &#39;U) -&gt; option:&#39;T option -&gt; &#39;U option</div>
<div class="tip" id="fs50">union case Option.Some: Value: &#39;T -&gt; Option&lt;&#39;T&gt;</div>
<div class="tip" id="fs51">val run : (&#39;r * Cancel -&gt; (&#39;b option -&gt; unit) -&gt; unit)</div>
<div class="tip" id="fs52">val result : a:&#39;a -&gt; UIO&lt;&#39;r,&#39;a&gt;</div>
<div class="tip" id="fs53">val cont : (&#39;a option -&gt; unit)</div>
<div class="tip" id="fs54">val effect : f:(&#39;r -&gt; &#39;a) -&gt; UIO&lt;&#39;r,&#39;a&gt;</div>
<div class="tip" id="fs55">val f : (&#39;r -&gt; &#39;a)</div>
<div class="tip" id="fs56">val fst : tuple:(&#39;T1 * &#39;T2) -&gt; &#39;T1</div>
<div class="tip" id="fs57">val map : f:(&#39;a -&gt; &#39;b) -&gt; UIO&lt;&#39;r,&#39;a&gt; -&gt; UIO&lt;&#39;r,&#39;b&gt;</div>
<div class="tip" id="fs58">val b : &#39;b</div>
<div class="tip" id="fs59">val delay : milliseconds:int -&gt; UIO&lt;&#39;r,unit&gt;</div>
<div class="tip" id="fs60">val milliseconds : int</div>
<div class="tip" id="fs61">val cont : (unit option -&gt; unit)</div>
<div class="tip" id="fs62">val mutable t : Timer</div>
<div class="tip" id="fs63">module Unchecked<br /><br />from Microsoft.FSharp.Core.Operators</div>
<div class="tip" id="fs64">val defaultof&lt;&#39;T&gt; : &#39;T</div>
<div class="tip" id="fs65">Multiple items<br />type Timer =<br />&#160;&#160;inherit MarshalByRefObject<br />&#160;&#160;new : callback:TimerCallback -&gt; Timer + 4 overloads<br />&#160;&#160;member Change : dueTime:int * period:int -&gt; bool + 3 overloads<br />&#160;&#160;member Dispose : unit -&gt; unit + 1 overload<br /><br />--------------------<br />Timer(callback: TimerCallback) : Timer<br />Timer(callback: TimerCallback, state: obj, dueTime: int, period: int) : Timer<br />Timer(callback: TimerCallback, state: obj, dueTime: System.TimeSpan, period: System.TimeSpan) : Timer<br />Timer(callback: TimerCallback, state: obj, dueTime: uint32, period: uint32) : Timer<br />Timer(callback: TimerCallback, state: obj, dueTime: int64, period: int64) : Timer</div>
<div class="tip" id="fs66">Timer.Dispose() : unit<br />Timer.Dispose(notifyObject: WaitHandle) : bool</div>
<div class="tip" id="fs67">type Timeout =<br />&#160;&#160;static val InfiniteTimeSpan : TimeSpan<br />&#160;&#160;static val Infinite : int</div>
<div class="tip" id="fs68">field Timeout.Infinite: int = -1</div>
<div class="tip" id="fs69">val flatten : f:(&#39;r -&gt; UIO&lt;&#39;r,&#39;a&gt;) -&gt; UIO&lt;&#39;r,&#39;a&gt;</div>
<div class="tip" id="fs70">val f : (&#39;r -&gt; UIO&lt;&#39;r,&#39;a&gt;)</div>
<div class="tip" id="fs71">val t : &#39;a option</div>
<div class="tip" id="fs72">val toAsync : env:&#39;r -&gt; UIO&lt;&#39;r,&#39;a&gt; -&gt; Async&lt;&#39;a&gt;</div>
<div class="tip" id="fs73">val env : &#39;r</div>
<div class="tip" id="fs74">Multiple items<br />type Async =<br />&#160;&#160;static member AsBeginEnd : computation:(&#39;Arg -&gt; Async&lt;&#39;T&gt;) -&gt; (&#39;Arg * AsyncCallback * obj -&gt; IAsyncResult) * (IAsyncResult -&gt; &#39;T) * (IAsyncResult -&gt; unit)<br />&#160;&#160;static member AwaitEvent : event:IEvent&lt;&#39;Del,&#39;T&gt; * ?cancelAction:(unit -&gt; unit) -&gt; Async&lt;&#39;T&gt; (requires delegate and &#39;Del :&gt; Delegate)<br />&#160;&#160;static member AwaitIAsyncResult : iar:IAsyncResult * ?millisecondsTimeout:int -&gt; Async&lt;bool&gt;<br />&#160;&#160;static member AwaitTask : task:Task -&gt; Async&lt;unit&gt;<br />&#160;&#160;static member AwaitTask : task:Task&lt;&#39;T&gt; -&gt; Async&lt;&#39;T&gt;<br />&#160;&#160;static member AwaitWaitHandle : waitHandle:WaitHandle * ?millisecondsTimeout:int -&gt; Async&lt;bool&gt;<br />&#160;&#160;static member CancelDefaultToken : unit -&gt; unit<br />&#160;&#160;static member Catch : computation:Async&lt;&#39;T&gt; -&gt; Async&lt;Choice&lt;&#39;T,exn&gt;&gt;<br />&#160;&#160;static member Choice : computations:seq&lt;Async&lt;&#39;T option&gt;&gt; -&gt; Async&lt;&#39;T option&gt;<br />&#160;&#160;static member FromBeginEnd : beginAction:(AsyncCallback * obj -&gt; IAsyncResult) * endAction:(IAsyncResult -&gt; &#39;T) * ?cancelAction:(unit -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />&#160;&#160;...<br /><br />--------------------<br />type Async&lt;&#39;T&gt; =</div>
<div class="tip" id="fs75">static member Async.FromContinuations : callback:((&#39;T -&gt; unit) * (exn -&gt; unit) * (System.OperationCanceledException -&gt; unit) -&gt; unit) -&gt; Async&lt;&#39;T&gt;</div>
<div class="tip" id="fs76">val cont : (&#39;a -&gt; unit)</div>
<div class="tip" id="fs77">property Option.Value: &#39;a</div>
<div class="tip" id="fs78">val fork : UIO&lt;&#39;r,&#39;a&gt; -&gt; UIO&lt;&#39;r,UIO&lt;&#39;r,&#39;a&gt;&gt;</div>
<div class="tip" id="fs79">val contFork : (UIO&lt;&#39;r,&#39;a&gt; option -&gt; unit)</div>
<div class="tip" id="fs80">val mutable o : obj</div>
<div class="tip" id="fs81">type ThreadPool =<br />&#160;&#160;static member BindHandle : osHandle:nativeint -&gt; bool + 1 overload<br />&#160;&#160;static member GetAvailableThreads : workerThreads:int * completionPortThreads:int -&gt; unit<br />&#160;&#160;static member GetMaxThreads : workerThreads:int * completionPortThreads:int -&gt; unit<br />&#160;&#160;static member GetMinThreads : workerThreads:int * completionPortThreads:int -&gt; unit<br />&#160;&#160;static member QueueUserWorkItem : callBack:WaitCallback -&gt; bool + 1 overload<br />&#160;&#160;static member RegisterWaitForSingleObject : waitObject:WaitHandle * callBack:WaitOrTimerCallback * state:obj * millisecondsTimeOutInterval:uint32 * executeOnlyOnce:bool -&gt; RegisteredWaitHandle + 3 overloads<br />&#160;&#160;static member SetMaxThreads : workerThreads:int * completionPortThreads:int -&gt; bool<br />&#160;&#160;static member SetMinThreads : workerThreads:int * completionPortThreads:int -&gt; bool<br />&#160;&#160;static member UnsafeQueueNativeOverlapped : overlapped:NativeOverlapped -&gt; bool<br />&#160;&#160;static member UnsafeQueueUserWorkItem : callBack:WaitCallback * state:obj -&gt; bool<br />&#160;&#160;...</div>
<div class="tip" id="fs82">ThreadPool.QueueUserWorkItem(callBack: WaitCallback) : bool<br />ThreadPool.QueueUserWorkItem(callBack: WaitCallback, state: obj) : bool</div>
<div class="tip" id="fs83">val a : &#39;a option</div>
<div class="tip" id="fs84">val o : obj</div>
<div class="tip" id="fs85">type Interlocked =<br />&#160;&#160;static member Add : location1:int * value:int -&gt; int + 1 overload<br />&#160;&#160;static member CompareExchange : location1:int * value:int * comparand:int -&gt; int + 6 overloads<br />&#160;&#160;static member Decrement : location:int -&gt; int + 1 overload<br />&#160;&#160;static member Exchange : location1:int * value:int -&gt; int + 6 overloads<br />&#160;&#160;static member Increment : location:int -&gt; int + 1 overload<br />&#160;&#160;static member MemoryBarrier : unit -&gt; unit<br />&#160;&#160;static member Read : location:int64 -&gt; int64</div>
<div class="tip" id="fs86">Interlocked.CompareExchange&lt;&#39;T (requires reference type)&gt;(location1: byref&lt;&#39;T&gt;, value: &#39;T, comparand: &#39;T) : &#39;T<br />Interlocked.CompareExchange(location1: byref&lt;nativeint&gt;, value: nativeint, comparand: nativeint) : nativeint<br />Interlocked.CompareExchange(location1: byref&lt;obj&gt;, value: obj, comparand: obj) : obj<br />Interlocked.CompareExchange(location1: byref&lt;float&gt;, value: float, comparand: float) : float<br />Interlocked.CompareExchange(location1: byref&lt;float32&gt;, value: float32, comparand: float32) : float32<br />Interlocked.CompareExchange(location1: byref&lt;int64&gt;, value: int64, comparand: int64) : int64<br />Interlocked.CompareExchange(location1: byref&lt;int&gt;, value: int, comparand: int) : int</div>
<div class="tip" id="fs87">val isNull : value:&#39;T -&gt; bool (requires &#39;T : null)</div>
<div class="tip" id="fs88">val not : value:bool -&gt; bool</div>
<div class="tip" id="fs89">val cont : (Option&lt;&#39;a&gt; -&gt; unit)</div>
<div class="tip" id="fs90">val ignore : value:&#39;T -&gt; unit</div>
<div class="tip" id="fs91">type ClockService =<br />&#160;&#160;interface<br />&#160;&#160;&#160;&#160;abstract member Sleep : int -&gt; UIO&lt;&#39;r,unit&gt;<br />&#160;&#160;&#160;&#160;abstract member Time : unit -&gt; UIO&lt;&#39;r,Time&gt;<br />&#160;&#160;end</div>
<div class="tip" id="fs92">Multiple items<br />module Time<br /><br />from 2019-03-29-io<br /><br />--------------------<br />type Time = | Time</div>
<div class="tip" id="fs93">Multiple items<br />union case UIO.UIO: (&#39;r * Cancel -&gt; (&#39;a option -&gt; unit) -&gt; unit) -&gt; UIO&lt;&#39;r,&#39;a&gt;<br /><br />--------------------<br />module UIO<br /><br />from 2019-03-29-io<br /><br />--------------------<br />type UIO&lt;&#39;r,&#39;a&gt; =<br />&#160;&#160;| UIO of (&#39;r * Cancel -&gt; (&#39;a option -&gt; unit) -&gt; unit)<br />&#160;&#160;&#160;&#160;member Bind : f:(&#39;a -&gt; UIO&lt;&#39;r,&#39;b&gt;) -&gt; UIO&lt;&#39;r,&#39;b&gt;<br />&#160;&#160;&#160;&#160;member Bind : f:(&#39;a -&gt; IO&lt;&#39;r,&#39;b,&#39;e&gt;) -&gt; IO&lt;&#39;r,&#39;b,&#39;e&gt;</div>
<div class="tip" id="fs94">Multiple items<br />val int : value:&#39;T -&gt; int (requires member op_Explicit)<br /><br />--------------------<br />type int = int32<br /><br />--------------------<br />type int&lt;&#39;Measure&gt; = int</div>
<div class="tip" id="fs95">type Clock =<br />&#160;&#160;interface<br />&#160;&#160;&#160;&#160;abstract member Clock : ClockService<br />&#160;&#160;end</div>
<div class="tip" id="fs96">val time : unit -&gt; UIO&lt;#Clock,Time&gt;</div>
<div class="tip" id="fs97">val c : #Clock</div>
<div class="tip" id="fs98">property Clock.Clock: ClockService</div>
<div class="tip" id="fs99">abstract member ClockService.Time : unit -&gt; UIO&lt;&#39;r,Time&gt;</div>
<div class="tip" id="fs100">val sleep : milliseconds:int -&gt; UIO&lt;#Clock,unit&gt;</div>
<div class="tip" id="fs101">abstract member ClockService.Sleep : int -&gt; UIO&lt;&#39;r,unit&gt;</div>
<div class="tip" id="fs102">val liveService : ClockService</div>
<div class="tip" id="fs103">Multiple items<br />union case Time.Time: Time<br /><br />--------------------<br />module Time<br /><br />from 2019-03-29-io<br /><br />--------------------<br />type Time = | Time</div>
<div class="tip" id="fs104">val __ : ClockService</div>
<div class="tip" id="fs105">Multiple items<br />union case Decision.Decision: cont: bool * delay: int * state: &#39;a * (unit -&gt; &#39;b) -&gt; Decision&lt;&#39;a,&#39;b&gt;<br /><br />--------------------<br />type Decision&lt;&#39;a,&#39;b&gt; = | Decision of cont: bool * delay: int * state: &#39;a * (unit -&gt; &#39;b)</div>
<div class="tip" id="fs106">Multiple items<br />union case Schedule.Schedule: initial: UIO&lt;&#39;r,&#39;s&gt; * update: &#39;a * &#39;s -&gt; UIO&lt;&#39;r,Decision&lt;&#39;s,&#39;b&gt;&gt; -&gt; Schedule&lt;&#39;r,&#39;s,&#39;a,&#39;b&gt;<br /><br />--------------------<br />type Schedule&lt;&#39;r,&#39;s,&#39;a,&#39;b&gt; = private | Schedule of initial: UIO&lt;&#39;r,&#39;s&gt; * update: &#39;a * &#39;s -&gt; UIO&lt;&#39;r,Decision&lt;&#39;s,&#39;b&gt;&gt;</div>
<div class="tip" id="fs107">val forever&lt;&#39;r,&#39;a&gt; : Schedule&lt;&#39;r,int,&#39;a,int&gt;</div>
<div class="tip" id="fs108">val s : int</div>
<div class="tip" id="fs109">val private updated : update:((&#39;a * &#39;s -&gt; UIO&lt;&#39;r,Decision&lt;&#39;s,&#39;b&gt;&gt;) -&gt; &#39;a * &#39;s -&gt; UIO&lt;&#39;r,Decision&lt;&#39;s,&#39;b2&gt;&gt;) -&gt; Schedule&lt;&#39;r,&#39;s,&#39;a,&#39;b&gt; -&gt; Schedule&lt;&#39;r,&#39;s,&#39;a,&#39;b2&gt;</div>
<div class="tip" id="fs110">val update : ((&#39;a * &#39;s -&gt; UIO&lt;&#39;r,Decision&lt;&#39;s,&#39;b&gt;&gt;) -&gt; &#39;a * &#39;s -&gt; UIO&lt;&#39;r,Decision&lt;&#39;s,&#39;b2&gt;&gt;)</div>
<div class="tip" id="fs111">val i : UIO&lt;&#39;r,&#39;s&gt;</div>
<div class="tip" id="fs112">val u : (&#39;a * &#39;s -&gt; UIO&lt;&#39;r,Decision&lt;&#39;s,&#39;b&gt;&gt;)</div>
<div class="tip" id="fs113">val private check : test:(&#39;a * &#39;b -&gt; UIO&lt;&#39;r,bool&gt;) -&gt; m:Schedule&lt;&#39;r,&#39;a0,&#39;a,&#39;b&gt; -&gt; Schedule&lt;&#39;r,&#39;a0,&#39;a,&#39;b&gt;</div>
<div class="tip" id="fs114">val test : (&#39;a * &#39;b -&gt; UIO&lt;&#39;r,bool&gt;)</div>
<div class="tip" id="fs115">val m : Schedule&lt;&#39;r,&#39;a,&#39;a0,&#39;b&gt;</div>
<div class="tip" id="fs116">val update : (&#39;a * &#39;a0 -&gt; UIO&lt;&#39;r,Decision&lt;&#39;a0,&#39;b&gt;&gt;)</div>
<div class="tip" id="fs117">val s : &#39;a</div>
<div class="tip" id="fs118">val cont : bool</div>
<div class="tip" id="fs119">val dur : int</div>
<div class="tip" id="fs120">val a1 : &#39;a</div>
<div class="tip" id="fs121">val fb : (unit -&gt; &#39;b)</div>
<div class="tip" id="fs122">val d : Decision&lt;&#39;a,&#39;b&gt;</div>
<div class="tip" id="fs123">val b : bool</div>
<div class="tip" id="fs124">val whileOutput : f:(&#39;b -&gt; bool) -&gt; m:Schedule&lt;&#39;a,&#39;b0,&#39;c,&#39;b&gt; -&gt; Schedule&lt;&#39;a,&#39;b0,&#39;c,&#39;b&gt;</div>
<div class="tip" id="fs125">val f : (&#39;b -&gt; bool)</div>
<div class="tip" id="fs126">val m : Schedule&lt;&#39;a,&#39;b,&#39;c,&#39;b0&gt;</div>
<div class="tip" id="fs127">val recurs : n:int -&gt; Schedule&lt;&#39;a,int,&#39;b,int&gt;</div>
<div class="tip" id="fs128">val n : int</div>
<div class="tip" id="fs129">val i : int</div>
<div class="tip" id="fs130">Multiple items<br />union case IO.IO: (&#39;r * Cancel -&gt; (Result&lt;&#39;a,&#39;e&gt; option -&gt; unit) -&gt; unit) -&gt; IO&lt;&#39;r,&#39;a,&#39;e&gt;<br /><br />--------------------<br />type IO&lt;&#39;r,&#39;a,&#39;e&gt; =<br />&#160;&#160;| IO of (&#39;r * Cancel -&gt; (Result&lt;&#39;a,&#39;e&gt; option -&gt; unit) -&gt; unit)<br />&#160;&#160;&#160;&#160;member Bind : f:(&#39;a -&gt; UIO&lt;&#39;r,&#39;b&gt;) -&gt; IO&lt;&#39;r,&#39;b,&#39;e&gt;<br />&#160;&#160;&#160;&#160;member Bind : f:(&#39;a -&gt; IO&lt;&#39;r,&#39;b,&#39;e&gt;) -&gt; IO&lt;&#39;r,&#39;b,&#39;e&gt;<br />&#160;&#160;&#160;&#160;member Bind : f:(&#39;a -&gt; IO&lt;&#39;r,&#39;b,&#39;e2&gt;) -&gt; IO&lt;&#39;r,&#39;b,Choice&lt;&#39;e,&#39;e2&gt;&gt;</div>
<div class="tip" id="fs131">Multiple items<br />module Result<br /><br />from 2019-03-29-io<br /><br />--------------------<br />module Result<br /><br />from Microsoft.FSharp.Core<br /><br />--------------------<br />type Result&lt;&#39;a,&#39;e&gt; =<br />&#160;&#160;| Ok of &#39;a<br />&#160;&#160;| Error of &#39;e</div>
<div class="tip" id="fs132">val m : IO&lt;&#39;r,&#39;a,&#39;e&gt;</div>
<div class="tip" id="fs133">val run : (&#39;r * Cancel -&gt; (Result&lt;&#39;a,&#39;e&gt; option -&gt; unit) -&gt; unit)</div>
<div class="tip" id="fs134">val cont : (Result&lt;&#39;b,&#39;e&gt; option -&gt; unit)</div>
<div class="tip" id="fs135">val o : Result&lt;&#39;a,&#39;e&gt; option</div>
<div class="tip" id="fs136">val o : &#39;b option</div>
<div class="tip" id="fs137">val e : &#39;e</div>
<div class="tip" id="fs138">val f : (&#39;a -&gt; IO&lt;&#39;r,&#39;b,&#39;e&gt;)</div>
<div class="tip" id="fs139">val run : (&#39;r * Cancel -&gt; (Result&lt;&#39;b,&#39;e&gt; option -&gt; unit) -&gt; unit)</div>
<div class="tip" id="fs140">val f : (&#39;a -&gt; IO&lt;&#39;r,&#39;b,&#39;e2&gt;)</div>
<div class="tip" id="fs141">Multiple items<br />module Choice<br /><br />from 2019-03-29-io<br /><br />--------------------<br />type Choice&lt;&#39;T1,&#39;T2&gt; =<br />&#160;&#160;| Choice1Of2 of &#39;T1<br />&#160;&#160;| Choice2Of2 of &#39;T2<br /><br />--------------------<br />type Choice&lt;&#39;T1,&#39;T2,&#39;T3&gt; =<br />&#160;&#160;| Choice1Of3 of &#39;T1<br />&#160;&#160;| Choice2Of3 of &#39;T2<br />&#160;&#160;| Choice3Of3 of &#39;T3<br /><br />--------------------<br />type Choice&lt;&#39;T1,&#39;T2,&#39;T3,&#39;T4&gt; =<br />&#160;&#160;| Choice1Of4 of &#39;T1<br />&#160;&#160;| Choice2Of4 of &#39;T2<br />&#160;&#160;| Choice3Of4 of &#39;T3<br />&#160;&#160;| Choice4Of4 of &#39;T4<br /><br />--------------------<br />type Choice&lt;&#39;T1,&#39;T2,&#39;T3,&#39;T4,&#39;T5&gt; =<br />&#160;&#160;| Choice1Of5 of &#39;T1<br />&#160;&#160;| Choice2Of5 of &#39;T2<br />&#160;&#160;| Choice3Of5 of &#39;T3<br />&#160;&#160;| Choice4Of5 of &#39;T4<br />&#160;&#160;| Choice5Of5 of &#39;T5<br /><br />--------------------<br />type Choice&lt;&#39;T1,&#39;T2,&#39;T3,&#39;T4,&#39;T5,&#39;T6&gt; =<br />&#160;&#160;| Choice1Of6 of &#39;T1<br />&#160;&#160;| Choice2Of6 of &#39;T2<br />&#160;&#160;| Choice3Of6 of &#39;T3<br />&#160;&#160;| Choice4Of6 of &#39;T4<br />&#160;&#160;| Choice5Of6 of &#39;T5<br />&#160;&#160;| Choice6Of6 of &#39;T6<br /><br />--------------------<br />type Choice&lt;&#39;T1,&#39;T2,&#39;T3,&#39;T4,&#39;T5,&#39;T6,&#39;T7&gt; =<br />&#160;&#160;| Choice1Of7 of &#39;T1<br />&#160;&#160;| Choice2Of7 of &#39;T2<br />&#160;&#160;| Choice3Of7 of &#39;T3<br />&#160;&#160;| Choice4Of7 of &#39;T4<br />&#160;&#160;| Choice5Of7 of &#39;T5<br />&#160;&#160;| Choice6Of7 of &#39;T6<br />&#160;&#160;| Choice7Of7 of &#39;T7</div>
<div class="tip" id="fs142">val cont : (Result&lt;&#39;b,Choice&lt;&#39;e,&#39;e2&gt;&gt; option -&gt; unit)</div>
<div class="tip" id="fs143">val bind : (&#39;r * Cancel -&gt; (Result&lt;&#39;b,&#39;e2&gt; option -&gt; unit) -&gt; unit)</div>
<div class="tip" id="fs144">val o : Result&lt;&#39;b,&#39;e2&gt; option</div>
<div class="tip" id="fs145">val b : Result&lt;&#39;b,Choice&lt;&#39;e,&#39;e2&gt;&gt; option</div>
<div class="tip" id="fs146">Multiple items<br />val mapError : f:(&#39;e -&gt; &#39;f) -&gt; Result&lt;&#39;a,&#39;e&gt; -&gt; Result&lt;&#39;a,&#39;f&gt;<br /><br />--------------------<br />val mapError : mapping:(&#39;TError -&gt; &#39;U) -&gt; result:Result&lt;&#39;T,&#39;TError&gt; -&gt; Result&lt;&#39;T,&#39;U&gt;</div>
<div class="tip" id="fs147">val bind : (&#39;r * Cancel -&gt; (Result&lt;&#39;b,&#39;e&gt; option -&gt; unit) -&gt; unit)</div>
<div class="tip" id="fs148">val ok : a:&#39;a -&gt; IO&lt;&#39;r,&#39;a,&#39;e&gt;</div>
<div class="tip" id="fs149">val cont : (Result&lt;&#39;a,&#39;e&gt; option -&gt; unit)</div>
<div class="tip" id="fs150">val error : e:&#39;e -&gt; IO&lt;&#39;r,&#39;a,&#39;e&gt;</div>
<div class="tip" id="fs151">val result : a:Result&lt;&#39;a,&#39;e&gt; -&gt; IO&lt;&#39;r,&#39;a,&#39;e&gt;</div>
<div class="tip" id="fs152">val a : Result&lt;&#39;a,&#39;e&gt;</div>
<div class="tip" id="fs153">val effect : f:(&#39;r -&gt; Result&lt;&#39;a,&#39;e&gt;) -&gt; IO&lt;&#39;r,&#39;a,&#39;e&gt;</div>
<div class="tip" id="fs154">val f : (&#39;r -&gt; Result&lt;&#39;a,&#39;e&gt;)</div>
<div class="tip" id="fs155">val map : f:(&#39;a -&gt; &#39;b) -&gt; IO&lt;&#39;r,&#39;a,&#39;e&gt; -&gt; IO&lt;&#39;r,&#39;b,&#39;e&gt;</div>
<div class="tip" id="fs156">val b : Result&lt;&#39;b,&#39;e&gt; option</div>
<div class="tip" id="fs157">Multiple items<br />val map : f:(&#39;a -&gt; &#39;b) -&gt; Result&lt;&#39;a,&#39;e&gt; -&gt; Result&lt;&#39;b,&#39;e&gt;<br /><br />--------------------<br />val map : mapping:(&#39;T -&gt; &#39;U) -&gt; result:Result&lt;&#39;T,&#39;TError&gt; -&gt; Result&lt;&#39;U,&#39;TError&gt;</div>
<div class="tip" id="fs158">val mapError : f:(&#39;e -&gt; &#39;e2) -&gt; IO&lt;&#39;r,&#39;a,&#39;e&gt; -&gt; IO&lt;&#39;r,&#39;a,&#39;e2&gt;</div>
<div class="tip" id="fs159">val f : (&#39;e -&gt; &#39;e2)</div>
<div class="tip" id="fs160">val cont : (Result&lt;&#39;a,&#39;e2&gt; option -&gt; unit)</div>
<div class="tip" id="fs161">val b : Result&lt;&#39;a,&#39;e2&gt; option</div>
<div class="tip" id="fs162">val mapResult : f:(Result&lt;&#39;a,&#39;e&gt; -&gt; Result&lt;&#39;b,&#39;e2&gt;) -&gt; IO&lt;&#39;r,&#39;a,&#39;e&gt; -&gt; IO&lt;&#39;r,&#39;b,&#39;e2&gt;</div>
<div class="tip" id="fs163">val f : (Result&lt;&#39;a,&#39;e&gt; -&gt; Result&lt;&#39;b,&#39;e2&gt;)</div>
<div class="tip" id="fs164">val cont : (Result&lt;&#39;b,&#39;e2&gt; option -&gt; unit)</div>
<div class="tip" id="fs165">val b : Result&lt;&#39;b,&#39;e2&gt; option</div>
<div class="tip" id="fs166">val private foldM : succ:(&#39;a -&gt; IO&lt;&#39;r,&#39;b,&#39;e2&gt;) -&gt; err:(&#39;e -&gt; IO&lt;&#39;r,&#39;b,&#39;e2&gt;) -&gt; IO&lt;&#39;r,&#39;a,&#39;e&gt; -&gt; IO&lt;&#39;r,&#39;b,&#39;e2&gt;</div>
<div class="tip" id="fs167">val succ : (&#39;a -&gt; IO&lt;&#39;r,&#39;b,&#39;e2&gt;)</div>
<div class="tip" id="fs168">val err : (&#39;e -&gt; IO&lt;&#39;r,&#39;b,&#39;e2&gt;)</div>
<div class="tip" id="fs169">val run : (&#39;r * Cancel -&gt; (Result&lt;&#39;b,&#39;e2&gt; option -&gt; unit) -&gt; unit)</div>
<div class="tip" id="fs170">val private retryOrElse : Schedule&lt;&#39;r,&#39;s,&#39;e,&#39;a&gt; -&gt; orElse:(&#39;e * &#39;s -&gt; IO&lt;&#39;r,&#39;b,&#39;e2&gt;) -&gt; io:IO&lt;&#39;r,&#39;a0,&#39;e&gt; -&gt; IO&lt;&#39;r,Choice&lt;&#39;a0,&#39;b&gt;,&#39;e2&gt; (requires &#39;r :&gt; Clock)</div>
<div class="tip" id="fs171">Multiple items<br />union case Schedule.Schedule: initial: UIO&lt;&#39;r,&#39;s&gt; * update: &#39;a * &#39;s -&gt; UIO&lt;&#39;r,Decision&lt;&#39;s,&#39;b&gt;&gt; -&gt; Schedule&lt;&#39;r,&#39;s,&#39;a,&#39;b&gt;<br /><br />--------------------<br />module Schedule<br /><br />from 2019-03-29-io<br /><br />--------------------<br />type Schedule&lt;&#39;r,&#39;s,&#39;a,&#39;b&gt; = private | Schedule of initial: UIO&lt;&#39;r,&#39;s&gt; * update: &#39;a * &#39;s -&gt; UIO&lt;&#39;r,Decision&lt;&#39;s,&#39;b&gt;&gt;</div>
<div class="tip" id="fs172">val initial : UIO&lt;#Clock,&#39;s&gt;</div>
<div class="tip" id="fs173">val update : (&#39;e * &#39;s -&gt; UIO&lt;#Clock,Decision&lt;&#39;s,&#39;a&gt;&gt;)</div>
<div class="tip" id="fs174">val orElse : (&#39;e * &#39;s -&gt; IO&lt;#Clock,&#39;b,&#39;e2&gt;)</div>
<div class="tip" id="fs175">val io : IO&lt;#Clock,&#39;a,&#39;e&gt;</div>
<div class="tip" id="fs176">val loop : (&#39;s -&gt; IO&lt;#Clock,Choice&lt;&#39;a,&#39;b&gt;,&#39;e2&gt;)</div>
<div class="tip" id="fs177">val state : &#39;s</div>
<div class="tip" id="fs178">val u : UIO&lt;#Clock,Decision&lt;&#39;s,&#39;a&gt;&gt;</div>
<div class="tip" id="fs179">member UIO.Bind : f:(&#39;a -&gt; UIO&lt;&#39;r,&#39;b&gt;) -&gt; UIO&lt;&#39;r,&#39;b&gt;<br />member UIO.Bind : f:(&#39;a -&gt; IO&lt;&#39;r,&#39;b,&#39;e&gt;) -&gt; IO&lt;&#39;r,&#39;b,&#39;e&gt;</div>
<div class="tip" id="fs180">val delay : int</div>
<div class="tip" id="fs181">Multiple items<br />module Clock<br /><br />from 2019-03-29-io<br /><br />--------------------<br />type Clock =<br />&#160;&#160;interface<br />&#160;&#160;&#160;&#160;abstract member Clock : ClockService<br />&#160;&#160;end</div>
<div class="tip" id="fs182">val retry : policy:Schedule&lt;&#39;r,&#39;s,&#39;e,&#39;sb&gt; -&gt; io:IO&lt;&#39;r,&#39;a,&#39;e&gt; -&gt; IO&lt;&#39;r,&#39;a,&#39;e&gt; (requires &#39;r :&gt; Clock)</div>
<div class="tip" id="fs183">val policy : Schedule&lt;#Clock,&#39;s,&#39;e,&#39;sb&gt;</div>
<div class="tip" id="fs184">val fork : IO&lt;&#39;r,&#39;a,&#39;e&gt; -&gt; UIO&lt;&#39;r,IO&lt;&#39;r,&#39;a,&#39;e&gt;&gt;</div>
<div class="tip" id="fs185">val contFork : (IO&lt;&#39;r,&#39;a,&#39;e&gt; option -&gt; unit)</div>
<div class="tip" id="fs186">val a : Result&lt;&#39;a,&#39;e&gt; option</div>
<div class="tip" id="fs187">val para : ios:IO&lt;&#39;r,&#39;a,&#39;e&gt; [] -&gt; IO&lt;&#39;r,&#39;a [],&#39;e&gt;</div>
<div class="tip" id="fs188">val ios : IO&lt;&#39;r,&#39;a,&#39;e&gt; []</div>
<div class="tip" id="fs189">val cont : (Result&lt;&#39;a [],&#39;e&gt; option -&gt; unit)</div>
<div class="tip" id="fs190">val envChild : &#39;r * Cancel</div>
<div class="tip" id="fs191">val results : &#39;a []</div>
<div class="tip" id="fs192">module Array<br /><br />from Microsoft.FSharp.Collections</div>
<div class="tip" id="fs193">val zeroCreate : count:int -&gt; &#39;T []</div>
<div class="tip" id="fs194">property System.Array.Length: int</div>
<div class="tip" id="fs195">val mutable count : int</div>
<div class="tip" id="fs196">val iteri : action:(int -&gt; &#39;T -&gt; unit) -&gt; array:&#39;T [] -&gt; unit</div>
<div class="tip" id="fs197">val io : IO&lt;&#39;r,&#39;a,&#39;e&gt;</div>
<div class="tip" id="fs198">Interlocked.Decrement(location: byref&lt;int64&gt;) : int64<br />Interlocked.Decrement(location: byref&lt;int&gt;) : int</div>
<div class="tip" id="fs199">Interlocked.Exchange&lt;&#39;T (requires reference type)&gt;(location1: byref&lt;&#39;T&gt;, value: &#39;T) : &#39;T<br />Interlocked.Exchange(location1: byref&lt;nativeint&gt;, value: nativeint) : nativeint<br />Interlocked.Exchange(location1: byref&lt;obj&gt;, value: obj) : obj<br />Interlocked.Exchange(location1: byref&lt;float&gt;, value: float) : float<br />Interlocked.Exchange(location1: byref&lt;float32&gt;, value: float32) : float32<br />Interlocked.Exchange(location1: byref&lt;int64&gt;, value: int64) : int64<br />Interlocked.Exchange(location1: byref&lt;int&gt;, value: int) : int</div>
<div class="tip" id="fs200">val race : UIO&lt;&#39;r,&#39;a2&gt; -&gt; IO&lt;&#39;r,&#39;a1,&#39;e1&gt; -&gt; IO&lt;&#39;r,Choice&lt;&#39;a1,&#39;a2&gt;,&#39;e1&gt;</div>
<div class="tip" id="fs201">val run1 : (&#39;r * Cancel -&gt; (&#39;a2 option -&gt; unit) -&gt; unit)</div>
<div class="tip" id="fs202">val run2 : (&#39;r * Cancel -&gt; (Result&lt;&#39;a1,&#39;e1&gt; option -&gt; unit) -&gt; unit)</div>
<div class="tip" id="fs203">val cont : (Result&lt;Choice&lt;&#39;a1,&#39;a2&gt;,&#39;e1&gt; option -&gt; unit)</div>
<div class="tip" id="fs204">val mutable o : int</div>
<div class="tip" id="fs205">val a : &#39;a2 option</div>
<div class="tip" id="fs206">val a : Result&lt;&#39;a1,&#39;e1&gt; option</div>
<div class="tip" id="fs207">val timeout : milliseconds:int -&gt; io:IO&lt;&#39;r,&#39;a,&#39;e&gt; -&gt; IO&lt;&#39;r,&#39;a,&#39;e option&gt; (requires &#39;r :&gt; Clock)</div>
<div class="tip" id="fs208">val env : #Clock * Cancel</div>
<div class="tip" id="fs209">val cont : (Result&lt;&#39;a,&#39;e option&gt; option -&gt; unit)</div>
<div class="tip" id="fs210">val run : (#Clock * Cancel -&gt; (Result&lt;Choice&lt;&#39;a,unit&gt;,&#39;e&gt; option -&gt; unit) -&gt; unit)</div>
<div class="tip" id="fs211">val o : Result&lt;Choice&lt;&#39;a,unit&gt;,&#39;e&gt; option</div>
<div class="tip" id="fs212">val toAsync : env:&#39;r -&gt; IO&lt;&#39;r,&#39;a,&#39;e&gt; -&gt; Async&lt;Result&lt;&#39;a,&#39;e&gt;&gt;</div>
<div class="tip" id="fs213">val cont : (Result&lt;&#39;a,&#39;e&gt; -&gt; unit)</div>
<div class="tip" id="fs214">property Option.Value: Result&lt;&#39;a,&#39;e&gt;</div>
<div class="tip" id="fs215">Multiple items<br />type IOBuilder =<br />&#160;&#160;new : unit -&gt; IOBuilder<br />&#160;&#160;member Bind : io:UIO&lt;&#39;r,&#39;a&gt; * f:(&#39;a -&gt; UIO&lt;&#39;r,&#39;b&gt;) -&gt; UIO&lt;&#39;r,&#39;b&gt;<br />&#160;&#160;member Bind : io:IO&lt;&#39;r,&#39;a,&#39;e&gt; * f:(&#39;a -&gt; UIO&lt;&#39;r,&#39;b&gt;) -&gt; IO&lt;&#39;r,&#39;b,&#39;e&gt;<br />&#160;&#160;member Bind : io:UIO&lt;&#39;r,&#39;a&gt; * f:(&#39;a -&gt; IO&lt;&#39;r,&#39;b,&#39;e&gt;) -&gt; IO&lt;&#39;r,&#39;b,&#39;e&gt;<br />&#160;&#160;member Bind : io:IO&lt;&#39;r,&#39;a,&#39;e&gt; * f:(&#39;a -&gt; IO&lt;&#39;r,&#39;b,&#39;e&gt;) -&gt; IO&lt;&#39;r,&#39;b,&#39;e&gt;<br />&#160;&#160;member Bind : io:IO&lt;&#39;r,&#39;a,&#39;e1&gt; * f:(&#39;a -&gt; IO&lt;&#39;r,&#39;b,&#39;e2&gt;) -&gt; IO&lt;&#39;r,&#39;b,Choice&lt;&#39;e1,&#39;e2&gt;&gt;<br />&#160;&#160;member Return : value:&#39;b -&gt; UIO&lt;&#39;c,&#39;b&gt;<br />&#160;&#160;member ReturnFrom : value:&#39;a -&gt; &#39;a<br /><br />--------------------<br />new : unit -&gt; IOBuilder</div>
<div class="tip" id="fs216">val io : UIO&lt;&#39;r,&#39;a&gt;</div>
<div class="tip" id="fs217">val __ : IOBuilder</div>
<div class="tip" id="fs218">Multiple items<br />union case IO.IO: (&#39;r * Cancel -&gt; (Result&lt;&#39;a,&#39;e&gt; option -&gt; unit) -&gt; unit) -&gt; IO&lt;&#39;r,&#39;a,&#39;e&gt;<br /><br />--------------------<br />module IO<br /><br />from 2019-03-29-io<br /><br />--------------------<br />type IO&lt;&#39;r,&#39;a,&#39;e&gt; =<br />&#160;&#160;| IO of (&#39;r * Cancel -&gt; (Result&lt;&#39;a,&#39;e&gt; option -&gt; unit) -&gt; unit)<br />&#160;&#160;&#160;&#160;member Bind : f:(&#39;a -&gt; UIO&lt;&#39;r,&#39;b&gt;) -&gt; IO&lt;&#39;r,&#39;b,&#39;e&gt;<br />&#160;&#160;&#160;&#160;member Bind : f:(&#39;a -&gt; IO&lt;&#39;r,&#39;b,&#39;e&gt;) -&gt; IO&lt;&#39;r,&#39;b,&#39;e&gt;<br />&#160;&#160;&#160;&#160;member Bind : f:(&#39;a -&gt; IO&lt;&#39;r,&#39;b,&#39;e2&gt;) -&gt; IO&lt;&#39;r,&#39;b,Choice&lt;&#39;e,&#39;e2&gt;&gt;</div>
<div class="tip" id="fs219">member IO.Bind : f:(&#39;a -&gt; UIO&lt;&#39;r,&#39;b&gt;) -&gt; IO&lt;&#39;r,&#39;b,&#39;e&gt;<br />member IO.Bind : f:(&#39;a -&gt; IO&lt;&#39;r,&#39;b,&#39;e&gt;) -&gt; IO&lt;&#39;r,&#39;b,&#39;e&gt;<br />member IO.Bind : f:(&#39;a -&gt; IO&lt;&#39;r,&#39;b,&#39;e2&gt;) -&gt; IO&lt;&#39;r,&#39;b,Choice&lt;&#39;e,&#39;e2&gt;&gt;</div>
<div class="tip" id="fs220">val io : IO&lt;&#39;r,&#39;a,&#39;e1&gt;</div>
<div class="tip" id="fs221">val value : &#39;b</div>
<div class="tip" id="fs222">val value : &#39;a</div>
<div class="tip" id="fs223">Multiple items<br />type AutoOpenAttribute =<br />&#160;&#160;inherit Attribute<br />&#160;&#160;new : unit -&gt; AutoOpenAttribute<br />&#160;&#160;new : path:string -&gt; AutoOpenAttribute<br />&#160;&#160;member Path : string<br /><br />--------------------<br />new : unit -&gt; AutoOpenAttribute<br />new : path:string -&gt; AutoOpenAttribute</div>
<div class="tip" id="fs224">val io : IOBuilder</div>
<div class="tip" id="fs225">Multiple items<br />union case ConsoleError.ConsoleError: ConsoleError<br /><br />--------------------<br />type ConsoleError = | ConsoleError</div>
<div class="tip" id="fs226">type ConsoleService =<br />&#160;&#160;interface<br />&#160;&#160;&#160;&#160;abstract member ReadLine : unit -&gt; Result&lt;string,ConsoleError&gt;<br />&#160;&#160;&#160;&#160;abstract member WriteLine : string -&gt; unit<br />&#160;&#160;end</div>
<div class="tip" id="fs227">Multiple items<br />val string : value:&#39;T -&gt; string<br /><br />--------------------<br />type string = System.String</div>
<div class="tip" id="fs228">type Console =<br />&#160;&#160;interface<br />&#160;&#160;&#160;&#160;abstract member Console : ConsoleService<br />&#160;&#160;end</div>
<div class="tip" id="fs229">val writeLine : s:string -&gt; UIO&lt;#Console,unit&gt;</div>
<div class="tip" id="fs230">val s : string</div>
<div class="tip" id="fs231">val c : #Console</div>
<div class="tip" id="fs232">property Console.Console: ConsoleService</div>
<div class="tip" id="fs233">abstract member ConsoleService.WriteLine : string -&gt; unit</div>
<div class="tip" id="fs234">val readLine : unit -&gt; IO&lt;#Console,string,ConsoleError&gt;</div>
<div class="tip" id="fs235">abstract member ConsoleService.ReadLine : unit -&gt; Result&lt;string,ConsoleError&gt;</div>
<div class="tip" id="fs236">type LoggingService =<br />&#160;&#160;interface<br />&#160;&#160;&#160;&#160;abstract member Log : string -&gt; unit<br />&#160;&#160;end</div>
<div class="tip" id="fs237">type Logger =<br />&#160;&#160;interface<br />&#160;&#160;&#160;&#160;abstract member Logging : LoggingService<br />&#160;&#160;end</div>
<div class="tip" id="fs238">val log : s:string -&gt; UIO&lt;#Logger,unit&gt;</div>
<div class="tip" id="fs239">val l : #Logger</div>
<div class="tip" id="fs240">property Logger.Logging: LoggingService</div>
<div class="tip" id="fs241">abstract member LoggingService.Log : string -&gt; unit</div>
<div class="tip" id="fs242">Multiple items<br />union case PersistError.PersistError: PersistError<br /><br />--------------------<br />type PersistError = | PersistError</div>
<div class="tip" id="fs243">type PersistenceService =<br />&#160;&#160;interface<br />&#160;&#160;&#160;&#160;abstract member Persist : &#39;a -&gt; Result&lt;unit,PersistError&gt;<br />&#160;&#160;end</div>
<div class="tip" id="fs244">type Persistence =<br />&#160;&#160;interface<br />&#160;&#160;&#160;&#160;abstract member Persistence : PersistenceService<br />&#160;&#160;end</div>
<div class="tip" id="fs245">val persist : a:&#39;a -&gt; IO&lt;#Persistence,unit,PersistError&gt;</div>
<div class="tip" id="fs246">val p : #Persistence</div>
<div class="tip" id="fs247">property Persistence.Persistence: PersistenceService</div>
<div class="tip" id="fs248">abstract member PersistenceService.Persist : &#39;a -&gt; Result&lt;unit,PersistError&gt;</div>
<div class="tip" id="fs249">val programRetry : noRetry:int -&gt; IO&lt;&#39;r,int,Choice&lt;ConsoleError,PersistError option&gt;&gt; (requires &#39;r :&gt; Logger and &#39;r :&gt; Clock and &#39;r :&gt; Persistence and &#39;r :&gt; Console)</div>
<div class="tip" id="fs250">val noRetry : int</div>
<div class="tip" id="fs251">Multiple items<br />module Logger<br /><br />from 2019-03-29-io<br /><br />--------------------<br />type Logger =<br />&#160;&#160;interface<br />&#160;&#160;&#160;&#160;abstract member Logging : LoggingService<br />&#160;&#160;end</div>
<div class="tip" id="fs252">Multiple items<br />module Console<br /><br />from 2019-03-29-io<br /><br />--------------------<br />type Console =<br />&#160;&#160;interface<br />&#160;&#160;&#160;&#160;abstract member Console : ConsoleService<br />&#160;&#160;end</div>
<div class="tip" id="fs253">val name : string</div>
<div class="tip" id="fs254">val thread : IO&lt;&#39;r,unit,PersistError option&gt; (requires &#39;r :&gt; Logger and &#39;r :&gt; Clock and &#39;r :&gt; Persistence and &#39;r :&gt; Console)</div>
<div class="tip" id="fs255">Multiple items<br />module Persistence<br /><br />from 2019-03-29-io<br /><br />--------------------<br />type Persistence =<br />&#160;&#160;interface<br />&#160;&#160;&#160;&#160;abstract member Persistence : PersistenceService<br />&#160;&#160;end</div>
